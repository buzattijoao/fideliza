(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Um(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var md={exports:{}},Ji={},pd={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ns=Symbol.for("react.element"),zm=Symbol.for("react.portal"),Fm=Symbol.for("react.fragment"),Bm=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),Vm=Symbol.for("react.provider"),Hm=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),Km=Symbol.for("react.suspense"),Qm=Symbol.for("react.memo"),Jm=Symbol.for("react.lazy"),Ac=Symbol.iterator;function Gm(e){return e===null||typeof e!="object"?null:(e=Ac&&e[Ac]||e["@@iterator"],typeof e=="function"?e:null)}var gd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xd=Object.assign,yd={};function kr(e,t,n){this.props=e,this.context=t,this.refs=yd,this.updater=n||gd}kr.prototype.isReactComponent={};kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vd(){}vd.prototype=kr.prototype;function wl(e,t,n){this.props=e,this.context=t,this.refs=yd,this.updater=n||gd}var bl=wl.prototype=new vd;bl.constructor=wl;xd(bl,kr.prototype);bl.isPureReactComponent=!0;var Rc=Array.isArray,wd=Object.prototype.hasOwnProperty,jl={current:null},bd={key:!0,ref:!0,__self:!0,__source:!0};function jd(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)wd.call(t,r)&&!bd.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ns,type:e,key:i,ref:a,props:s,_owner:jl.current}}function Ym(e,t){return{$$typeof:Ns,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ns}function Xm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ic=/\/+/g;function So(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xm(""+e.key):t.toString(36)}function ii(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ns:case zm:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+So(a,0):r,Rc(s)?(n="",e!=null&&(n=e.replace(Ic,"$&/")+"/"),ii(s,t,n,"",function(u){return u})):s!=null&&(Nl(s)&&(s=Ym(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ic,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Rc(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+So(i,l);a+=ii(i,t,n,c,s)}else if(c=Gm(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+So(i,l++),a+=ii(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ls(e,t,n){if(e==null)return e;var r=[],s=0;return ii(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Zm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Re={current:null},oi={transition:null},ep={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:oi,ReactCurrentOwner:jl};function Nd(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Ls,forEach:function(e,t,n){Ls(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ls(e,function(){t++}),t},toArray:function(e){return Ls(e,function(t){return t})||[]},only:function(e){if(!Nl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=kr;B.Fragment=Fm;B.Profiler=qm;B.PureComponent=wl;B.StrictMode=Bm;B.Suspense=Km;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ep;B.act=Nd;B.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=xd({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=jl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wd.call(t,c)&&!bd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ns,type:e.type,key:s,ref:i,props:r,_owner:a}};B.createContext=function(e){return e={$$typeof:Hm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vm,_context:e},e.Consumer=e};B.createElement=jd;B.createFactory=function(e){var t=jd.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:Wm,render:e}};B.isValidElement=Nl;B.lazy=function(e){return{$$typeof:Jm,_payload:{_status:-1,_result:e},_init:Zm}};B.memo=function(e,t){return{$$typeof:Qm,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=oi.transition;oi.transition={};try{e()}finally{oi.transition=t}};B.unstable_act=Nd;B.useCallback=function(e,t){return Re.current.useCallback(e,t)};B.useContext=function(e){return Re.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return Re.current.useDeferredValue(e)};B.useEffect=function(e,t){return Re.current.useEffect(e,t)};B.useId=function(){return Re.current.useId()};B.useImperativeHandle=function(e,t,n){return Re.current.useImperativeHandle(e,t,n)};B.useInsertionEffect=function(e,t){return Re.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return Re.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return Re.current.useMemo(e,t)};B.useReducer=function(e,t,n){return Re.current.useReducer(e,t,n)};B.useRef=function(e){return Re.current.useRef(e)};B.useState=function(e){return Re.current.useState(e)};B.useSyncExternalStore=function(e,t,n){return Re.current.useSyncExternalStore(e,t,n)};B.useTransition=function(){return Re.current.useTransition()};B.version="18.3.1";pd.exports=B;var T=pd.exports;const _l=Um(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp=T,np=Symbol.for("react.element"),rp=Symbol.for("react.fragment"),sp=Object.prototype.hasOwnProperty,ip=tp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,op={key:!0,ref:!0,__self:!0,__source:!0};function _d(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)sp.call(t,r)&&!op.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:np,type:e,key:i,ref:a,props:s,_owner:ip.current}}Ji.Fragment=rp;Ji.jsx=_d;Ji.jsxs=_d;md.exports=Ji;var o=md.exports,kd={exports:{}},Qe={},Sd={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,D){var L=A.length;A.push(D);e:for(;0<L;){var q=L-1>>>1,ee=A[q];if(0<s(ee,D))A[q]=D,A[L]=ee,L=q;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var D=A[0],L=A.pop();if(L!==D){A[0]=L;e:for(var q=0,ee=A.length,pe=ee>>>1;q<pe;){var we=2*(q+1)-1,Q=A[we],mt=we+1,pt=A[mt];if(0>s(Q,L))mt<ee&&0>s(pt,Q)?(A[q]=pt,A[mt]=L,q=mt):(A[q]=Q,A[we]=L,q=we);else if(mt<ee&&0>s(pt,L))A[q]=pt,A[mt]=L,q=mt;else break e}}return D}function s(A,D){var L=A.sortIndex-D.sortIndex;return L!==0?L:A.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,m=null,x=3,g=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(A){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=A)r(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function y(A){if(b=!1,f(A),!v)if(n(c)!==null)v=!0,$(N);else{var D=n(u);D!==null&&K(y,D.startTime-A)}}function N(A,D){v=!1,b&&(b=!1,h(C),C=-1),g=!0;var L=x;try{for(f(D),m=n(c);m!==null&&(!(m.expirationTime>D)||A&&!H());){var q=m.callback;if(typeof q=="function"){m.callback=null,x=m.priorityLevel;var ee=q(m.expirationTime<=D);D=e.unstable_now(),typeof ee=="function"?m.callback=ee:m===n(c)&&r(c),f(D)}else r(c);m=n(c)}if(m!==null)var pe=!0;else{var we=n(u);we!==null&&K(y,we.startTime-D),pe=!1}return pe}finally{m=null,x=L,g=!1}}var k=!1,_=null,C=-1,O=5,R=-1;function H(){return!(e.unstable_now()-R<O)}function Y(){if(_!==null){var A=e.unstable_now();R=A;var D=!0;try{D=_(!0,A)}finally{D?S():(k=!1,_=null)}}else k=!1}var S;if(typeof p=="function")S=function(){p(Y)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,P=W.port2;W.port1.onmessage=Y,S=function(){P.postMessage(null)}}else S=function(){w(Y,0)};function $(A){_=A,k||(k=!0,S())}function K(A,D){C=w(function(){A(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,$(N))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var L=x;x=D;try{return A()}finally{x=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var L=x;x=A;try{return D()}finally{x=L}},e.unstable_scheduleCallback=function(A,D,L){var q=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?q+L:q):L=q,A){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=L+ee,A={id:d++,callback:D,priorityLevel:A,startTime:L,expirationTime:ee,sortIndex:-1},L>q?(A.sortIndex=L,t(u,A),n(c)===null&&A===n(u)&&(b?(h(C),C=-1):b=!0,K(y,L-q))):(A.sortIndex=ee,t(c,A),v||g||(v=!0,$(N))),A},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(A){var D=x;return function(){var L=x;x=D;try{return A.apply(this,arguments)}finally{x=L}}}})(Cd);Sd.exports=Cd;var ap=Sd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=T,We=ap;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ed=new Set,rs={};function On(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(rs[e]=t,e=0;e<t.length;e++)Ed.add(t[e])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=Object.prototype.hasOwnProperty,cp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dc={},Oc={};function up(e){return fa.call(Oc,e)?!0:fa.call(Dc,e)?!1:cp.test(e)?Oc[e]=!0:(Dc[e]=!0,!1)}function dp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hp(e,t,n,r){if(t===null||typeof t>"u"||dp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ie(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ne[e]=new Ie(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ne[t]=new Ie(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ne[e]=new Ie(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ne[e]=new Ie(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ne[e]=new Ie(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ne[e]=new Ie(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ne[e]=new Ie(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ne[e]=new Ie(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ne[e]=new Ie(e,5,!1,e.toLowerCase(),null,!1,!1)});var kl=/[\-:]([a-z])/g;function Sl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kl,Sl);Ne[t]=new Ie(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kl,Sl);Ne[t]=new Ie(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kl,Sl);Ne[t]=new Ie(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ne[e]=new Ie(e,1,!1,e.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ne[e]=new Ie(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cl(e,t,n,r){var s=Ne.hasOwnProperty(t)?Ne[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hp(t,n,s,r)&&(n=null),r||s===null?up(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Dt=lp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$s=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),El=Symbol.for("react.strict_mode"),ma=Symbol.for("react.profiler"),Pd=Symbol.for("react.provider"),Td=Symbol.for("react.context"),Pl=Symbol.for("react.forward_ref"),pa=Symbol.for("react.suspense"),ga=Symbol.for("react.suspense_list"),Tl=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),Ad=Symbol.for("react.offscreen"),Lc=Symbol.iterator;function Tr(e){return e===null||typeof e!="object"?null:(e=Lc&&e[Lc]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,Co;function Mr(e){if(Co===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Co=t&&t[1]||""}return`
`+Co+e}var Eo=!1;function Po(e,t){if(!e||Eo)return"";Eo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Eo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mr(e):""}function fp(e){switch(e.tag){case 5:return Mr(e.type);case 16:return Mr("Lazy");case 13:return Mr("Suspense");case 19:return Mr("SuspenseList");case 0:case 2:case 15:return e=Po(e.type,!1),e;case 11:return e=Po(e.type.render,!1),e;case 1:return e=Po(e.type,!0),e;default:return""}}function xa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jn:return"Fragment";case Qn:return"Portal";case ma:return"Profiler";case El:return"StrictMode";case pa:return"Suspense";case ga:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Td:return(e.displayName||"Context")+".Consumer";case Pd:return(e._context.displayName||"Context")+".Provider";case Pl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tl:return t=e.displayName||null,t!==null?t:xa(e.type)||"Memo";case Ut:t=e._payload,e=e._init;try{return xa(e(t))}catch{}}return null}function mp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xa(t);case 8:return t===El?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pp(e){var t=Rd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Us(e){e._valueTracker||(e._valueTracker=pp(e))}function Id(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Rd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ya(e,t){var n=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $c(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dd(e,t){t=t.checked,t!=null&&Cl(e,"checked",t,!1)}function va(e,t){Dd(e,t);var n=sn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wa(e,t.type,n):t.hasOwnProperty("defaultValue")&&wa(e,t.type,sn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function wa(e,t,n){(t!=="number"||yi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zr=Array.isArray;function or(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ba(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(E(92));if(zr(n)){if(1<n.length)throw Error(E(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sn(n)}}function Od(e,t){var n=sn(t.value),r=sn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ld(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ja(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ld(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ms,$d=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ss(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gp=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){gp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function Ud(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function Md(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ud(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var xp=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Na(e,t){if(t){if(xp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function _a(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ka=null;function Al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sa=null,ar=null,lr=null;function Fc(e){if(e=Ss(e)){if(typeof Sa!="function")throw Error(E(280));var t=e.stateNode;t&&(t=eo(t),Sa(e.stateNode,e.type,t))}}function zd(e){ar?lr?lr.push(e):lr=[e]:ar=e}function Fd(){if(ar){var e=ar,t=lr;if(lr=ar=null,Fc(e),t)for(e=0;e<t.length;e++)Fc(t[e])}}function Bd(e,t){return e(t)}function qd(){}var To=!1;function Vd(e,t,n){if(To)return e(t,n);To=!0;try{return Bd(e,t,n)}finally{To=!1,(ar!==null||lr!==null)&&(qd(),Fd())}}function is(e,t){var n=e.stateNode;if(n===null)return null;var r=eo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(E(231,t,typeof n));return n}var Ca=!1;if(Tt)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Ca=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Ca=!1}function yp(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Hr=!1,vi=null,wi=!1,Ea=null,vp={onError:function(e){Hr=!0,vi=e}};function wp(e,t,n,r,s,i,a,l,c){Hr=!1,vi=null,yp.apply(vp,arguments)}function bp(e,t,n,r,s,i,a,l,c){if(wp.apply(this,arguments),Hr){if(Hr){var u=vi;Hr=!1,vi=null}else throw Error(E(198));wi||(wi=!0,Ea=u)}}function Ln(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Hd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bc(e){if(Ln(e)!==e)throw Error(E(188))}function jp(e){var t=e.alternate;if(!t){if(t=Ln(e),t===null)throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bc(s),e;if(i===r)return Bc(s),t;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?e:t}function Wd(e){return e=jp(e),e!==null?Kd(e):null}function Kd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kd(e);if(t!==null)return t;e=e.sibling}return null}var Qd=We.unstable_scheduleCallback,qc=We.unstable_cancelCallback,Np=We.unstable_shouldYield,_p=We.unstable_requestPaint,ce=We.unstable_now,kp=We.unstable_getCurrentPriorityLevel,Rl=We.unstable_ImmediatePriority,Jd=We.unstable_UserBlockingPriority,bi=We.unstable_NormalPriority,Sp=We.unstable_LowPriority,Gd=We.unstable_IdlePriority,Gi=null,wt=null;function Cp(e){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Gi,e,void 0,(e.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:Tp,Ep=Math.log,Pp=Math.LN2;function Tp(e){return e>>>=0,e===0?32:31-(Ep(e)/Pp|0)|0}var zs=64,Fs=4194304;function Fr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ji(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Fr(l):(i&=a,i!==0&&(r=Fr(i)))}else a=n&~s,a!==0?r=Fr(a):i!==0&&(r=Fr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dt(t),s=1<<n,r|=e[n],t&=~s;return r}function Ap(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-dt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Ap(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Pa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yd(){var e=zs;return zs<<=1,!(zs&4194240)&&(zs=64),e}function Ao(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _s(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dt(t),e[t]=n}function Ip(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-dt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Il(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var J=0;function Xd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zd,Dl,eh,th,nh,Ta=!1,Bs=[],Gt=null,Yt=null,Xt=null,os=new Map,as=new Map,Ft=[],Dp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(e,t){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Yt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(t.pointerId)}}function Rr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ss(t),t!==null&&Dl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Op(e,t,n,r,s){switch(t){case"focusin":return Gt=Rr(Gt,e,t,n,r,s),!0;case"dragenter":return Yt=Rr(Yt,e,t,n,r,s),!0;case"mouseover":return Xt=Rr(Xt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return os.set(i,Rr(os.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,as.set(i,Rr(as.get(i)||null,e,t,n,r,s)),!0}return!1}function rh(e){var t=yn(e.target);if(t!==null){var n=Ln(t);if(n!==null){if(t=n.tag,t===13){if(t=Hd(n),t!==null){e.blockedOn=t,nh(e.priority,function(){eh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ai(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Aa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ka=r,n.target.dispatchEvent(r),ka=null}else return t=Ss(n),t!==null&&Dl(t),e.blockedOn=n,!1;t.shift()}return!0}function Hc(e,t,n){ai(e)&&n.delete(t)}function Lp(){Ta=!1,Gt!==null&&ai(Gt)&&(Gt=null),Yt!==null&&ai(Yt)&&(Yt=null),Xt!==null&&ai(Xt)&&(Xt=null),os.forEach(Hc),as.forEach(Hc)}function Ir(e,t){e.blockedOn===t&&(e.blockedOn=null,Ta||(Ta=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,Lp)))}function ls(e){function t(s){return Ir(s,e)}if(0<Bs.length){Ir(Bs[0],e);for(var n=1;n<Bs.length;n++){var r=Bs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gt!==null&&Ir(Gt,e),Yt!==null&&Ir(Yt,e),Xt!==null&&Ir(Xt,e),os.forEach(t),as.forEach(t),n=0;n<Ft.length;n++)r=Ft[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ft.length&&(n=Ft[0],n.blockedOn===null);)rh(n),n.blockedOn===null&&Ft.shift()}var cr=Dt.ReactCurrentBatchConfig,Ni=!0;function $p(e,t,n,r){var s=J,i=cr.transition;cr.transition=null;try{J=1,Ol(e,t,n,r)}finally{J=s,cr.transition=i}}function Up(e,t,n,r){var s=J,i=cr.transition;cr.transition=null;try{J=4,Ol(e,t,n,r)}finally{J=s,cr.transition=i}}function Ol(e,t,n,r){if(Ni){var s=Aa(e,t,n,r);if(s===null)Fo(e,t,r,_i,n),Vc(e,r);else if(Op(s,e,t,n,r))r.stopPropagation();else if(Vc(e,r),t&4&&-1<Dp.indexOf(e)){for(;s!==null;){var i=Ss(s);if(i!==null&&Zd(i),i=Aa(e,t,n,r),i===null&&Fo(e,t,r,_i,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fo(e,t,r,null,n)}}var _i=null;function Aa(e,t,n,r){if(_i=null,e=Al(r),e=yn(e),e!==null)if(t=Ln(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Hd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _i=e,null}function sh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kp()){case Rl:return 1;case Jd:return 4;case bi:case Sp:return 16;case Gd:return 536870912;default:return 16}default:return 16}}var Vt=null,Ll=null,li=null;function ih(){if(li)return li;var e,t=Ll,n=t.length,r,s="value"in Vt?Vt.value:Vt.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return li=s.slice(e,1<r?1-r:void 0)}function ci(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function Wc(){return!1}function Je(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qs:Wc,this.isPropagationStopped=Wc,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),t}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=Je(Sr),ks=ae({},Sr,{view:0,detail:0}),Mp=Je(ks),Ro,Io,Dr,Yi=ae({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dr&&(Dr&&e.type==="mousemove"?(Ro=e.screenX-Dr.screenX,Io=e.screenY-Dr.screenY):Io=Ro=0,Dr=e),Ro)},movementY:function(e){return"movementY"in e?e.movementY:Io}}),Kc=Je(Yi),zp=ae({},Yi,{dataTransfer:0}),Fp=Je(zp),Bp=ae({},ks,{relatedTarget:0}),Do=Je(Bp),qp=ae({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vp=Je(qp),Hp=ae({},Sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wp=Je(Hp),Kp=ae({},Sr,{data:0}),Qc=Je(Kp),Qp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gp[e])?!!t[e]:!1}function Ul(){return Yp}var Xp=ae({},ks,{key:function(e){if(e.key){var t=Qp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ci(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(e){return e.type==="keypress"?ci(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ci(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zp=Je(Xp),e0=ae({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jc=Je(e0),t0=ae({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),n0=Je(t0),r0=ae({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),s0=Je(r0),i0=ae({},Yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o0=Je(i0),a0=[9,13,27,32],Ml=Tt&&"CompositionEvent"in window,Wr=null;Tt&&"documentMode"in document&&(Wr=document.documentMode);var l0=Tt&&"TextEvent"in window&&!Wr,oh=Tt&&(!Ml||Wr&&8<Wr&&11>=Wr),Gc=" ",Yc=!1;function ah(e,t){switch(e){case"keyup":return a0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function c0(e,t){switch(e){case"compositionend":return lh(t);case"keypress":return t.which!==32?null:(Yc=!0,Gc);case"textInput":return e=t.data,e===Gc&&Yc?null:e;default:return null}}function u0(e,t){if(Gn)return e==="compositionend"||!Ml&&ah(e,t)?(e=ih(),li=Ll=Vt=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oh&&t.locale!=="ko"?null:t.data;default:return null}}var d0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!d0[e.type]:t==="textarea"}function ch(e,t,n,r){zd(r),t=ki(t,"onChange"),0<t.length&&(n=new $l("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,cs=null;function h0(e){wh(e,0)}function Xi(e){var t=Zn(e);if(Id(t))return e}function f0(e,t){if(e==="change")return t}var uh=!1;if(Tt){var Oo;if(Tt){var Lo="oninput"in document;if(!Lo){var Zc=document.createElement("div");Zc.setAttribute("oninput","return;"),Lo=typeof Zc.oninput=="function"}Oo=Lo}else Oo=!1;uh=Oo&&(!document.documentMode||9<document.documentMode)}function eu(){Kr&&(Kr.detachEvent("onpropertychange",dh),cs=Kr=null)}function dh(e){if(e.propertyName==="value"&&Xi(cs)){var t=[];ch(t,cs,e,Al(e)),Vd(h0,t)}}function m0(e,t,n){e==="focusin"?(eu(),Kr=t,cs=n,Kr.attachEvent("onpropertychange",dh)):e==="focusout"&&eu()}function p0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xi(cs)}function g0(e,t){if(e==="click")return Xi(t)}function x0(e,t){if(e==="input"||e==="change")return Xi(t)}function y0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:y0;function us(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fa.call(t,s)||!ft(e[s],t[s]))return!1}return!0}function tu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nu(e,t){var n=tu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tu(n)}}function hh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fh(){for(var e=window,t=yi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yi(e.document)}return t}function zl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function v0(e){var t=fh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hh(n.ownerDocument.documentElement,n)){if(r!==null&&zl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=nu(n,i);var a=nu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var w0=Tt&&"documentMode"in document&&11>=document.documentMode,Yn=null,Ra=null,Qr=null,Ia=!1;function ru(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ia||Yn==null||Yn!==yi(r)||(r=Yn,"selectionStart"in r&&zl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&us(Qr,r)||(Qr=r,r=ki(Ra,"onSelect"),0<r.length&&(t=new $l("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yn)))}function Vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},$o={},mh={};Tt&&(mh=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function Zi(e){if($o[e])return $o[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mh)return $o[e]=t[n];return e}var ph=Zi("animationend"),gh=Zi("animationiteration"),xh=Zi("animationstart"),yh=Zi("transitionend"),vh=new Map,su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function an(e,t){vh.set(e,t),On(t,[e])}for(var Uo=0;Uo<su.length;Uo++){var Mo=su[Uo],b0=Mo.toLowerCase(),j0=Mo[0].toUpperCase()+Mo.slice(1);an(b0,"on"+j0)}an(ph,"onAnimationEnd");an(gh,"onAnimationIteration");an(xh,"onAnimationStart");an("dblclick","onDoubleClick");an("focusin","onFocus");an("focusout","onBlur");an(yh,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function iu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,bp(r,t,void 0,e),e.currentTarget=null}function wh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;iu(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;iu(s,l,u),i=c}}}if(wi)throw e=Ea,wi=!1,Ea=null,e}function te(e,t){var n=t[Ua];n===void 0&&(n=t[Ua]=new Set);var r=e+"__bubble";n.has(r)||(bh(t,e,2,!1),n.add(r))}function zo(e,t,n){var r=0;t&&(r|=4),bh(n,e,r,t)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function ds(e){if(!e[Hs]){e[Hs]=!0,Ed.forEach(function(n){n!=="selectionchange"&&(N0.has(n)||zo(n,!1,e),zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hs]||(t[Hs]=!0,zo("selectionchange",!1,t))}}function bh(e,t,n,r){switch(sh(t)){case 1:var s=$p;break;case 4:s=Up;break;default:s=Ol}n=s.bind(null,t,n,e),s=void 0,!Ca||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Fo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=yn(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Vd(function(){var u=i,d=Al(n),m=[];e:{var x=vh.get(e);if(x!==void 0){var g=$l,v=e;switch(e){case"keypress":if(ci(n)===0)break e;case"keydown":case"keyup":g=Zp;break;case"focusin":v="focus",g=Do;break;case"focusout":v="blur",g=Do;break;case"beforeblur":case"afterblur":g=Do;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Fp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=n0;break;case ph:case gh:case xh:g=Vp;break;case yh:g=s0;break;case"scroll":g=Mp;break;case"wheel":g=o0;break;case"copy":case"cut":case"paste":g=Wp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Jc}var b=(t&4)!==0,w=!b&&e==="scroll",h=b?x!==null?x+"Capture":null:x;b=[];for(var p=u,f;p!==null;){f=p;var y=f.stateNode;if(f.tag===5&&y!==null&&(f=y,h!==null&&(y=is(p,h),y!=null&&b.push(hs(p,y,f)))),w)break;p=p.return}0<b.length&&(x=new g(x,v,null,n,d),m.push({event:x,listeners:b}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",x&&n!==ka&&(v=n.relatedTarget||n.fromElement)&&(yn(v)||v[At]))break e;if((g||x)&&(x=d.window===d?d:(x=d.ownerDocument)?x.defaultView||x.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?yn(v):null,v!==null&&(w=Ln(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(b=Kc,y="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(b=Jc,y="onPointerLeave",h="onPointerEnter",p="pointer"),w=g==null?x:Zn(g),f=v==null?x:Zn(v),x=new b(y,p+"leave",g,n,d),x.target=w,x.relatedTarget=f,y=null,yn(d)===u&&(b=new b(h,p+"enter",v,n,d),b.target=f,b.relatedTarget=w,y=b),w=y,g&&v)t:{for(b=g,h=v,p=0,f=b;f;f=zn(f))p++;for(f=0,y=h;y;y=zn(y))f++;for(;0<p-f;)b=zn(b),p--;for(;0<f-p;)h=zn(h),f--;for(;p--;){if(b===h||h!==null&&b===h.alternate)break t;b=zn(b),h=zn(h)}b=null}else b=null;g!==null&&ou(m,x,g,b,!1),v!==null&&w!==null&&ou(m,w,v,b,!0)}}e:{if(x=u?Zn(u):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var N=f0;else if(Xc(x))if(uh)N=x0;else{N=p0;var k=m0}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(N=g0);if(N&&(N=N(e,u))){ch(m,N,n,d);break e}k&&k(e,x,u),e==="focusout"&&(k=x._wrapperState)&&k.controlled&&x.type==="number"&&wa(x,"number",x.value)}switch(k=u?Zn(u):window,e){case"focusin":(Xc(k)||k.contentEditable==="true")&&(Yn=k,Ra=u,Qr=null);break;case"focusout":Qr=Ra=Yn=null;break;case"mousedown":Ia=!0;break;case"contextmenu":case"mouseup":case"dragend":Ia=!1,ru(m,n,d);break;case"selectionchange":if(w0)break;case"keydown":case"keyup":ru(m,n,d)}var _;if(Ml)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Gn?ah(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(oh&&n.locale!=="ko"&&(Gn||C!=="onCompositionStart"?C==="onCompositionEnd"&&Gn&&(_=ih()):(Vt=d,Ll="value"in Vt?Vt.value:Vt.textContent,Gn=!0)),k=ki(u,C),0<k.length&&(C=new Qc(C,e,null,n,d),m.push({event:C,listeners:k}),_?C.data=_:(_=lh(n),_!==null&&(C.data=_)))),(_=l0?c0(e,n):u0(e,n))&&(u=ki(u,"onBeforeInput"),0<u.length&&(d=new Qc("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=_))}wh(m,t)})}function hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ki(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=is(e,n),i!=null&&r.unshift(hs(e,i,s)),i=is(e,t),i!=null&&r.push(hs(e,i,s))),e=e.return}return r}function zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ou(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=is(n,i),c!=null&&a.unshift(hs(n,c,l))):s||(c=is(n,i),c!=null&&a.push(hs(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var _0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function au(e){return(typeof e=="string"?e:""+e).replace(_0,`
`).replace(k0,"")}function Ws(e,t,n){if(t=au(t),au(e)!==t&&n)throw Error(E(425))}function Si(){}var Da=null,Oa=null;function La(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $a=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,lu=typeof Promise=="function"?Promise:void 0,C0=typeof queueMicrotask=="function"?queueMicrotask:typeof lu<"u"?function(e){return lu.resolve(null).then(e).catch(E0)}:$a;function E0(e){setTimeout(function(){throw e})}function Bo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ls(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ls(t)}function Zt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Cr=Math.random().toString(36).slice(2),yt="__reactFiber$"+Cr,fs="__reactProps$"+Cr,At="__reactContainer$"+Cr,Ua="__reactEvents$"+Cr,P0="__reactListeners$"+Cr,T0="__reactHandles$"+Cr;function yn(e){var t=e[yt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[At]||n[yt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=cu(e);e!==null;){if(n=e[yt])return n;e=cu(e)}return t}e=n,n=e.parentNode}return null}function Ss(e){return e=e[yt]||e[At],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function eo(e){return e[fs]||null}var Ma=[],er=-1;function ln(e){return{current:e}}function ne(e){0>er||(e.current=Ma[er],Ma[er]=null,er--)}function Z(e,t){er++,Ma[er]=e.current,e.current=t}var on={},Pe=ln(on),Me=ln(!1),kn=on;function mr(e,t){var n=e.type.contextTypes;if(!n)return on;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ze(e){return e=e.childContextTypes,e!=null}function Ci(){ne(Me),ne(Pe)}function uu(e,t,n){if(Pe.current!==on)throw Error(E(168));Z(Pe,t),Z(Me,n)}function jh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(E(108,mp(e)||"Unknown",s));return ae({},n,r)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||on,kn=Pe.current,Z(Pe,e),Z(Me,Me.current),!0}function du(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=jh(e,t,kn),r.__reactInternalMemoizedMergedChildContext=e,ne(Me),ne(Pe),Z(Pe,e)):ne(Me),Z(Me,n)}var St=null,to=!1,qo=!1;function Nh(e){St===null?St=[e]:St.push(e)}function A0(e){to=!0,Nh(e)}function cn(){if(!qo&&St!==null){qo=!0;var e=0,t=J;try{var n=St;for(J=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}St=null,to=!1}catch(s){throw St!==null&&(St=St.slice(e+1)),Qd(Rl,cn),s}finally{J=t,qo=!1}}return null}var tr=[],nr=0,Pi=null,Ti=0,Ye=[],Xe=0,Sn=null,Ct=1,Et="";function mn(e,t){tr[nr++]=Ti,tr[nr++]=Pi,Pi=e,Ti=t}function _h(e,t,n){Ye[Xe++]=Ct,Ye[Xe++]=Et,Ye[Xe++]=Sn,Sn=e;var r=Ct;e=Et;var s=32-dt(r)-1;r&=~(1<<s),n+=1;var i=32-dt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ct=1<<32-dt(t)+s|n<<s|r,Et=i+e}else Ct=1<<i|n<<s|r,Et=e}function Fl(e){e.return!==null&&(mn(e,1),_h(e,1,0))}function Bl(e){for(;e===Pi;)Pi=tr[--nr],tr[nr]=null,Ti=tr[--nr],tr[nr]=null;for(;e===Sn;)Sn=Ye[--Xe],Ye[Xe]=null,Et=Ye[--Xe],Ye[Xe]=null,Ct=Ye[--Xe],Ye[Xe]=null}var Ve=null,qe=null,se=!1,ct=null;function kh(e,t){var n=Ze(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ve=e,qe=Zt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ve=e,qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sn!==null?{id:Ct,overflow:Et}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ze(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ve=e,qe=null,!0):!1;default:return!1}}function za(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fa(e){if(se){var t=qe;if(t){var n=t;if(!hu(e,t)){if(za(e))throw Error(E(418));t=Zt(n.nextSibling);var r=Ve;t&&hu(e,t)?kh(r,n):(e.flags=e.flags&-4097|2,se=!1,Ve=e)}}else{if(za(e))throw Error(E(418));e.flags=e.flags&-4097|2,se=!1,Ve=e}}}function fu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ve=e}function Ks(e){if(e!==Ve)return!1;if(!se)return fu(e),se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!La(e.type,e.memoizedProps)),t&&(t=qe)){if(za(e))throw Sh(),Error(E(418));for(;t;)kh(e,t),t=Zt(t.nextSibling)}if(fu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qe=Zt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qe=null}}else qe=Ve?Zt(e.stateNode.nextSibling):null;return!0}function Sh(){for(var e=qe;e;)e=Zt(e.nextSibling)}function pr(){qe=Ve=null,se=!1}function ql(e){ct===null?ct=[e]:ct.push(e)}var R0=Dt.ReactCurrentBatchConfig;function Or(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mu(e){var t=e._init;return t(e._payload)}function Ch(e){function t(h,p){if(e){var f=h.deletions;f===null?(h.deletions=[p],h.flags|=16):f.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function s(h,p){return h=rn(h,p),h.index=0,h.sibling=null,h}function i(h,p,f){return h.index=f,e?(f=h.alternate,f!==null?(f=f.index,f<p?(h.flags|=2,p):f):(h.flags|=2,p)):(h.flags|=1048576,p)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,p,f,y){return p===null||p.tag!==6?(p=Go(f,h.mode,y),p.return=h,p):(p=s(p,f),p.return=h,p)}function c(h,p,f,y){var N=f.type;return N===Jn?d(h,p,f.props.children,y,f.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ut&&mu(N)===p.type)?(y=s(p,f.props),y.ref=Or(h,p,f),y.return=h,y):(y=gi(f.type,f.key,f.props,null,h.mode,y),y.ref=Or(h,p,f),y.return=h,y)}function u(h,p,f,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=Yo(f,h.mode,y),p.return=h,p):(p=s(p,f.children||[]),p.return=h,p)}function d(h,p,f,y,N){return p===null||p.tag!==7?(p=jn(f,h.mode,y,N),p.return=h,p):(p=s(p,f),p.return=h,p)}function m(h,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Go(""+p,h.mode,f),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case $s:return f=gi(p.type,p.key,p.props,null,h.mode,f),f.ref=Or(h,null,p),f.return=h,f;case Qn:return p=Yo(p,h.mode,f),p.return=h,p;case Ut:var y=p._init;return m(h,y(p._payload),f)}if(zr(p)||Tr(p))return p=jn(p,h.mode,f,null),p.return=h,p;Qs(h,p)}return null}function x(h,p,f,y){var N=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return N!==null?null:l(h,p,""+f,y);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case $s:return f.key===N?c(h,p,f,y):null;case Qn:return f.key===N?u(h,p,f,y):null;case Ut:return N=f._init,x(h,p,N(f._payload),y)}if(zr(f)||Tr(f))return N!==null?null:d(h,p,f,y,null);Qs(h,f)}return null}function g(h,p,f,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return h=h.get(f)||null,l(p,h,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $s:return h=h.get(y.key===null?f:y.key)||null,c(p,h,y,N);case Qn:return h=h.get(y.key===null?f:y.key)||null,u(p,h,y,N);case Ut:var k=y._init;return g(h,p,f,k(y._payload),N)}if(zr(y)||Tr(y))return h=h.get(f)||null,d(p,h,y,N,null);Qs(p,y)}return null}function v(h,p,f,y){for(var N=null,k=null,_=p,C=p=0,O=null;_!==null&&C<f.length;C++){_.index>C?(O=_,_=null):O=_.sibling;var R=x(h,_,f[C],y);if(R===null){_===null&&(_=O);break}e&&_&&R.alternate===null&&t(h,_),p=i(R,p,C),k===null?N=R:k.sibling=R,k=R,_=O}if(C===f.length)return n(h,_),se&&mn(h,C),N;if(_===null){for(;C<f.length;C++)_=m(h,f[C],y),_!==null&&(p=i(_,p,C),k===null?N=_:k.sibling=_,k=_);return se&&mn(h,C),N}for(_=r(h,_);C<f.length;C++)O=g(_,h,C,f[C],y),O!==null&&(e&&O.alternate!==null&&_.delete(O.key===null?C:O.key),p=i(O,p,C),k===null?N=O:k.sibling=O,k=O);return e&&_.forEach(function(H){return t(h,H)}),se&&mn(h,C),N}function b(h,p,f,y){var N=Tr(f);if(typeof N!="function")throw Error(E(150));if(f=N.call(f),f==null)throw Error(E(151));for(var k=N=null,_=p,C=p=0,O=null,R=f.next();_!==null&&!R.done;C++,R=f.next()){_.index>C?(O=_,_=null):O=_.sibling;var H=x(h,_,R.value,y);if(H===null){_===null&&(_=O);break}e&&_&&H.alternate===null&&t(h,_),p=i(H,p,C),k===null?N=H:k.sibling=H,k=H,_=O}if(R.done)return n(h,_),se&&mn(h,C),N;if(_===null){for(;!R.done;C++,R=f.next())R=m(h,R.value,y),R!==null&&(p=i(R,p,C),k===null?N=R:k.sibling=R,k=R);return se&&mn(h,C),N}for(_=r(h,_);!R.done;C++,R=f.next())R=g(_,h,C,R.value,y),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?C:R.key),p=i(R,p,C),k===null?N=R:k.sibling=R,k=R);return e&&_.forEach(function(Y){return t(h,Y)}),se&&mn(h,C),N}function w(h,p,f,y){if(typeof f=="object"&&f!==null&&f.type===Jn&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case $s:e:{for(var N=f.key,k=p;k!==null;){if(k.key===N){if(N=f.type,N===Jn){if(k.tag===7){n(h,k.sibling),p=s(k,f.props.children),p.return=h,h=p;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ut&&mu(N)===k.type){n(h,k.sibling),p=s(k,f.props),p.ref=Or(h,k,f),p.return=h,h=p;break e}n(h,k);break}else t(h,k);k=k.sibling}f.type===Jn?(p=jn(f.props.children,h.mode,y,f.key),p.return=h,h=p):(y=gi(f.type,f.key,f.props,null,h.mode,y),y.ref=Or(h,p,f),y.return=h,h=y)}return a(h);case Qn:e:{for(k=f.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){n(h,p.sibling),p=s(p,f.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=Yo(f,h.mode,y),p.return=h,h=p}return a(h);case Ut:return k=f._init,w(h,p,k(f._payload),y)}if(zr(f))return v(h,p,f,y);if(Tr(f))return b(h,p,f,y);Qs(h,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(n(h,p.sibling),p=s(p,f),p.return=h,h=p):(n(h,p),p=Go(f,h.mode,y),p.return=h,h=p),a(h)):n(h,p)}return w}var gr=Ch(!0),Eh=Ch(!1),Ai=ln(null),Ri=null,rr=null,Vl=null;function Hl(){Vl=rr=Ri=null}function Wl(e){var t=Ai.current;ne(Ai),e._currentValue=t}function Ba(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ur(e,t){Ri=e,Vl=rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ue=!0),e.firstContext=null)}function nt(e){var t=e._currentValue;if(Vl!==e)if(e={context:e,memoizedValue:t,next:null},rr===null){if(Ri===null)throw Error(E(308));rr=e,Ri.dependencies={lanes:0,firstContext:e}}else rr=rr.next=e;return t}var vn=null;function Kl(e){vn===null?vn=[e]:vn.push(e)}function Ph(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Kl(t)):(n.next=s.next,s.next=n),t.interleaved=n,Rt(e,r)}function Rt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mt=!1;function Ql(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Th(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function en(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Rt(e,n)}return s=r.interleaved,s===null?(t.next=t,Kl(r)):(t.next=s.next,s.next=t),r.interleaved=t,Rt(e,n)}function ui(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Il(e,n)}}function pu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ii(e,t,n,r){var s=e.updateQueue;Mt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,d=u=c=null,l=i;do{var x=l.lane,g=l.eventTime;if((r&x)===x){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,b=l;switch(x=t,g=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){m=v.call(g,m,x);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,x=typeof v=="function"?v.call(g,m,x):v,x==null)break e;m=ae({},m,x);break e;case 2:Mt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[l]:x.push(l))}else g={eventTime:g,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=m):d=d.next=g,a|=x;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;x=l,l=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(d===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);En|=a,e.lanes=a,e.memoizedState=m}}function gu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var Cs={},bt=ln(Cs),ms=ln(Cs),ps=ln(Cs);function wn(e){if(e===Cs)throw Error(E(174));return e}function Jl(e,t){switch(Z(ps,t),Z(ms,e),Z(bt,Cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ja(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ja(t,e)}ne(bt),Z(bt,t)}function xr(){ne(bt),ne(ms),ne(ps)}function Ah(e){wn(ps.current);var t=wn(bt.current),n=ja(t,e.type);t!==n&&(Z(ms,e),Z(bt,n))}function Gl(e){ms.current===e&&(ne(bt),ne(ms))}var ie=ln(0);function Di(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vo=[];function Yl(){for(var e=0;e<Vo.length;e++)Vo[e]._workInProgressVersionPrimary=null;Vo.length=0}var di=Dt.ReactCurrentDispatcher,Ho=Dt.ReactCurrentBatchConfig,Cn=0,oe=null,fe=null,xe=null,Oi=!1,Jr=!1,gs=0,I0=0;function _e(){throw Error(E(321))}function Xl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ft(e[n],t[n]))return!1;return!0}function Zl(e,t,n,r,s,i){if(Cn=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,di.current=e===null||e.memoizedState===null?$0:U0,e=n(r,s),Jr){i=0;do{if(Jr=!1,gs=0,25<=i)throw Error(E(301));i+=1,xe=fe=null,t.updateQueue=null,di.current=M0,e=n(r,s)}while(Jr)}if(di.current=Li,t=fe!==null&&fe.next!==null,Cn=0,xe=fe=oe=null,Oi=!1,t)throw Error(E(300));return e}function ec(){var e=gs!==0;return gs=0,e}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?oe.memoizedState=xe=e:xe=xe.next=e,xe}function rt(){if(fe===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=fe.next;var t=xe===null?oe.memoizedState:xe.next;if(t!==null)xe=t,fe=e;else{if(e===null)throw Error(E(310));fe=e,e={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},xe===null?oe.memoizedState=xe=e:xe=xe.next=e}return xe}function xs(e,t){return typeof t=="function"?t(e):t}function Wo(e){var t=rt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Cn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,oe.lanes|=d,En|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,ft(r,t.memoizedState)||(Ue=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,oe.lanes|=i,En|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ko(e){var t=rt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);ft(i,t.memoizedState)||(Ue=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Rh(){}function Ih(e,t){var n=oe,r=rt(),s=t(),i=!ft(r.memoizedState,s);if(i&&(r.memoizedState=s,Ue=!0),r=r.queue,tc(Lh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,ys(9,Oh.bind(null,n,r,s,t),void 0,null),ye===null)throw Error(E(349));Cn&30||Dh(n,t,s)}return s}function Dh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Oh(e,t,n,r){t.value=n,t.getSnapshot=r,$h(t)&&Uh(e)}function Lh(e,t,n){return n(function(){$h(t)&&Uh(e)})}function $h(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ft(e,n)}catch{return!0}}function Uh(e){var t=Rt(e,1);t!==null&&ht(t,e,1,-1)}function xu(e){var t=xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=L0.bind(null,oe,e),[t.memoizedState,e]}function ys(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Mh(){return rt().memoizedState}function hi(e,t,n,r){var s=xt();oe.flags|=e,s.memoizedState=ys(1|t,n,void 0,r===void 0?null:r)}function no(e,t,n,r){var s=rt();r=r===void 0?null:r;var i=void 0;if(fe!==null){var a=fe.memoizedState;if(i=a.destroy,r!==null&&Xl(r,a.deps)){s.memoizedState=ys(t,n,i,r);return}}oe.flags|=e,s.memoizedState=ys(1|t,n,i,r)}function yu(e,t){return hi(8390656,8,e,t)}function tc(e,t){return no(2048,8,e,t)}function zh(e,t){return no(4,2,e,t)}function Fh(e,t){return no(4,4,e,t)}function Bh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qh(e,t,n){return n=n!=null?n.concat([e]):null,no(4,4,Bh.bind(null,t,e),n)}function nc(){}function Vh(e,t){var n=rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hh(e,t){var n=rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wh(e,t,n){return Cn&21?(ft(n,t)||(n=Yd(),oe.lanes|=n,En|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ue=!0),e.memoizedState=n)}function D0(e,t){var n=J;J=n!==0&&4>n?n:4,e(!0);var r=Ho.transition;Ho.transition={};try{e(!1),t()}finally{J=n,Ho.transition=r}}function Kh(){return rt().memoizedState}function O0(e,t,n){var r=nn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qh(e))Jh(t,n);else if(n=Ph(e,t,n,r),n!==null){var s=Ae();ht(n,e,r,s),Gh(n,t,r)}}function L0(e,t,n){var r=nn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qh(e))Jh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,ft(l,a)){var c=t.interleaved;c===null?(s.next=s,Kl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Ph(e,t,s,r),n!==null&&(s=Ae(),ht(n,e,r,s),Gh(n,t,r))}}function Qh(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function Jh(e,t){Jr=Oi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Il(e,n)}}var Li={readContext:nt,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},$0={readContext:nt,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:nt,useEffect:yu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hi(4194308,4,Bh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hi(4194308,4,e,t)},useInsertionEffect:function(e,t){return hi(4,2,e,t)},useMemo:function(e,t){var n=xt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=O0.bind(null,oe,e),[r.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:xu,useDebugValue:nc,useDeferredValue:function(e){return xt().memoizedState=e},useTransition:function(){var e=xu(!1),t=e[0];return e=D0.bind(null,e[1]),xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oe,s=xt();if(se){if(n===void 0)throw Error(E(407));n=n()}else{if(n=t(),ye===null)throw Error(E(349));Cn&30||Dh(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,yu(Lh.bind(null,r,i,e),[e]),r.flags|=2048,ys(9,Oh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=xt(),t=ye.identifierPrefix;if(se){var n=Et,r=Ct;n=(r&~(1<<32-dt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=I0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U0={readContext:nt,useCallback:Vh,useContext:nt,useEffect:tc,useImperativeHandle:qh,useInsertionEffect:zh,useLayoutEffect:Fh,useMemo:Hh,useReducer:Wo,useRef:Mh,useState:function(){return Wo(xs)},useDebugValue:nc,useDeferredValue:function(e){var t=rt();return Wh(t,fe.memoizedState,e)},useTransition:function(){var e=Wo(xs)[0],t=rt().memoizedState;return[e,t]},useMutableSource:Rh,useSyncExternalStore:Ih,useId:Kh,unstable_isNewReconciler:!1},M0={readContext:nt,useCallback:Vh,useContext:nt,useEffect:tc,useImperativeHandle:qh,useInsertionEffect:zh,useLayoutEffect:Fh,useMemo:Hh,useReducer:Ko,useRef:Mh,useState:function(){return Ko(xs)},useDebugValue:nc,useDeferredValue:function(e){var t=rt();return fe===null?t.memoizedState=e:Wh(t,fe.memoizedState,e)},useTransition:function(){var e=Ko(xs)[0],t=rt().memoizedState;return[e,t]},useMutableSource:Rh,useSyncExternalStore:Ih,useId:Kh,unstable_isNewReconciler:!1};function ot(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return(e=e._reactInternals)?Ln(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ae(),s=nn(e),i=Pt(r,s);i.payload=t,n!=null&&(i.callback=n),t=en(e,i,s),t!==null&&(ht(t,e,s,r),ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ae(),s=nn(e),i=Pt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=en(e,i,s),t!==null&&(ht(t,e,s,r),ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ae(),r=nn(e),s=Pt(n,r);s.tag=2,t!=null&&(s.callback=t),t=en(e,s,r),t!==null&&(ht(t,e,r,n),ui(t,e,r))}};function vu(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!us(n,r)||!us(s,i):!0}function Yh(e,t,n){var r=!1,s=on,i=t.contextType;return typeof i=="object"&&i!==null?i=nt(i):(s=ze(t)?kn:Pe.current,r=t.contextTypes,i=(r=r!=null)?mr(e,s):on),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function wu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function Va(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ql(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=nt(i):(i=ze(t)?kn:Pe.current,s.context=mr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(qa(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Ii(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=fp(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var z0=typeof WeakMap=="function"?WeakMap:Map;function Xh(e,t,n){n=Pt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ui||(Ui=!0,tl=r),Ha(e,t)},n}function Zh(e,t,n){n=Pt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ha(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ha(e,t),typeof r!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function bu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new z0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=eg.bind(null,e,t,n),t.then(e,e))}function ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pt(-1,1),t.tag=2,en(n,t,1))),n.lanes|=1),e)}var F0=Dt.ReactCurrentOwner,Ue=!1;function Te(e,t,n,r){t.child=e===null?Eh(t,null,n,r):gr(t,e.child,n,r)}function _u(e,t,n,r,s){n=n.render;var i=t.ref;return ur(t,s),r=Zl(e,t,n,r,i,s),n=ec(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,It(e,t,s)):(se&&n&&Fl(t),t.flags|=1,Te(e,t,r,s),t.child)}function ku(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!uc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ef(e,t,i,r,s)):(e=gi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:us,n(a,r)&&e.ref===t.ref)return It(e,t,s)}return t.flags|=1,e=rn(i,r),e.ref=t.ref,e.return=t,t.child=e}function ef(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(us(i,r)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ue=!0);else return t.lanes=e.lanes,It(e,t,s)}return Wa(e,t,n,r,s)}function tf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(ir,Be),Be|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Z(ir,Be),Be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Z(ir,Be),Be|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Z(ir,Be),Be|=r;return Te(e,t,s,n),t.child}function nf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wa(e,t,n,r,s){var i=ze(n)?kn:Pe.current;return i=mr(t,i),ur(t,s),n=Zl(e,t,n,r,i,s),r=ec(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,It(e,t,s)):(se&&r&&Fl(t),t.flags|=1,Te(e,t,n,s),t.child)}function Su(e,t,n,r,s){if(ze(n)){var i=!0;Ei(t)}else i=!1;if(ur(t,s),t.stateNode===null)fi(e,t),Yh(t,n,r),Va(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=nt(u):(u=ze(n)?kn:Pe.current,u=mr(t,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&wu(t,a,r,u),Mt=!1;var x=t.memoizedState;a.state=x,Ii(t,r,a,s),c=t.memoizedState,l!==r||x!==c||Me.current||Mt?(typeof d=="function"&&(qa(t,n,d,r),c=t.memoizedState),(l=Mt||vu(t,n,l,r,x,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Th(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ot(t.type,l),a.props=u,m=t.pendingProps,x=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=nt(c):(c=ze(n)?kn:Pe.current,c=mr(t,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||x!==c)&&wu(t,a,r,c),Mt=!1,x=t.memoizedState,a.state=x,Ii(t,r,a,s);var v=t.memoizedState;l!==m||x!==v||Me.current||Mt?(typeof g=="function"&&(qa(t,n,g,r),v=t.memoizedState),(u=Mt||vu(t,n,u,r,x,v,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return Ka(e,t,n,r,i,s)}function Ka(e,t,n,r,s,i){nf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&du(t,n,!1),It(e,t,i);r=t.stateNode,F0.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=gr(t,e.child,null,i),t.child=gr(t,null,l,i)):Te(e,t,l,i),t.memoizedState=r.state,s&&du(t,n,!0),t.child}function rf(e){var t=e.stateNode;t.pendingContext?uu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uu(e,t.context,!1),Jl(e,t.containerInfo)}function Cu(e,t,n,r,s){return pr(),ql(s),t.flags|=256,Te(e,t,n,r),t.child}var Qa={dehydrated:null,treeContext:null,retryLane:0};function Ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function sf(e,t,n){var r=t.pendingProps,s=ie.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Z(ie,s&1),e===null)return Fa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=oo(a,r,0,null),e=jn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ja(n),t.memoizedState=Qa,e):rc(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return B0(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=rn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=rn(l,i):(i=jn(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Ja(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Qa,r}return i=e.child,e=i.sibling,r=rn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rc(e,t){return t=oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,r){return r!==null&&ql(r),gr(t,e.child,null,n),e=rc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B0(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Qo(Error(E(422))),Js(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=oo({mode:"visible",children:r.children},s,0,null),i=jn(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&gr(t,e.child,null,a),t.child.memoizedState=Ja(a),t.memoizedState=Qa,i);if(!(t.mode&1))return Js(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(E(419)),r=Qo(i,r,void 0),Js(e,t,a,r)}if(l=(a&e.childLanes)!==0,Ue||l){if(r=ye,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rt(e,s),ht(r,e,s,-1))}return cc(),r=Qo(Error(E(421))),Js(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=tg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,qe=Zt(s.nextSibling),Ve=t,se=!0,ct=null,e!==null&&(Ye[Xe++]=Ct,Ye[Xe++]=Et,Ye[Xe++]=Sn,Ct=e.id,Et=e.overflow,Sn=t),t=rc(t,r.children),t.flags|=4096,t)}function Eu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ba(e.return,t,n)}function Jo(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function of(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Te(e,t,r.children,n),r=ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eu(e,n,t);else if(e.tag===19)Eu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Z(ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Di(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Jo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Di(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Jo(t,!0,n,null,i);break;case"together":Jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function It(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),En|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,n=rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function q0(e,t,n){switch(t.tag){case 3:rf(t),pr();break;case 5:Ah(t);break;case 1:ze(t.type)&&Ei(t);break;case 4:Jl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Z(Ai,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Z(ie,ie.current&1),t.flags|=128,null):n&t.child.childLanes?sf(e,t,n):(Z(ie,ie.current&1),e=It(e,t,n),e!==null?e.sibling:null);Z(ie,ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return of(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Z(ie,ie.current),r)break;return null;case 22:case 23:return t.lanes=0,tf(e,t,n)}return It(e,t,n)}var af,Ga,lf,cf;af=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ga=function(){};lf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,wn(bt.current);var i=null;switch(n){case"input":s=ya(e,s),r=ya(e,r),i=[];break;case"select":s=ae({},s,{value:void 0}),r=ae({},r,{value:void 0}),i=[];break;case"textarea":s=ba(e,s),r=ba(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Si)}Na(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&te("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};cf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Lr(e,t){if(!se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function V0(e,t,n){var r=t.pendingProps;switch(Bl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(t),null;case 1:return ze(t.type)&&Ci(),ke(t),null;case 3:return r=t.stateNode,xr(),ne(Me),ne(Pe),Yl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ct!==null&&(sl(ct),ct=null))),Ga(e,t),ke(t),null;case 5:Gl(t);var s=wn(ps.current);if(n=t.type,e!==null&&t.stateNode!=null)lf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(E(166));return ke(t),null}if(e=wn(bt.current),Ks(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[yt]=t,r[fs]=i,e=(t.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(s=0;s<Br.length;s++)te(Br[s],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":$c(r,i),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},te("invalid",r);break;case"textarea":Mc(r,i),te("invalid",r)}Na(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ws(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ws(r.textContent,l,e),s=["children",""+l]):rs.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&te("scroll",r)}switch(n){case"input":Us(r),Uc(r,i,!0);break;case"textarea":Us(r),zc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Si)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ld(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[yt]=t,e[fs]=r,af(e,t,!1,!1),t.stateNode=e;e:{switch(a=_a(n,r),n){case"dialog":te("cancel",e),te("close",e),s=r;break;case"iframe":case"object":case"embed":te("load",e),s=r;break;case"video":case"audio":for(s=0;s<Br.length;s++)te(Br[s],e);s=r;break;case"source":te("error",e),s=r;break;case"img":case"image":case"link":te("error",e),te("load",e),s=r;break;case"details":te("toggle",e),s=r;break;case"input":$c(e,r),s=ya(e,r),te("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ae({},r,{value:void 0}),te("invalid",e);break;case"textarea":Mc(e,r),s=ba(e,r),te("invalid",e);break;default:s=r}Na(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Md(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$d(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ss(e,c):typeof c=="number"&&ss(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&te("scroll",e):c!=null&&Cl(e,i,c,a))}switch(n){case"input":Us(e),Uc(e,r,!1);break;case"textarea":Us(e),zc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?or(e,!!r.multiple,i,!1):r.defaultValue!=null&&or(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Si)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ke(t),null;case 6:if(e&&t.stateNode!=null)cf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(E(166));if(n=wn(ps.current),wn(bt.current),Ks(t)){if(r=t.stateNode,n=t.memoizedProps,r[yt]=t,(i=r.nodeValue!==n)&&(e=Ve,e!==null))switch(e.tag){case 3:Ws(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ws(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yt]=t,t.stateNode=r}return ke(t),null;case 13:if(ne(ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(se&&qe!==null&&t.mode&1&&!(t.flags&128))Sh(),pr(),t.flags|=98560,i=!1;else if(i=Ks(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[yt]=t}else pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ke(t),i=!1}else ct!==null&&(sl(ct),ct=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?me===0&&(me=3):cc())),t.updateQueue!==null&&(t.flags|=4),ke(t),null);case 4:return xr(),Ga(e,t),e===null&&ds(t.stateNode.containerInfo),ke(t),null;case 10:return Wl(t.type._context),ke(t),null;case 17:return ze(t.type)&&Ci(),ke(t),null;case 19:if(ne(ie),i=t.memoizedState,i===null)return ke(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Lr(i,!1);else{if(me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Di(e),a!==null){for(t.flags|=128,Lr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Z(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&ce()>vr&&(t.flags|=128,r=!0,Lr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Di(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!se)return ke(t),null}else 2*ce()-i.renderingStartTime>vr&&n!==1073741824&&(t.flags|=128,r=!0,Lr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ce(),t.sibling=null,n=ie.current,Z(ie,r?n&1|2:n&1),t):(ke(t),null);case 22:case 23:return lc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Be&1073741824&&(ke(t),t.subtreeFlags&6&&(t.flags|=8192)):ke(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function H0(e,t){switch(Bl(t),t.tag){case 1:return ze(t.type)&&Ci(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xr(),ne(Me),ne(Pe),Yl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gl(t),null;case 13:if(ne(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(ie),null;case 4:return xr(),null;case 10:return Wl(t.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var Gs=!1,Ce=!1,W0=typeof WeakSet=="function"?WeakSet:Set,I=null;function sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){le(e,t,r)}else n.current=null}function Ya(e,t,n){try{n()}catch(r){le(e,t,r)}}var Pu=!1;function K0(e,t){if(Da=Ni,e=fh(),zl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,m=e,x=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)x=m,m=g;for(;;){if(m===e)break t;if(x===n&&++u===s&&(l=a),x===i&&++d===r&&(c=a),(g=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oa={focusedElem:e,selectionRange:n},Ni=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,w=v.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?b:ot(t.type,b),w);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(y){le(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return v=Pu,Pu=!1,v}function Gr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ya(t,n,i)}s=s.next}while(s!==r)}}function so(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uf(e){var t=e.alternate;t!==null&&(e.alternate=null,uf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yt],delete t[fs],delete t[Ua],delete t[P0],delete t[T0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function df(e){return e.tag===5||e.tag===3||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||df(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Za(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Si));else if(r!==4&&(e=e.child,e!==null))for(Za(e,t,n),e=e.sibling;e!==null;)Za(e,t,n),e=e.sibling}function el(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(el(e,t,n),e=e.sibling;e!==null;)el(e,t,n),e=e.sibling}var be=null,at=!1;function Ot(e,t,n){for(n=n.child;n!==null;)hf(e,t,n),n=n.sibling}function hf(e,t,n){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Gi,n)}catch{}switch(n.tag){case 5:Ce||sr(n,t);case 6:var r=be,s=at;be=null,Ot(e,t,n),be=r,at=s,be!==null&&(at?(e=be,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(at?(e=be,n=n.stateNode,e.nodeType===8?Bo(e.parentNode,n):e.nodeType===1&&Bo(e,n),ls(e)):Bo(be,n.stateNode));break;case 4:r=be,s=at,be=n.stateNode.containerInfo,at=!0,Ot(e,t,n),be=r,at=s;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ya(n,t,a),s=s.next}while(s!==r)}Ot(e,t,n);break;case 1:if(!Ce&&(sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){le(n,t,l)}Ot(e,t,n);break;case 21:Ot(e,t,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,Ot(e,t,n),Ce=r):Ot(e,t,n);break;default:Ot(e,t,n)}}function Au(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new W0),t.forEach(function(r){var s=ng.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function st(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:be=l.stateNode,at=!1;break e;case 3:be=l.stateNode.containerInfo,at=!0;break e;case 4:be=l.stateNode.containerInfo,at=!0;break e}l=l.return}if(be===null)throw Error(E(160));hf(i,a,s),be=null,at=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){le(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ff(t,e),t=t.sibling}function ff(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(st(t,e),gt(e),r&4){try{Gr(3,e,e.return),so(3,e)}catch(b){le(e,e.return,b)}try{Gr(5,e,e.return)}catch(b){le(e,e.return,b)}}break;case 1:st(t,e),gt(e),r&512&&n!==null&&sr(n,n.return);break;case 5:if(st(t,e),gt(e),r&512&&n!==null&&sr(n,n.return),e.flags&32){var s=e.stateNode;try{ss(s,"")}catch(b){le(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dd(s,i),_a(l,a);var u=_a(l,i);for(a=0;a<c.length;a+=2){var d=c[a],m=c[a+1];d==="style"?Md(s,m):d==="dangerouslySetInnerHTML"?$d(s,m):d==="children"?ss(s,m):Cl(s,d,m,u)}switch(l){case"input":va(s,i);break;case"textarea":Od(s,i);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?or(s,!!i.multiple,g,!1):x!==!!i.multiple&&(i.defaultValue!=null?or(s,!!i.multiple,i.defaultValue,!0):or(s,!!i.multiple,i.multiple?[]:"",!1))}s[fs]=i}catch(b){le(e,e.return,b)}}break;case 6:if(st(t,e),gt(e),r&4){if(e.stateNode===null)throw Error(E(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){le(e,e.return,b)}}break;case 3:if(st(t,e),gt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ls(t.containerInfo)}catch(b){le(e,e.return,b)}break;case 4:st(t,e),gt(e);break;case 13:st(t,e),gt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(oc=ce())),r&4&&Au(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ce=(u=Ce)||d,st(t,e),Ce=u):st(t,e),gt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(I=e,d=e.child;d!==null;){for(m=I=d;I!==null;){switch(x=I,g=x.child,x.tag){case 0:case 11:case 14:case 15:Gr(4,x,x.return);break;case 1:sr(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){le(r,n,b)}}break;case 5:sr(x,x.return);break;case 22:if(x.memoizedState!==null){Iu(m);continue}}g!==null?(g.return=x,I=g):Iu(m)}d=d.sibling}e:for(d=null,m=e;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ud("display",a))}catch(b){le(e,e.return,b)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(b){le(e,e.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:st(t,e),gt(e),r&4&&Au(e);break;case 21:break;default:st(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(df(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ss(s,""),r.flags&=-33);var i=Tu(e);el(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Tu(e);Za(e,l,a);break;default:throw Error(E(161))}}catch(c){le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Q0(e,t,n){I=e,mf(e)}function mf(e,t,n){for(var r=(e.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Gs;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ce;l=Gs;var u=Ce;if(Gs=a,(Ce=c)&&!u)for(I=s;I!==null;)a=I,c=a.child,a.tag===22&&a.memoizedState!==null?Du(s):c!==null?(c.return=a,I=c):Du(s);for(;i!==null;)I=i,mf(i),i=i.sibling;I=s,Gs=l,Ce=u}Ru(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):Ru(e)}}function Ru(e){for(;I!==null;){var t=I;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ce||so(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ot(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gu(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gu(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&ls(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ce||t.flags&512&&Xa(t)}catch(x){le(t,t.return,x)}}if(t===e){I=null;break}if(n=t.sibling,n!==null){n.return=t.return,I=n;break}I=t.return}}function Iu(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var n=t.sibling;if(n!==null){n.return=t.return,I=n;break}I=t.return}}function Du(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{so(4,t)}catch(c){le(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){le(t,s,c)}}var i=t.return;try{Xa(t)}catch(c){le(t,i,c)}break;case 5:var a=t.return;try{Xa(t)}catch(c){le(t,a,c)}}}catch(c){le(t,t.return,c)}if(t===e){I=null;break}var l=t.sibling;if(l!==null){l.return=t.return,I=l;break}I=t.return}}var J0=Math.ceil,$i=Dt.ReactCurrentDispatcher,sc=Dt.ReactCurrentOwner,et=Dt.ReactCurrentBatchConfig,V=0,ye=null,ue=null,je=0,Be=0,ir=ln(0),me=0,vs=null,En=0,io=0,ic=0,Yr=null,Le=null,oc=0,vr=1/0,_t=null,Ui=!1,tl=null,tn=null,Ys=!1,Ht=null,Mi=0,Xr=0,nl=null,mi=-1,pi=0;function Ae(){return V&6?ce():mi!==-1?mi:mi=ce()}function nn(e){return e.mode&1?V&2&&je!==0?je&-je:R0.transition!==null?(pi===0&&(pi=Yd()),pi):(e=J,e!==0||(e=window.event,e=e===void 0?16:sh(e.type)),e):1}function ht(e,t,n,r){if(50<Xr)throw Xr=0,nl=null,Error(E(185));_s(e,n,r),(!(V&2)||e!==ye)&&(e===ye&&(!(V&2)&&(io|=n),me===4&&Bt(e,je)),Fe(e,r),n===1&&V===0&&!(t.mode&1)&&(vr=ce()+500,to&&cn()))}function Fe(e,t){var n=e.callbackNode;Rp(e,t);var r=ji(e,e===ye?je:0);if(r===0)n!==null&&qc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&qc(n),t===1)e.tag===0?A0(Ou.bind(null,e)):Nh(Ou.bind(null,e)),C0(function(){!(V&6)&&cn()}),n=null;else{switch(Xd(r)){case 1:n=Rl;break;case 4:n=Jd;break;case 16:n=bi;break;case 536870912:n=Gd;break;default:n=bi}n=jf(n,pf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function pf(e,t){if(mi=-1,pi=0,V&6)throw Error(E(327));var n=e.callbackNode;if(dr()&&e.callbackNode!==n)return null;var r=ji(e,e===ye?je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zi(e,r);else{t=r;var s=V;V|=2;var i=xf();(ye!==e||je!==t)&&(_t=null,vr=ce()+500,bn(e,t));do try{X0();break}catch(l){gf(e,l)}while(!0);Hl(),$i.current=i,V=s,ue!==null?t=0:(ye=null,je=0,t=me)}if(t!==0){if(t===2&&(s=Pa(e),s!==0&&(r=s,t=rl(e,s))),t===1)throw n=vs,bn(e,0),Bt(e,r),Fe(e,ce()),n;if(t===6)Bt(e,r);else{if(s=e.current.alternate,!(r&30)&&!G0(s)&&(t=zi(e,r),t===2&&(i=Pa(e),i!==0&&(r=i,t=rl(e,i))),t===1))throw n=vs,bn(e,0),Bt(e,r),Fe(e,ce()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(E(345));case 2:pn(e,Le,_t);break;case 3:if(Bt(e,r),(r&130023424)===r&&(t=oc+500-ce(),10<t)){if(ji(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ae(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$a(pn.bind(null,e,Le,_t),t);break}pn(e,Le,_t);break;case 4:if(Bt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-dt(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*J0(r/1960))-r,10<r){e.timeoutHandle=$a(pn.bind(null,e,Le,_t),r);break}pn(e,Le,_t);break;case 5:pn(e,Le,_t);break;default:throw Error(E(329))}}}return Fe(e,ce()),e.callbackNode===n?pf.bind(null,e):null}function rl(e,t){var n=Yr;return e.current.memoizedState.isDehydrated&&(bn(e,t).flags|=256),e=zi(e,t),e!==2&&(t=Le,Le=n,t!==null&&sl(t)),e}function sl(e){Le===null?Le=e:Le.push.apply(Le,e)}function G0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ft(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bt(e,t){for(t&=~ic,t&=~io,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dt(t),r=1<<n;e[n]=-1,t&=~r}}function Ou(e){if(V&6)throw Error(E(327));dr();var t=ji(e,0);if(!(t&1))return Fe(e,ce()),null;var n=zi(e,t);if(e.tag!==0&&n===2){var r=Pa(e);r!==0&&(t=r,n=rl(e,r))}if(n===1)throw n=vs,bn(e,0),Bt(e,t),Fe(e,ce()),n;if(n===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pn(e,Le,_t),Fe(e,ce()),null}function ac(e,t){var n=V;V|=1;try{return e(t)}finally{V=n,V===0&&(vr=ce()+500,to&&cn())}}function Pn(e){Ht!==null&&Ht.tag===0&&!(V&6)&&dr();var t=V;V|=1;var n=et.transition,r=J;try{if(et.transition=null,J=1,e)return e()}finally{J=r,et.transition=n,V=t,!(V&6)&&cn()}}function lc(){Be=ir.current,ne(ir)}function bn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,S0(n)),ue!==null)for(n=ue.return;n!==null;){var r=n;switch(Bl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ci();break;case 3:xr(),ne(Me),ne(Pe),Yl();break;case 5:Gl(r);break;case 4:xr();break;case 13:ne(ie);break;case 19:ne(ie);break;case 10:Wl(r.type._context);break;case 22:case 23:lc()}n=n.return}if(ye=e,ue=e=rn(e.current,null),je=Be=t,me=0,vs=null,ic=io=En=0,Le=Yr=null,vn!==null){for(t=0;t<vn.length;t++)if(n=vn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}vn=null}return e}function gf(e,t){do{var n=ue;try{if(Hl(),di.current=Li,Oi){for(var r=oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oi=!1}if(Cn=0,xe=fe=oe=null,Jr=!1,gs=0,sc.current=null,n===null||n.return===null){me=1,vs=t,ue=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=je,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var x=d.alternate;x?(d.updateQueue=x.updateQueue,d.memoizedState=x.memoizedState,d.lanes=x.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=ju(a);if(g!==null){g.flags&=-257,Nu(g,a,l,i,t),g.mode&1&&bu(i,u,t),t=g,c=u;var v=t.updateQueue;if(v===null){var b=new Set;b.add(c),t.updateQueue=b}else v.add(c);break e}else{if(!(t&1)){bu(i,u,t),cc();break e}c=Error(E(426))}}else if(se&&l.mode&1){var w=ju(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Nu(w,a,l,i,t),ql(yr(c,l));break e}}i=c=yr(c,l),me!==4&&(me=2),Yr===null?Yr=[i]:Yr.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=Xh(i,c,t);pu(i,h);break e;case 1:l=c;var p=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(tn===null||!tn.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=Zh(i,l,t);pu(i,y);break e}}i=i.return}while(i!==null)}vf(n)}catch(N){t=N,ue===n&&n!==null&&(ue=n=n.return);continue}break}while(!0)}function xf(){var e=$i.current;return $i.current=Li,e===null?Li:e}function cc(){(me===0||me===3||me===2)&&(me=4),ye===null||!(En&268435455)&&!(io&268435455)||Bt(ye,je)}function zi(e,t){var n=V;V|=2;var r=xf();(ye!==e||je!==t)&&(_t=null,bn(e,t));do try{Y0();break}catch(s){gf(e,s)}while(!0);if(Hl(),V=n,$i.current=r,ue!==null)throw Error(E(261));return ye=null,je=0,me}function Y0(){for(;ue!==null;)yf(ue)}function X0(){for(;ue!==null&&!Np();)yf(ue)}function yf(e){var t=bf(e.alternate,e,Be);e.memoizedProps=e.pendingProps,t===null?vf(e):ue=t,sc.current=null}function vf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=H0(n,t),n!==null){n.flags&=32767,ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{me=6,ue=null;return}}else if(n=V0(n,t,Be),n!==null){ue=n;return}if(t=t.sibling,t!==null){ue=t;return}ue=t=e}while(t!==null);me===0&&(me=5)}function pn(e,t,n){var r=J,s=et.transition;try{et.transition=null,J=1,Z0(e,t,n,r)}finally{et.transition=s,J=r}return null}function Z0(e,t,n,r){do dr();while(Ht!==null);if(V&6)throw Error(E(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ip(e,i),e===ye&&(ue=ye=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ys||(Ys=!0,jf(bi,function(){return dr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=et.transition,et.transition=null;var a=J;J=1;var l=V;V|=4,sc.current=null,K0(e,n),ff(n,e),v0(Oa),Ni=!!Da,Oa=Da=null,e.current=n,Q0(n),_p(),V=l,J=a,et.transition=i}else e.current=n;if(Ys&&(Ys=!1,Ht=e,Mi=s),i=e.pendingLanes,i===0&&(tn=null),Cp(n.stateNode),Fe(e,ce()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ui)throw Ui=!1,e=tl,tl=null,e;return Mi&1&&e.tag!==0&&dr(),i=e.pendingLanes,i&1?e===nl?Xr++:(Xr=0,nl=e):Xr=0,cn(),null}function dr(){if(Ht!==null){var e=Xd(Mi),t=et.transition,n=J;try{if(et.transition=null,J=16>e?16:e,Ht===null)var r=!1;else{if(e=Ht,Ht=null,Mi=0,V&6)throw Error(E(331));var s=V;for(V|=4,I=e.current;I!==null;){var i=I,a=i.child;if(I.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:Gr(8,d,i)}var m=d.child;if(m!==null)m.return=d,I=m;else for(;I!==null;){d=I;var x=d.sibling,g=d.return;if(uf(d),d===u){I=null;break}if(x!==null){x.return=g,I=x;break}I=g}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}I=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,I=a;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gr(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,I=h;break e}I=i.return}}var p=e.current;for(I=p;I!==null;){a=I;var f=a.child;if(a.subtreeFlags&2064&&f!==null)f.return=a,I=f;else e:for(a=p;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:so(9,l)}}catch(N){le(l,l.return,N)}if(l===a){I=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,I=y;break e}I=l.return}}if(V=s,cn(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Gi,e)}catch{}r=!0}return r}finally{J=n,et.transition=t}}return!1}function Lu(e,t,n){t=yr(n,t),t=Xh(e,t,1),e=en(e,t,1),t=Ae(),e!==null&&(_s(e,1,t),Fe(e,t))}function le(e,t,n){if(e.tag===3)Lu(e,e,n);else for(;t!==null;){if(t.tag===3){Lu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tn===null||!tn.has(r))){e=yr(n,e),e=Zh(t,e,1),t=en(t,e,1),e=Ae(),t!==null&&(_s(t,1,e),Fe(t,e));break}}t=t.return}}function eg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ae(),e.pingedLanes|=e.suspendedLanes&n,ye===e&&(je&n)===n&&(me===4||me===3&&(je&130023424)===je&&500>ce()-oc?bn(e,0):ic|=n),Fe(e,t)}function wf(e,t){t===0&&(e.mode&1?(t=Fs,Fs<<=1,!(Fs&130023424)&&(Fs=4194304)):t=1);var n=Ae();e=Rt(e,t),e!==null&&(_s(e,t,n),Fe(e,n))}function tg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wf(e,n)}function ng(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(t),wf(e,n)}var bf;bf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Me.current)Ue=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ue=!1,q0(e,t,n);Ue=!!(e.flags&131072)}else Ue=!1,se&&t.flags&1048576&&_h(t,Ti,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;fi(e,t),e=t.pendingProps;var s=mr(t,Pe.current);ur(t,n),s=Zl(null,t,r,e,s,n);var i=ec();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ze(r)?(i=!0,Ei(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ql(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,Va(t,r,e,n),t=Ka(null,t,r,!0,i,n)):(t.tag=0,se&&i&&Fl(t),Te(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(fi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=sg(r),e=ot(r,e),s){case 0:t=Wa(null,t,r,e,n);break e;case 1:t=Su(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=ku(null,t,r,ot(r.type,e),n);break e}throw Error(E(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ot(r,s),Wa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ot(r,s),Su(e,t,r,s,n);case 3:e:{if(rf(t),e===null)throw Error(E(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Th(e,t),Ii(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=yr(Error(E(423)),t),t=Cu(e,t,r,n,s);break e}else if(r!==s){s=yr(Error(E(424)),t),t=Cu(e,t,r,n,s);break e}else for(qe=Zt(t.stateNode.containerInfo.firstChild),Ve=t,se=!0,ct=null,n=Eh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pr(),r===s){t=It(e,t,n);break e}Te(e,t,r,n)}t=t.child}return t;case 5:return Ah(t),e===null&&Fa(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,La(r,s)?a=null:i!==null&&La(r,i)&&(t.flags|=32),nf(e,t),Te(e,t,a,n),t.child;case 6:return e===null&&Fa(t),null;case 13:return sf(e,t,n);case 4:return Jl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gr(t,null,r,n):Te(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ot(r,s),_u(e,t,r,s,n);case 7:return Te(e,t,t.pendingProps,n),t.child;case 8:return Te(e,t,t.pendingProps.children,n),t.child;case 12:return Te(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Z(Ai,r._currentValue),r._currentValue=a,i!==null)if(ft(i.value,a)){if(i.children===s.children&&!Me.current){t=It(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Pt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ba(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(E(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ba(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Te(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ur(t,n),s=nt(s),r=r(s),t.flags|=1,Te(e,t,r,n),t.child;case 14:return r=t.type,s=ot(r,t.pendingProps),s=ot(r.type,s),ku(e,t,r,s,n);case 15:return ef(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ot(r,s),fi(e,t),t.tag=1,ze(r)?(e=!0,Ei(t)):e=!1,ur(t,n),Yh(t,r,s),Va(t,r,s,n),Ka(null,t,r,!0,e,n);case 19:return of(e,t,n);case 22:return tf(e,t,n)}throw Error(E(156,t.tag))};function jf(e,t){return Qd(e,t)}function rg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ze(e,t,n,r){return new rg(e,t,n,r)}function uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sg(e){if(typeof e=="function")return uc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pl)return 11;if(e===Tl)return 14}return 2}function rn(e,t){var n=e.alternate;return n===null?(n=Ze(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gi(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")uc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Jn:return jn(n.children,s,i,t);case El:a=8,s|=8;break;case ma:return e=Ze(12,n,t,s|2),e.elementType=ma,e.lanes=i,e;case pa:return e=Ze(13,n,t,s),e.elementType=pa,e.lanes=i,e;case ga:return e=Ze(19,n,t,s),e.elementType=ga,e.lanes=i,e;case Ad:return oo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pd:a=10;break e;case Td:a=9;break e;case Pl:a=11;break e;case Tl:a=14;break e;case Ut:a=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=Ze(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function jn(e,t,n,r){return e=Ze(7,e,r,t),e.lanes=n,e}function oo(e,t,n,r){return e=Ze(22,e,r,t),e.elementType=Ad,e.lanes=n,e.stateNode={isHidden:!1},e}function Go(e,t,n){return e=Ze(6,e,null,t),e.lanes=n,e}function Yo(e,t,n){return t=Ze(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ig(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dc(e,t,n,r,s,i,a,l,c){return e=new ig(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ze(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ql(i),e}function og(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Nf(e){if(!e)return on;e=e._reactInternals;e:{if(Ln(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var n=e.type;if(ze(n))return jh(e,n,t)}return t}function _f(e,t,n,r,s,i,a,l,c){return e=dc(n,r,!0,e,s,i,a,l,c),e.context=Nf(null),n=e.current,r=Ae(),s=nn(n),i=Pt(r,s),i.callback=t??null,en(n,i,s),e.current.lanes=s,_s(e,s,r),Fe(e,r),e}function ao(e,t,n,r){var s=t.current,i=Ae(),a=nn(s);return n=Nf(n),t.context===null?t.context=n:t.pendingContext=n,t=Pt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=en(s,t,a),e!==null&&(ht(e,s,a,i),ui(e,s,a)),a}function Fi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $u(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hc(e,t){$u(e,t),(e=e.alternate)&&$u(e,t)}function ag(){return null}var kf=typeof reportError=="function"?reportError:function(e){console.error(e)};function fc(e){this._internalRoot=e}lo.prototype.render=fc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));ao(e,t,null,null)};lo.prototype.unmount=fc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pn(function(){ao(null,e,null,null)}),t[At]=null}};function lo(e){this._internalRoot=e}lo.prototype.unstable_scheduleHydration=function(e){if(e){var t=th();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&t!==0&&t<Ft[n].priority;n++);Ft.splice(n,0,e),n===0&&rh(e)}};function mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uu(){}function lg(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fi(a);i.call(u)}}var a=_f(t,r,e,0,null,!1,!1,"",Uu);return e._reactRootContainer=a,e[At]=a.current,ds(e.nodeType===8?e.parentNode:e),Pn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Fi(c);l.call(u)}}var c=dc(e,0,!1,null,null,!1,!1,"",Uu);return e._reactRootContainer=c,e[At]=c.current,ds(e.nodeType===8?e.parentNode:e),Pn(function(){ao(t,c,n,r)}),c}function uo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Fi(a);l.call(c)}}ao(t,a,e,s)}else a=lg(n,t,e,s,r);return Fi(a)}Zd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fr(t.pendingLanes);n!==0&&(Il(t,n|1),Fe(t,ce()),!(V&6)&&(vr=ce()+500,cn()))}break;case 13:Pn(function(){var r=Rt(e,1);if(r!==null){var s=Ae();ht(r,e,1,s)}}),hc(e,1)}};Dl=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var n=Ae();ht(t,e,134217728,n)}hc(e,134217728)}};eh=function(e){if(e.tag===13){var t=nn(e),n=Rt(e,t);if(n!==null){var r=Ae();ht(n,e,t,r)}hc(e,t)}};th=function(){return J};nh=function(e,t){var n=J;try{return J=e,t()}finally{J=n}};Sa=function(e,t,n){switch(t){case"input":if(va(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=eo(r);if(!s)throw Error(E(90));Id(r),va(r,s)}}}break;case"textarea":Od(e,n);break;case"select":t=n.value,t!=null&&or(e,!!n.multiple,t,!1)}};Bd=ac;qd=Pn;var cg={usingClientEntryPoint:!1,Events:[Ss,Zn,eo,zd,Fd,ac]},$r={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ug={bundleType:$r.bundleType,version:$r.version,rendererPackageName:$r.rendererPackageName,rendererConfig:$r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wd(e),e===null?null:e.stateNode},findFiberByHostInstance:$r.findFiberByHostInstance||ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xs.isDisabled&&Xs.supportsFiber)try{Gi=Xs.inject(ug),wt=Xs}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cg;Qe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mc(t))throw Error(E(200));return og(e,t,null,n)};Qe.createRoot=function(e,t){if(!mc(e))throw Error(E(299));var n=!1,r="",s=kf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=dc(e,1,!1,null,null,n,!1,r,s),e[At]=t.current,ds(e.nodeType===8?e.parentNode:e),new fc(t)};Qe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=Wd(t),e=e===null?null:e.stateNode,e};Qe.flushSync=function(e){return Pn(e)};Qe.hydrate=function(e,t,n){if(!co(t))throw Error(E(200));return uo(null,e,t,!0,n)};Qe.hydrateRoot=function(e,t,n){if(!mc(e))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=kf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=_f(t,null,e,1,n??null,s,!1,i,a),e[At]=t.current,ds(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new lo(t)};Qe.render=function(e,t,n){if(!co(t))throw Error(E(200));return uo(null,e,t,!1,n)};Qe.unmountComponentAtNode=function(e){if(!co(e))throw Error(E(40));return e._reactRootContainer?(Pn(function(){uo(null,null,e,!1,function(){e._reactRootContainer=null,e[At]=null})}),!0):!1};Qe.unstable_batchedUpdates=ac;Qe.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!co(n))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return uo(e,t,n,!1,r)};Qe.version="18.3.1-next-f1338f8080-20240426";function Sf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sf)}catch(e){console.error(e)}}Sf(),kd.exports=Qe;var dg=kd.exports,Cf,Mu=dg;Cf=Mu.createRoot,Mu.hydrateRoot;const hg="modulepreload",fg=function(e){return"/"+e},zu={},Es=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=fg(c),c in zu)return;zu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":hg,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((x,g)=>{m.addEventListener("load",x),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},mg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Es(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class pc extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class pg extends pc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fu extends pc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bu extends pc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var il;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(il||(il={}));var gg=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class xg{constructor(t,{headers:n={},customFetch:r,region:s=il.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=mg(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return gg(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const m=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(b=>{throw new pg(b)}),x=m.headers.get("x-relay-error");if(x&&x==="true")throw new Fu(m);if(!m.ok)throw new Bu(m);let g=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield m.json():g==="application/octet-stream"?v=yield m.blob():g==="text/event-stream"?v=m:g==="multipart/form-data"?v=yield m.formData():v=yield m.text(),{data:v,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof Bu||s instanceof Fu?s.context:void 0}}})}}var $e={},gc={},ho={},Ps={},fo={},mo={},yg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wr=yg();const vg=wr.fetch,Ef=wr.fetch.bind(wr),Pf=wr.Headers,wg=wr.Request,bg=wr.Response,Er=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pf,Request:wg,Response:bg,default:Ef,fetch:vg},Symbol.toStringTag,{value:"Module"})),jg=Mm(Er);var po={};Object.defineProperty(po,"__esModule",{value:!0});let Ng=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};po.default=Ng;var Tf=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mo,"__esModule",{value:!0});const _g=Tf(jg),kg=Tf(po);let Sg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=_g.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,m=null,x=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const h=await i.text();h===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=h:d=JSON.parse(h))}const b=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&w&&w.length>1&&(m=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,x=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(d=[],u=null,x=200,g="OK")}catch{i.status===404&&b===""?(x=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,x=200,g="OK"),u&&this.shouldThrowOnError)throw new kg.default(u)}return{error:u,data:d,count:m,status:x,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};mo.default=Sg;var Cg=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fo,"__esModule",{value:!0});const Eg=Cg(mo);let Pg=class extends Eg.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fo.default=Pg;var Tg=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ps,"__esModule",{value:!0});const Ag=Tg(fo);let Rg=class extends Ag.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Ps.default=Rg;var Ig=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ho,"__esModule",{value:!0});const Ur=Ig(Ps);let Dg=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Ur.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ur.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ur.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Ur.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ur.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ho.default=Dg;var go={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.version=void 0;xo.version="0.0.0-automated";Object.defineProperty(go,"__esModule",{value:!0});go.DEFAULT_HEADERS=void 0;const Og=xo;go.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Og.version}`};var Af=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gc,"__esModule",{value:!0});const Lg=Af(ho),$g=Af(Ps),Ug=go;let Mg=class Rf{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ug.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Lg.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Rf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,m])=>m!==void 0).map(([d,m])=>[d,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([d,m])=>{l.searchParams.append(d,m)})):(a="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new $g.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gc.default=Mg;var Pr=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($e,"__esModule",{value:!0});$e.PostgrestError=$e.PostgrestBuilder=$e.PostgrestTransformBuilder=$e.PostgrestFilterBuilder=$e.PostgrestQueryBuilder=$e.PostgrestClient=void 0;const If=Pr(gc);$e.PostgrestClient=If.default;const Df=Pr(ho);$e.PostgrestQueryBuilder=Df.default;const Of=Pr(Ps);$e.PostgrestFilterBuilder=Of.default;const Lf=Pr(fo);$e.PostgrestTransformBuilder=Lf.default;const $f=Pr(mo);$e.PostgrestBuilder=$f.default;const Uf=Pr(po);$e.PostgrestError=Uf.default;var zg=$e.default={PostgrestClient:If.default,PostgrestQueryBuilder:Df.default,PostgrestFilterBuilder:Of.default,PostgrestTransformBuilder:Lf.default,PostgrestBuilder:$f.default,PostgrestError:Uf.default};const{PostgrestClient:Fg,PostgrestQueryBuilder:Zv,PostgrestFilterBuilder:e1,PostgrestTransformBuilder:t1,PostgrestBuilder:n1,PostgrestError:r1}=zg;function Bg(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const qg=Bg(),Vg="2.11.15",Hg=`realtime-js/${Vg}`,Wg="1.0.0",Mf=1e4,Kg=1e3;var Zr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zr||(Zr={}));var Se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Se||(Se={}));var lt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(lt||(lt={}));var ol;(function(e){e.websocket="websocket"})(ol||(ol={}));var xn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xn||(xn={}));class Qg{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class zf{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(X||(X={}));const qu=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=Jg(a,e,t,s),i),{})},Jg=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Ff(i,a):al(a)},Ff=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Zg(t,n)}switch(e){case X.bool:return Gg(t);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Yg(t);case X.json:case X.jsonb:return Xg(t);case X.timestamp:return ex(t);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return al(t);default:return al(t)}},al=e=>e,Gg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Yg=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Xg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Zg=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Ff(t,l))}return e},ex=e=>typeof e=="string"?e.replace(" ","T"):e,Bf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Xo{constructor(t,n,r={},s=Mf){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Vu||(Vu={}));class es{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=es.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=es.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=es.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const m=i[u];if(m){const x=d.map(w=>w.presence_ref),g=m.map(w=>w.presence_ref),v=d.filter(w=>g.indexOf(w.presence_ref)<0),b=m.filter(w=>x.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const m=t[l].map(g=>g.presence_ref),x=d.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...x)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(m=>m.presence_ref);u=u.filter(m=>d.indexOf(m.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Hu||(Hu={}));var Wu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wu||(Wu={}));var kt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(kt||(kt={}));class xc{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xo(this,lt.join,this.params,this.timeout),this.rejoinTimer=new zf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new es(this),this.broadcastEndpointURL=Bf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Se.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>t==null?void 0:t(kt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(kt.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var m;if(this.socket.setAuth(),d===void 0){t==null||t(kt.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,v=[];for(let b=0;b<g;b++){const w=x[b],{filter:{event:h,schema:p,table:f,filter:y}}=w,N=d&&d[b];if(N&&N.event===h&&N.schema===p&&N.table===f&&N.filter===y)v.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=Se.errored,t==null||t(kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(kt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Se.errored,t==null||t(kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Se.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Xo(this,lt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xo(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=lt;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let x=this._onMessage(a,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,b,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=g.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(g=>g.callback(x,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var v,b,w,h,p,f;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const y=g.id,N=(v=g.filter)===null||v===void 0?void 0:v.event;return y&&((b=n.ids)===null||b===void 0?void 0:b.includes(y))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const y=(p=(h=g==null?void 0:g.filter)===null||h===void 0?void 0:h.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return y==="*"||y===((f=n==null?void 0:n.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof x=="object"&&"ids"in x){const v=x.data,{schema:b,table:w,commit_timestamp:h,type:p,errors:f}=v;x=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:h,eventType:p,new:{},old:{},errors:f}),this._getPayloadRecords(v))}g.callback(x,r)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xc.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(lt.close,{},t)}_onError(t){this._on(lt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=qu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=qu(t.columns,t.old_record)),n}}const Ku=()=>{},tx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nx{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ku,this.ref=0,this.logger=Ku,this.conn=null,this.sendBuffer=[],this.serializer=new Qg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Es(async()=>{const{default:c}=await Promise.resolve().then(()=>Er);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${ol.websocket}`,this.httpEndpoint=Bf(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,a)=>a(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=qg),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wg}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Zr.connecting:return xn.Connecting;case Zr.open:return xn.Open;case Zr.closing:return xn.Closing;default:return xn.Closed}}isConnected(){return this.connectionState()===xn.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new xc(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Hg};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(lt.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Kg,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:a}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(lt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([tx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class yc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ge(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class rx extends yc{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ll extends yc{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var sx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const qf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Es(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},ix=()=>sx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Es(()=>Promise.resolve().then(()=>Er),void 0)).Response:Response}),cl=e=>{if(Array.isArray(e))return e.map(n=>cl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=cl(r)}),t};var $n=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Zo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ox=(e,t,n)=>$n(void 0,void 0,void 0,function*(){const r=yield ix();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new rx(Zo(s),e.status||500))}).catch(s=>{t(new ll(Zo(s),s))}):t(new ll(Zo(e),e))}),ax=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ts(e,t,n,r,s,i){return $n(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,ax(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>ox(c,l,r))})})}function Bi(e,t,n,r){return $n(this,void 0,void 0,function*(){return Ts(e,"GET",t,n,r)})}function zt(e,t,n,r,s){return $n(this,void 0,void 0,function*(){return Ts(e,"POST",t,r,s,n)})}function lx(e,t,n,r,s){return $n(this,void 0,void 0,function*(){return Ts(e,"PUT",t,r,s,n)})}function cx(e,t,n,r){return $n(this,void 0,void 0,function*(){return Ts(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Vf(e,t,n,r,s){return $n(this,void 0,void 0,function*(){return Ts(e,"DELETE",t,r,s,n)})}var Oe=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const ux={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dx{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=qf(s)}uploadOrUpdate(t,n,r,s){return Oe(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Qu),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),m=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),x=yield m.json();return m.ok?{data:{path:u,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Qu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),x=yield m.json();return m.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(c){if(ge(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield zt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new yc("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}update(t,n,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield zt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Oe(this,void 0,void 0,function*(){try{const s=yield zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}download(t,n){return Oe(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Bi(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ge(l))return{data:null,error:l};throw l}})}info(t){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Bi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:cl(r),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}exists(t){return Oe(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield cx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ge(r)&&r instanceof ll){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Oe(this,void 0,void 0,function*(){try{return{data:yield Vf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}list(t,n,r){return Oe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ux),n),{prefix:t||""});return{data:yield zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const hx="2.7.1",fx={"X-Client-Info":`storage-js/${hx}`};var Fn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class mx{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},fx),n),this.fetch=qf(r)}listBuckets(){return Fn(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}getBucket(t){return Fn(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Fn(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Fn(this,void 0,void 0,function*(){try{return{data:yield lx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Fn(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Fn(this,void 0,void 0,function*(){try{return{data:yield Vf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}}class px extends mx{constructor(t,n={},r){super(t,n,r)}from(t){return new dx(this.url,this.headers,t,this.fetch)}}const gx="2.52.0";let qr="";typeof Deno<"u"?qr="deno":typeof document<"u"?qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qr="react-native":qr="node";const xx={"X-Client-Info":`supabase-js-${qr}/${gx}`},yx={headers:xx},vx={schema:"public"},wx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bx={};var jx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Nx=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ef:t=fetch,(...n)=>t(...n)},_x=()=>typeof Headers>"u"?Pf:Headers,kx=(e,t,n)=>{const r=Nx(n),s=_x();return(i,a)=>jx(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var Sx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function Cx(e){return e.endsWith("/")?e:e+"/"}function Ex(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:m}=t,x={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Sx(this,void 0,void 0,function*(){return""})};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}const Hf="2.71.1",Wn=30*1e3,ul=3,ea=ul*Wn,Px="http://localhost:9999",Tx="supabase.auth.token",Ax={"X-Client-Info":`gotrue-js/${Hf}`},dl="X-Supabase-Api-Version",Wf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ix=10*60*1e3;class vc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function M(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Dx extends vc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Ox(e){return M(e)&&e.name==="AuthApiError"}class Kf extends vc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class un extends vc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class $t extends un{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lx(e){return M(e)&&e.name==="AuthSessionMissingError"}class Zs extends un{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ei extends un{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ti extends un{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $x(e){return M(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ju extends un{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hl extends un{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ta(e){return M(e)&&e.name==="AuthRetryableFetchError"}class Gu extends un{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class fl extends un{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yu=` 	
\r=`.split(""),Ux=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Yu.length;t+=1)e[Yu[t].charCodeAt(0)]=-2;for(let t=0;t<qi.length;t+=1)e[qi[t].charCodeAt(0)]=t;return e})();function Xu(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(qi[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(qi[r]),t.queuedBits-=6}}function Qf(e,t,n){const r=Ux[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Zu(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{Fx(a,r,n)};for(let a=0;a<e.length;a+=1)Qf(e.charCodeAt(a),s,i);return t.join("")}function Mx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zx(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Mx(r,t)}}function Fx(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Bx(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Qf(e.charCodeAt(s),n,r);return new Uint8Array(t)}function qx(e){const t=[];return zx(e,n=>t.push(n)),new Uint8Array(t)}function Vx(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Xu(s,n,r)),Xu(null,n,r),t.join("")}function Hx(e){return Math.round(Date.now()/1e3)+e}function Wx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const it=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},Jf=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function Kx(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Gf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Es(async()=>{const{default:r}=await Promise.resolve().then(()=>Er);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Qx=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Kn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},fn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Lt=async(e,t)=>{await e.removeItem(t)};class yo{constructor(){this.promise=new yo.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}yo.promiseConstructor=Promise;function na(e){const t=e.split(".");if(t.length!==3)throw new fl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Rx.test(t[r]))throw new fl("JWT not in base64url format");return{header:JSON.parse(Zu(t[0])),payload:JSON.parse(Zu(t[1])),signature:Bx(t[2]),raw:{header:t[0],payload:t[1]}}}async function Jx(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Gx(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function Yx(e){return("0"+e.toString(16)).substr(-2)}function Xx(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Yx).join("")}async function Zx(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ey(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Zx(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bn(e,t,n=!1){const r=Xx();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Kn(e,`${t}-code-verifier`,s);const i=await ey(r);return[i,r===i?"plain":"s256"]}const ty=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ny(e){const t=e.headers.get(dl);if(!t||!t.match(ty))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ry(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sy(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qn(e){if(!iy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ra(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ed(e){return JSON.parse(JSON.stringify(e))}var oy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const gn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ay=[502,503,504];async function td(e){var t;if(!Qx(e))throw new hl(gn(e),0);if(ay.includes(e.status))throw new hl(gn(e),e.status);let n;try{n=await e.json()}catch(i){throw new Kf(gn(i),i)}let r;const s=ny(e);if(s&&s.getTime()>=Wf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Gu(gn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new $t}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Gu(gn(n),e.status,n.weak_password.reasons);throw new Dx(gn(n),e.status||500,r)}const ly=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function F(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[dl]||(i[dl]=Wf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await cy(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function cy(e,t,n,r,s,i){const a=ly(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new hl(gn(c),0)}if(l.ok||await td(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await td(c)}}function Nt(e){var t;let n=null;fy(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Hx(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function nd(e){const t=Nt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function uy(e){return{data:e,error:null}}function dy(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=oy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function hy(e){return e}function fy(e){return e.access_token&&e.refresh_token&&e.expires_in}const sa=["global","local","others"];var my=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class py{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Gf(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=sa[0]){if(sa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sa.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=my(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:dy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(M(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:hy});if(d.error)throw d.error;const m=await d.json(),x=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){qn(t);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){qn(t);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){qn(t);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){qn(t.userId);try{const{data:n,error:r}=await F(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteFactor(t){qn(t.userId),qn(t.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}function rd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function gy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vn={debug:!!(globalThis&&Jf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class xy extends Yf{}async function yy(e,t,n){Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new xy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Vn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}gy();const vy={url:Px,storageKey:Tx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ax,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sd(e,t,n){return await n()}const Hn={};class ws{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ws.nextInstanceID,ws.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},vy),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new py({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Gf(s.fetch),this.lock=s.lock||sd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:it()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yy:this.lock=sd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Jf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=rd(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Hn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Hn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Hf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Kx(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),it()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$x(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return M(n)?{error:n}:{error:new Kf("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Nt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:m,options:x}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Bn(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:d,password:m,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:g,code_challenge_method:v},xform:Nt})}else if("phone"in t){const{phone:d,password:m,options:x}=t;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Nt})}else throw new ei("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nd})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nd})}else throw new ei("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,m,x,g;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:h,statement:p,options:f}=t;let y;if(it())if(typeof h=="object")y=h;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))y=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof h!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const N=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in y&&y.signIn){const k=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let _;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")_=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)_=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),b=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((a=f==null?void 0:f.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((m=(d=f==null?void 0:f.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...f.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const k=await y.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=k}}try{const{data:w,error:h}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Vx(b)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Nt});if(h)throw h;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Zs}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:h})}catch(w){if(M(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await fn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Nt});if(await Lt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Zs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(M(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Nt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bn(this.storage,this.storageKey));const{error:m}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ei("You must provide either an email or phone number.")}catch(l){if(M(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Nt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Bn(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:uy})}catch(i){if(M(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new $t;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await F(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await F(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new ei("You must provide either an email or phone number and a type")}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ea:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await fn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=ra()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qt}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $t}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qt})})}catch(n){if(M(n))return Lx(n)&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new $t;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bn(this.storage,this.storageKey));const{data:u,error:d}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:qt});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $t;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=na(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(M(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new $t;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!it())throw new ti("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ti(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ju("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ti("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ju("No code detected.");const{data:p,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new ti("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let x=d+m;c&&(x=parseInt(c));const g=x-d;g*1e3<=Wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const v=x-m;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,x,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,x,d);const{data:b,error:w}=await this._getUser(i);if(w)throw w;const h={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:x,refresh_token:a,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:h,redirectType:t.type},error:null}}catch(r){if(M(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Ox(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Wx(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Bn(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(M(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:m,error:x}=i;if(x)throw x;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return it()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(M(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Gx(async s=>(s>0&&await Jx(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Nt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ta(i)&&Date.now()+a-r<Wn})}catch(r){if(this._debug(n,"error",r),M(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),it()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await fn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Kn(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:ra()}else if(s&&!s.user&&!s.user){const a=await fn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Lt(this.storage,this.storageKey+"-user"),await Kn(this.storage,this.storageKey,s)):s.user=ra()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ea;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ea}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ta(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new $t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yo;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new $t;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),M(i)){const a={session:null,error:i};return ta(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Kn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=ed(s);await Kn(this.storage,this.storageKey,i)}else{const s=ed(n);await Kn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Lt(this.storage,this.storageKey),await Lt(this.storage,this.storageKey+"-code-verifier"),await Lt(this.storage,this.storageKey+"-user"),this.userStorage&&await Lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Wn}ms, refresh threshold is ${ul} ticks`),s<=ul&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Yf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Bn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await F(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(M(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(M(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=na(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+Ix>s)return r;const{data:i,error:a}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};r=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=na(r);n!=null&&n.allowExpired||ry(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const d=sy(s.alg),m=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,a,qx(`${l}.${c}`)))throw new fl("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}}ws.nextInstanceID=0;const wy=ws;class by extends wy{constructor(t){super(t)}}var jy=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Ny{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=Cx(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:vx,realtime:bx,auth:Object.assign(Object.assign({},wx),{storageKey:u}),global:yx},m=Ex(r??{},d);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=kx(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new Fg(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new xg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new px(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return jy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new by({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new nx(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _y=(e,t,n)=>new Ny(e,t,n),wc="https://qufzqkbkdvhkporsowzj.supabase.co",ts="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1Znpxa2JrZHZoa3BvcnNvd3pqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNTIxODUsImV4cCI6MjA2ODcyODE4NX0.XeTleMNfffM_92H4R_YIrMcaOOUMR0Gu6DRt4Nd7gAA";console.log("→ SUPABASE_URL:   ",wc);console.log("→ SUPABASE_ANON_KEY:",ts);const vt=_y(wc,ts,{global:{headers:{apikey:ts,Authorization:`Bearer ${ts}`}}});console.log("→ Supabase client initialized");const ky=async()=>{try{const{data:e,error:t}=await vt.from("companies").select("*").limit(1);return t?{connected:!1,error:t.message}:{connected:!0,error:null}}catch{return{connected:!1,error:"Erro de conexão"}}},Sy=[{id:"starter",name:"Starter",maxCustomers:100,maxProducts:10,price:49.9,features:["100 clientes","10 produtos","Suporte básico"],createdAt:new Date,planId:""},{id:"professional",name:"Professional",maxCustomers:500,maxProducts:50,price:99.9,features:["500 clientes","50 produtos","Suporte prioritário","Relatórios avançados"],createdAt:new Date,planId:""},{id:"enterprise",name:"Enterprise",maxCustomers:-1,maxProducts:-1,price:199.9,features:["Clientes ilimitados","Produtos ilimitados","Suporte 24/7","API personalizada"],createdAt:new Date,planId:""}],Xf={customers:[],products:[],sales:[],pointsConfigs:[],pointsTransactions:[],companies:[],plans:Sy,loyaltyRequests:[],webhookConfigs:[],currentUser:null,currentCompany:null,isLoading:!1},Zf=T.createContext({state:Xf,dispatch:()=>null});function Cy(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_CURRENT_USER":return{...e,currentUser:t.payload};case"SET_CURRENT_COMPANY":return{...e,currentCompany:t.payload};case"ADD_CUSTOMER":return{...e,customers:[...e.customers,t.payload]};case"UPDATE_CUSTOMER":return{...e,customers:e.customers.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_CUSTOMER":return{...e,customers:e.customers.filter(n=>n.id!==t.payload)};case"ADD_PRODUCT":return{...e,products:[...e.products,t.payload]};case"UPDATE_PRODUCT":return{...e,products:e.products.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_PRODUCT":return{...e,products:e.products.filter(n=>n.id!==t.payload)};case"ADD_SALE":return{...e,sales:[...e.sales,t.payload]};case"UPDATE_POINTS_CONFIG":return{...e,pointsConfigs:e.pointsConfigs.some(n=>n.companyId===t.payload.companyId)?e.pointsConfigs.map(n=>n.companyId===t.payload.companyId?t.payload:n):[...e.pointsConfigs,t.payload]};case"ADD_POINTS_TRANSACTION":return{...e,pointsTransactions:[...e.pointsTransactions,t.payload]};case"DELETE_POINTS_TRANSACTION":return{...e,pointsTransactions:e.pointsTransactions.filter(n=>n.id!==t.payload)};case"DELETE_SALE":return{...e,sales:e.sales.filter(n=>n.id!==t.payload)};case"DELETE_POINTS_CONFIG":return{...e,pointsConfigs:e.pointsConfigs.filter(n=>n.companyId!==t.payload)};case"ADD_COMPANY":return{...e,companies:[...e.companies,t.payload]};case"UPDATE_COMPANY":return{...e,companies:e.companies.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_COMPANY":return{...e,companies:e.companies.filter(n=>n.id!==t.payload)};case"ADD_PLAN":return{...e,plans:[...e.plans,t.payload]};case"UPDATE_PLAN":return{...e,plans:e.plans.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_PLAN":return{...e,plans:e.plans.filter(n=>n.id!==t.payload)};case"ADD_LOYALTY_REQUEST":return{...e,loyaltyRequests:[...e.loyaltyRequests,t.payload]};case"UPDATE_LOYALTY_REQUEST":return{...e,loyaltyRequests:e.loyaltyRequests.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_LOYALTY_REQUEST":return{...e,loyaltyRequests:e.loyaltyRequests.filter(n=>n.id!==t.payload)};case"UPDATE_WEBHOOK_CONFIG":return{...e,webhookConfigs:e.webhookConfigs.some(n=>n.companyId===t.payload.companyId)?e.webhookConfigs.map(n=>n.companyId===t.payload.companyId?t.payload:n):[...e.webhookConfigs,t.payload]};case"INITIALIZE_DATA":return{...e,...t.payload};default:return e}}function Ey({children:e}){const[t,n]=T.useReducer(Cy,Xf);return T.useEffect(()=>{async function r(){n({type:"SET_LOADING",payload:!0});const{data:s,error:i}=await vt.from("customers").select("*");i&&console.error(i);const a=(s==null?void 0:s.map(g=>({id:g.id,name:g.name,cpf:g.cpf,email:g.email,phone:g.phone,address:g.address||void 0,birthDate:g.birth_date?new Date(g.birth_date):new Date,points:g.points,password:g.password,createdAt:g.created_at?new Date(g.created_at):new Date,companyId:g.company_id})))||[],{data:l,error:c}=await vt.from("products").select("*");c&&console.error(c);const u=(l==null?void 0:l.map(g=>({id:g.id,name:g.name,description:g.description,pointsRequired:g.points_required,imageUrl:g.image_url||void 0,available:g.available,createdAt:g.created_at?new Date(g.created_at):new Date,companyId:g.company_id})))||[],{data:d,error:m}=await vt.from("sales").select("*");m&&console.error(m);const x=(d==null?void 0:d.map(g=>({id:g.id,customerId:g.customer_id,customerName:g.customer_name,amount:parseFloat(g.amount),pointsEarned:g.points_earned,date:g.date?new Date(g.date):new Date,description:g.description||void 0,companyId:g.company_id})))||[];n({type:"INITIALIZE_DATA",payload:{customers:a,products:u,sales:x}}),n({type:"SET_LOADING",payload:!1})}r()},[]),o.jsx(Zf.Provider,{value:{state:t,dispatch:n},children:e})}const ve=()=>{const e=T.useContext(Zf);if(!e)throw new Error("useApp must be used within an AppProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Py={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(e,t)=>{const n=T.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>T.createElement("svg",{ref:d,...Py,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Ty(e)}`,l].join(" "),...u},[...t.map(([m,x])=>T.createElement(m,x)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=U("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=U("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=U("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=U("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=U("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=U("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=U("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=U("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=U("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=U("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=U("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=U("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=U("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=U("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=U("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=U("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=U("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=U("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=U("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=U("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=U("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=U("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=U("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function qy(){const{state:e,dispatch:t}=ve(),n=()=>{t({type:"SET_CURRENT_USER",payload:null}),t({type:"SET_CURRENT_COMPANY",payload:null})};if(!e.currentUser)return null;const r=()=>{var i;return e.currentUser.type==="superadmin"?"Fideliza.AI - Super Admin":e.currentUser.type==="admin"?`${((i=e.currentCompany)==null?void 0:i.name)||"Empresa"} - Painel Admin`:"Fideliza.AI - Seus Pontos"},s=()=>e.currentUser.type==="superadmin"?"Gerenciamento de Plataforma":e.currentUser.type==="admin"?"Painel Administrativo":"Programa de Fidelidade";return o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.currentUser.type==="superadmin"?o.jsx(em,{className:"w-6 h-6 text-white"}):o.jsx(Tn,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r()}),o.jsx("p",{className:"text-sm text-gray-500",children:s()})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(wo,{className:"w-5 h-5 text-gray-400"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.currentUser.name})]}),o.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 transition-colors",children:[o.jsx(My,{className:"w-4 h-4"}),o.jsx("span",{children:"Sair"})]})]})]})})})}function Vy(){const{state:e,dispatch:t}=ve(),[n,r]=T.useState("company"),[s,i]=T.useState(""),[a,l]=T.useState("");T.useState("");const[c,u]=T.useState(!1),[d,m]=T.useState(""),x=g=>{if(g.preventDefault(),m(""),n==="superadmin")if(s==="onsolutions"&&a==="33537095a"){t({type:"SET_CURRENT_USER",payload:{id:"superadmin",type:"superadmin",email:"onsolutions",name:"Super Administrador"}});return}else{m("Credenciais de super admin inválidas");return}if(n==="company"){const v=e.companies.find(b=>b.ownerEmail===s&&b.isActive);if(!v){m("Empresa não encontrada ou inativa");return}if(v.password!==a){m("Senha incorreta");return}t({type:"SET_CURRENT_USER",payload:{id:v.id,type:"admin",email:v.ownerEmail,name:v.ownerName,companyId:v.id}}),t({type:"SET_CURRENT_COMPANY",payload:v});return}if(n==="customer"){const v=e.customers.find(w=>w.email===s);if(!v){m("Cliente não encontrado");return}if(v.password!==a){m("Senha incorreta");return}const b=e.companies.find(w=>w.id===v.companyId&&w.isActive);if(!b){m("Empresa não encontrada ou inativa");return}t({type:"SET_CURRENT_USER",payload:{id:v.id,type:"customer",email:v.email,name:v.name,companyId:b.id}}),t({type:"SET_CURRENT_COMPANY",payload:b});return}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:o.jsx(em,{className:"w-8 h-8 text-white"})}),o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Fideliza.AI"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Plataforma inteligente de fidelidade"})]}),o.jsx("div",{className:"bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsx("button",{type:"button",onClick:()=>r("company"),className:`px-3 py-2 text-sm font-medium rounded-md transition-all ${n==="company"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Empresa"}),o.jsx("button",{type:"button",onClick:()=>r("customer"),className:`px-3 py-2 text-sm font-medium rounded-md transition-all ${n==="customer"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Cliente"}),o.jsx("button",{type:"button",onClick:()=>r("superadmin"),className:`px-3 py-2 text-sm font-medium rounded-md transition-all ${n==="superadmin"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Admin"})]})}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:n==="superadmin"?"Usuário":"Email"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(vo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"email",type:"text",value:s,onChange:g=>i(g.target.value),className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 rounded-lg placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:n==="superadmin"?"Digite seu usuário":"Digite seu email",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(jc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"password",type:c?"text":"password",value:a,onChange:g=>l(g.target.value),className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 rounded-lg placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Digite sua senha",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>u(!c),children:c?o.jsx(In,{className:"h-5 w-5"}):o.jsx(Dn,{className:"h-5 w-5"})})]})]})]}),d&&o.jsx("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg",children:d}),o.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105",children:"Entrar"})]}),n==="customer"&&o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Acesso do Cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[o.jsx("p",{children:"Faça login com seu email e senha"}),o.jsx("p",{children:"Sua senha inicial é seu número de telefone"}),o.jsx("p",{children:"Você verá todas as empresas onde possui cadastro"})]})]})})]})})}function om(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function am(e){const t=e.replace(/\D/g,"");return t.length===11?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):t.length===10?t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):e}function lm(e){const t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let n=0,r;for(let s=1;s<=9;s++)n+=parseInt(t.substring(s-1,s))*(11-s);if(r=n*10%11,(r===10||r===11)&&(r=0),r!==parseInt(t.substring(9,10)))return!1;n=0;for(let s=1;s<=10;s++)n+=parseInt(t.substring(s-1,s))*(12-s);return r=n*10%11,(r===10||r===11)&&(r=0),r===parseInt(t.substring(10,11))}function Nc(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function He(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function Ee(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function ut(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function Wi(e){return e.replace(/\D/g,"")}function cm(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}function Hy(e,t=30){const n=new Date,r=n.getFullYear();return e.map(s=>{const i=new Date(s.birthDate),a=new Date(r,i.getMonth(),i.getDate()),l=new Date(r+1,i.getMonth(),i.getDate()),c=a>=n?a:l,u=Math.ceil((c.getTime()-n.getTime())/(1e3*60*60*24));return{...s,daysUntilBirthday:u,nextBirthday:c}}).filter(s=>s.daysUntilBirthday<=t).sort((s,i)=>s.daysUntilBirthday-i.daysUntilBirthday)}function pl(e){const t=new Date,n=new Date(e);let r=t.getFullYear()-n.getFullYear();const s=t.getMonth()-n.getMonth();return(s<0||s===0&&t.getDate()<n.getDate())&&r--,r}function ad({company:e,onClose:t}){const{state:n,dispatch:r}=ve(),[s,i]=T.useState({name:(e==null?void 0:e.name)||"",slug:(e==null?void 0:e.slug)||"",ownerName:(e==null?void 0:e.ownerName)||"",ownerEmail:(e==null?void 0:e.ownerEmail)||"",password:(e==null?void 0:e.password)||"",planId:(e==null?void 0:e.planId)||"",isActive:(e==null?void 0:e.isActive)!==!1}),[a,l]=T.useState(!1),[c,u]=T.useState({}),d=g=>{const v=g.target,{name:b,type:w,value:h,checked:p}=v;if(b==="isActive"&&w==="checkbox"){i(y=>({...y,isActive:p})),c.isActive&&u(y=>({...y,isActive:""}));return}let f=h;if(b==="name"&&!e){const y=h.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");i(N=>({...N,name:h,slug:y})),c.name&&u(N=>({...N,name:""})),c.slug&&u(N=>({...N,slug:""}));return}b==="slug"&&(f=h.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")),i(y=>({...y,[b]:f})),c[b]&&u(y=>({...y,[b]:""}))},m=()=>{const g={};return s.name.trim()||(g.name="Nome da empresa é obrigatório"),s.slug.trim()?s.slug.length<3?g.slug="Código deve ter pelo menos 3 caracteres":n.companies.find(b=>b.slug===s.slug&&b.id!==(e==null?void 0:e.id))&&(g.slug="Este código já está em uso"):g.slug="Código da empresa é obrigatório",s.ownerName.trim()||(g.ownerName="Nome do proprietário é obrigatório"),s.ownerEmail.trim()?Nc(s.ownerEmail)?n.companies.find(b=>b.ownerEmail===s.ownerEmail&&b.id!==(e==null?void 0:e.id))&&(g.ownerEmail="Este email já está em uso"):g.ownerEmail="Email inválido":g.ownerEmail="Email é obrigatório",s.password.trim()?s.password.length<4&&(g.password="Senha deve ter pelo menos 4 caracteres"):g.password="Senha é obrigatória",s.planId||(g.planId="Plano é obrigatório"),u(g),Object.keys(g).length===0},x=async g=>{if(g.preventDefault(),!m())return;const v={name:s.name,slug:s.slug,owner_name:s.ownerName,owner_email:s.ownerEmail,password:s.password,plan_id:s.planId,is_active:s.isActive},{data:b,error:w}=await vt.from("companies").insert(v,{returning:"representation"}).single();if(w){u({submit:w.message});return}const h=b,p={id:h.id,name:h.name,slug:h.slug,ownerName:h.owner_name,ownerEmail:h.owner_email,password:h.password,planId:h.plan_id,isActive:h.is_active,createdAt:new Date(h.created_at)};r({type:e?"UPDATE_COMPANY":"ADD_COMPANY",payload:p}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Empresa":"Nova Empresa"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Empresa *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome da empresa"})]}),c.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código da Empresa *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"slug",value:s.slug,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.slug?"border-red-500":"border-gray-300"}`,placeholder:"codigo-da-empresa"})]}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["URL de acesso: site.com.br/",s.slug||"codigo-da-empresa"]}),c.slug&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.slug})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Proprietário *"}),o.jsxs("div",{className:"relative",children:[o.jsx(wo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"ownerName",value:s.ownerName,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.ownerName?"border-red-500":"border-gray-300"}`,placeholder:"Nome completo do proprietário"})]}),c.ownerName&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.ownerName})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Proprietário *"}),o.jsxs("div",{className:"relative",children:[o.jsx(vo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"ownerEmail",value:s.ownerEmail,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.ownerEmail?"border-red-500":"border-gray-300"}`,placeholder:"email@exemplo.com"})]}),c.ownerEmail&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.ownerEmail})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),o.jsxs("div",{className:"relative",children:[o.jsx(jc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:a?"text":"password",name:"password",value:s.password,onChange:d,className:`w-full pl-10 pr-10 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.password?"border-red-500":"border-gray-300"}`,placeholder:"Senha de acesso"}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>l(!a),children:a?o.jsx(In,{className:"h-5 w-5"}):o.jsx(Dn,{className:"h-5 w-5"})})]}),c.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.password})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano *"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsxs("select",{name:"planId",value:s.planId,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.planId?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Selecione um plano"}),n.plans.map(g=>o.jsxs("option",{value:g.id,children:[g.name," - R$ ",g.price.toFixed(2),"/mês"]},g.id))]})]}),c.planId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.planId})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",name:"isActive",id:"isActive",checked:s.isActive,onChange:d,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Empresa ativa"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Empresa"})]})]})]})})}function ld({plan:e,onClose:t}){const{dispatch:n}=ve(),[r,s]=T.useState({name:(e==null?void 0:e.name)||"",maxCustomers:(e==null?void 0:e.maxCustomers)||0,maxProducts:(e==null?void 0:e.maxProducts)||0,price:(e==null?void 0:e.price)||0,features:(e==null?void 0:e.features)||[""]}),[i,a]=T.useState({}),l=g=>{const{name:v,value:b,type:w}=g.target;let h=b;w==="number"&&(h=Number(b)),s(p=>({...p,[v]:h})),i[v]&&a(p=>({...p,[v]:""}))},c=(g,v)=>{const b=[...r.features];b[g]=v,s(w=>({...w,features:b}))},u=()=>{s(g=>({...g,features:[...g.features,""]}))},d=g=>{if(r.features.length>1){const v=r.features.filter((b,w)=>w!==g);s(b=>({...b,features:v}))}},m=()=>{const g={};return r.name.trim()||(g.name="Nome do plano é obrigatório"),(r.maxCustomers<-1||r.maxCustomers===0)&&(g.maxCustomers="Número de clientes deve ser maior que 0 ou -1 para ilimitado"),(r.maxProducts<-1||r.maxProducts===0)&&(g.maxProducts="Número de produtos deve ser maior que 0 ou -1 para ilimitado"),r.price<=0&&(g.price="Preço deve ser maior que zero"),r.features.filter(b=>b.trim()).length===0&&(g.features="Pelo menos uma funcionalidade é obrigatória"),a(g),Object.keys(g).length===0},x=g=>{if(g.preventDefault(),!m())return;const v={id:(e==null?void 0:e.id)||He(),name:r.name.trim(),maxCustomers:r.maxCustomers,maxProducts:r.maxProducts,price:r.price,features:r.features.filter(b=>b.trim()),createdAt:(e==null?void 0:e.createdAt)||new Date};n(e?{type:"UPDATE_PLAN",payload:v}:{type:"ADD_PLAN",payload:v}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Plano":"Novo Plano"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Plano *"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:r.name,onChange:l,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome do plano"})]}),i.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Máximo de Clientes *"}),o.jsxs("div",{className:"relative",children:[o.jsx(bs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"maxCustomers",value:r.maxCustomers,onChange:l,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.maxCustomers?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use -1 para ilimitado"}),i.maxCustomers&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.maxCustomers})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Máximo de Produtos *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Wt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"maxProducts",value:r.maxProducts,onChange:l,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.maxProducts?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use -1 para ilimitado"}),i.maxProducts&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.maxProducts})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preço Mensal (R$) *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Rn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"price",value:r.price,onChange:l,min:"0",step:"0.01",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),i.price&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.price})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionalidades *"}),o.jsxs("div",{className:"space-y-2",children:[r.features.map((g,v)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:g,onChange:b=>c(v,b.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descreva uma funcionalidade"}),r.features.length>1&&o.jsx("button",{type:"button",onClick:()=>d(v),className:"p-2 text-red-500 hover:text-red-700 transition-colors",children:o.jsx(_n,{className:"w-4 h-4"})})]},v)),o.jsxs("button",{type:"button",onClick:u,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 hover:text-blue-700 transition-colors",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Adicionar funcionalidade"})]})]}),i.features&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.features})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Resumo do Plano"}),o.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[o.jsxs("p",{children:["Nome: ",r.name||"Não definido"]}),o.jsxs("p",{children:["Clientes: ",r.maxCustomers===-1?"Ilimitados":r.maxCustomers]}),o.jsxs("p",{children:["Produtos: ",r.maxProducts===-1?"Ilimitados":r.maxProducts]}),o.jsxs("p",{children:["Preço: R$ ",r.price.toFixed(2),"/mês"]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Plano"})]})]})]})})}function Wy(){const{state:e,dispatch:t}=ve(),[n,r]=T.useState("companies"),[s,i]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(null),[d,m]=T.useState(null),[x,g]=T.useState(""),[v,b]=T.useState(null),[w,h]=T.useState(0),[p,f]=T.useState(0),[y,N]=T.useState(0),[k,_]=T.useState(0);T.useEffect(()=>{const P=async()=>{const A=await ky();b(A)};P(),(async()=>{const{count:A}=await vt.from("companies").select("*",{count:"exact",head:!0});A!=null&&h(A);const{count:D}=await vt.from("companies").select("*",{count:"exact",head:!0}).eq("is_active",!0);D!=null&&f(D);const{count:L}=await vt.from("customers").select("*",{count:"exact",head:!0});L!=null&&N(L);const{data:q}=await vt.from("companies").select("plan_id").eq("is_active",!0);if(q){let ee=0;for(const pe of q){const{data:we}=await vt.from("plans").select("price").eq("id",pe.plan_id).single();we&&(ee+=we.preco)}_(ee)}})();const K=setInterval(P,3e4);return()=>clearInterval(K)},[]);const C=[{id:"companies",label:"Empresas",icon:Tn},{id:"plans",label:"Planos",icon:An},{id:"analytics",label:"Analytics",icon:Qt}],O=[{label:"Total de Empresas",value:w,icon:Tn,color:"text-blue-600",bgColor:"bg-blue-100"},{label:"Empresas Ativas",value:p,icon:bs,color:"text-green-600",bgColor:"bg-green-100"},{label:"Total de Clientes",value:y,icon:bs,color:"text-purple-600",bgColor:"bg-purple-100"},{label:"Receita Potencial",value:Ee(k),icon:Qt,color:"text-orange-600",bgColor:"bg-orange-100"}],R=e.companies.filter(P=>P.name.toLowerCase().includes(x.toLowerCase())||P.ownerName.toLowerCase().includes(x.toLowerCase())||P.ownerEmail.toLowerCase().includes(x.toLowerCase())),H=e.plans.filter(P=>P.name.toLowerCase().includes(x.toLowerCase())),Y=P=>{const $=e.companies.find(Q=>Q.id===P);if(!$)return;const K=e.customers.filter(Q=>Q.companyId===P),A=e.products.filter(Q=>Q.companyId===P),D=e.sales.filter(Q=>Q.companyId===P),L=e.pointsTransactions.filter(Q=>Q.companyId===P),q=e.loyaltyRequests.filter(Q=>Q.companyId===P),ee=e.pointsConfigs.filter(Q=>Q.companyId===P),pe=`ATENÇÃO: Tem certeza que deseja excluir a empresa "${$.name}"?

Esta ação irá excluir PERMANENTEMENTE:
- ${K.length} cliente(s)
- ${A.length} produto(s)
- ${D.length} venda(s)
- ${L.length} transação(ões) de pontos
- ${q.length} solicitação(ões)
- Configurações de pontos

TODOS OS DADOS SERÃO PERDIDOS!
Esta operação NÃO PODE ser desfeita!

Digite "EXCLUIR" para confirmar:`,we=prompt(pe);we==="EXCLUIR"?(q.forEach(Q=>{t({type:"DELETE_LOYALTY_REQUEST",payload:Q.id})}),L.forEach(Q=>{t({type:"DELETE_POINTS_TRANSACTION",payload:Q.id})}),D.forEach(Q=>{t({type:"DELETE_SALE",payload:Q.id})}),A.forEach(Q=>{t({type:"DELETE_PRODUCT",payload:Q.id})}),K.forEach(Q=>{t({type:"DELETE_CUSTOMER",payload:Q.id})}),ee.forEach(Q=>{t({type:"DELETE_POINTS_CONFIG",payload:Q.companyId})}),t({type:"DELETE_COMPANY",payload:P}),alert("Empresa excluída com sucesso!")):we!==null&&alert('Operação cancelada. Digite exatamente "EXCLUIR" para confirmar a exclusão.')},S=P=>{if(e.companies.filter(K=>K.planId===P).length>0){alert("Não é possível excluir este plano pois existem empresas utilizando-o.");return}window.confirm("Tem certeza que deseja excluir este plano?")&&t({type:"DELETE_PLAN",payload:P})},W=P=>{const $={...P,isActive:!P.isActive};t({type:"UPDATE_COMPANY",payload:$})};return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Oy,{className:"w-5 h-5 text-gray-600"}),o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Status do Supabase"})]}),o.jsx("div",{className:"flex items-center space-x-2",children:v===null?o.jsx("span",{className:"text-sm text-gray-500",children:"Verificando..."}):v.connected?o.jsxs(o.Fragment,{children:[o.jsx(Vi,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm text-green-600",children:"Conectado"})]}):o.jsxs(o.Fragment,{children:[o.jsx(im,{className:"w-4 h-4 text-red-500"}),o.jsx("span",{className:"text-sm text-red-600",children:"Desconectado"}),v.error&&o.jsxs("span",{className:"text-xs text-red-500 ml-2",children:["(",v.error,")"]})]})})]}),!(v!=null&&v.connected)&&o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Configure as variáveis VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY no arquivo .env"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:O.map(P=>{const $=P.icon;return o.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:P.label}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.value})]}),o.jsx("div",{className:`p-3 rounded-lg ${P.bgColor}`,children:o.jsx($,{className:`w-6 h-6 ${P.color}`})})]})},P.label)})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:C.map(P=>{const $=P.icon;return o.jsxs("button",{onClick:()=>r(P.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===P.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx($,{className:"w-5 h-5"}),o.jsx("span",{children:P.label})]},P.id)})})}),o.jsxs("div",{className:"p-6",children:[n!=="analytics"&&o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(As,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:x,onChange:P=>g(P.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-80"})]}),o.jsxs("div",{className:"flex space-x-3",children:[n==="companies"&&o.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Nova Empresa"})]}),n==="plans"&&o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Novo Plano"})]})]})]}),n==="companies"&&o.jsx("div",{className:"space-y-4",children:R.map(P=>{const $=e.plans.find(D=>D.id===P.planId),K=e.customers.filter(D=>D.companyId===P.id),A=e.products.filter(D=>D.companyId===P.id);return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:P.name}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:P.isActive?"Ativa":"Inativa"})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[P.ownerName," • ",P.ownerEmail]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Código: ",P.slug]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:($==null?void 0:$.name)||"Sem plano"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[K.length," clientes • ",A.length," produtos"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Desde ",ut(new Date(P.createdAt))]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>W(P),className:`p-2 transition-colors ${P.isActive?"text-gray-400 hover:text-red-600":"text-gray-400 hover:text-green-600"}`,title:P.isActive?"Desativar":"Ativar",children:P.isActive?o.jsx(In,{className:"w-4 h-4"}):o.jsx(Dn,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>u(P),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Hi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Y(P.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(_n,{className:"w-4 h-4"})})]})]},P.id)})}),n==="plans"&&o.jsx("div",{className:"space-y-4",children:H.map(P=>{const $=e.companies.filter(K=>K.planId===P.id).length;return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:P.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[P.maxCustomers===-1?"Clientes ilimitados":`${P.maxCustomers} clientes`," •",P.maxProducts===-1?" Produtos ilimitados":` ${P.maxProducts} produtos`]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[Ee(P.price),"/mês"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:[$," empresas usando"]})]}),o.jsx("div",{className:"mt-2",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:P.features.map((K,A)=>o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:K},A))})})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>m(P),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Hi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>S(P.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(_n,{className:"w-4 h-4"})})]})]},P.id)})}),n==="analytics"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Distribuição por Planos"}),o.jsx("div",{className:"space-y-3",children:e.plans.map(P=>{const $=e.companies.filter(A=>A.planId===P.id).length,K=e.companies.length>0?$/e.companies.length*100:0;return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:P.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${K}%`}})}),o.jsx("span",{className:"text-sm text-gray-600",children:$})]})]},P.id)})})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumo Geral"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total de Vendas"}),o.jsx("span",{className:"text-sm font-medium",children:e.sales.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Receita Total"}),o.jsx("span",{className:"text-sm font-medium",children:Ee(e.sales.reduce((P,$)=>P+$.amount,0))})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Pontos Distribuídos"}),o.jsx("span",{className:"text-sm font-medium",children:e.pointsTransactions.reduce((P,$)=>$.type==="earned"||$.type==="credit"?P+$.points:P,0)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Produtos Cadastrados"}),o.jsx("span",{className:"text-sm font-medium",children:e.products.length})]})]})]})]})})]})]}),s&&o.jsx(ad,{company:c,onClose:()=>{i(!1),u(null)}}),a&&o.jsx(ld,{plan:d,onClose:()=>{l(!1),m(null)}}),c&&o.jsx(ad,{company:c,onClose:()=>u(null)}),d&&o.jsx(ld,{plan:d,onClose:()=>m(null)})]})}function cd({customer:e,onClose:t}){const{state:n,dispatch:r}=ve(),[s,i]=T.useState({name:(e==null?void 0:e.name)||"",cpf:(e==null?void 0:e.cpf)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",birthDate:e!=null&&e.birthDate?new Date(e.birthDate).toISOString().split("T")[0]:""}),[a,l]=T.useState({}),c=m=>{const{name:x,value:g}=m.target;let v=g;x==="cpf"?v=om(g):x==="phone"&&(v=am(g)),i(b=>({...b,[x]:v})),a[x]&&l(b=>({...b,[x]:""}))},u=()=>{const m={};return s.name.trim()||(m.name="Nome é obrigatório"),s.cpf.trim()?lm(s.cpf)||(m.cpf="CPF inválido"):m.cpf="CPF é obrigatório",s.email.trim()?Nc(s.email)||(m.email="Email inválido"):m.email="Email é obrigatório",s.phone.trim()?Wi(s.phone).length<10&&(m.phone="Telefone inválido"):m.phone="Telefone é obrigatório",s.birthDate?new Date(s.birthDate)>=new Date&&(m.birthDate="Data de nascimento deve ser anterior a hoje"):m.birthDate="Data de nascimento é obrigatória",l(m),Object.keys(m).length===0},d=m=>{var g;if(m.preventDefault(),!u())return;const x={id:(e==null?void 0:e.id)||He(),companyId:(e==null?void 0:e.companyId)||((g=n.currentCompany)==null?void 0:g.id)||"",name:s.name.trim(),cpf:s.cpf,email:s.email.trim(),phone:s.phone,address:s.address.trim(),birthDate:new Date(s.birthDate),points:(e==null?void 0:e.points)||0,password:(e==null?void 0:e.password)||Wi(s.phone),createdAt:(e==null?void 0:e.createdAt)||new Date};r(e?{type:"UPDATE_CUSTOMER",payload:x}:{type:"ADD_CUSTOMER",payload:x}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Cliente":"Novo Cliente"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome *"}),o.jsxs("div",{className:"relative",children:[o.jsx(wo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome completo"})]}),a.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF *"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"cpf",value:s.cpf,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.cpf?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14})]}),a.cpf&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.cpf})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),o.jsxs("div",{className:"relative",children:[o.jsx(vo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"email",value:s.email,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.email?"border-red-500":"border-gray-300"}`,placeholder:"email@exemplo.com"})]}),a.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),o.jsxs("div",{className:"relative",children:[o.jsx(nm,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.phone?"border-red-500":"border-gray-300"}`,placeholder:"(11) 99999-9999",maxLength:15})]}),a.phone&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento *"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"date",name:"birthDate",value:s.birthDate,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.birthDate?"border-red-500":"border-gray-300"}`})]}),a.birthDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.birthDate})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço"}),o.jsxs("div",{className:"relative",children:[o.jsx(tm,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"address",value:s.address,onChange:c,rows:3,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Endereço completo (opcional)"})]})]}),!e&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Senha inicial:"})," A senha será definida automaticamente como o número do telefone (apenas números)."]})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Cliente"})]})]})]})})}function ud({product:e,onClose:t}){const{state:n,dispatch:r}=ve(),[s,i]=T.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",pointsRequired:(e==null?void 0:e.pointsRequired)||0,imageUrl:(e==null?void 0:e.imageUrl)||"",available:(e==null?void 0:e.available)!==!1}),[a,l]=T.useState({}),c=m=>{const{name:x,value:g,type:v}=m.target,b=v==="checkbox"?m.target.checked:g;i(w=>({...w,[x]:b})),a[x]&&l(w=>({...w,[x]:""}))},u=()=>{const m={};return s.name.trim()||(m.name="Nome é obrigatório"),s.description.trim()||(m.description="Descrição é obrigatória"),s.pointsRequired<=0&&(m.pointsRequired="Pontos devem ser maior que zero"),l(m),Object.keys(m).length===0},d=m=>{var g;if(m.preventDefault(),!u())return;const x={id:(e==null?void 0:e.id)||He(),companyId:(e==null?void 0:e.companyId)||((g=n.currentCompany)==null?void 0:g.id)||"",name:s.name.trim(),description:s.description.trim(),pointsRequired:Number(s.pointsRequired),imageUrl:s.imageUrl.trim()||void 0,available:s.available,createdAt:(e==null?void 0:e.createdAt)||new Date};r(e?{type:"UPDATE_PRODUCT",payload:x}:{type:"ADD_PRODUCT",payload:x}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Produto":"Novo Produto"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Wt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome do produto"})]}),a.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição *"}),o.jsxs("div",{className:"relative",children:[o.jsx(bc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"description",value:s.description,onChange:c,rows:3,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none ${a.description?"border-red-500":"border-gray-300"}`,placeholder:"Descrição do produto"})]}),a.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pontos Necessários *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Nn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"pointsRequired",value:s.pointsRequired,onChange:c,min:"1",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.pointsRequired?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),a.pointsRequired&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.pointsRequired})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da Imagem"}),o.jsxs("div",{className:"relative",children:[o.jsx(Uy,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"url",name:"imageUrl",value:s.imageUrl,onChange:c,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all",placeholder:"https://exemplo.com/imagem.jpg"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",name:"available",id:"available",checked:s.available,onChange:c,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}),o.jsx("label",{htmlFor:"available",className:"text-sm font-medium text-gray-700",children:"Produto disponível"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Produto"})]})]})]})})}function Ky({onClose:e}){var f;const{state:t,dispatch:n}=ve(),r=t.pointsConfigs.find(y=>{var N;return y.companyId===((N=t.currentCompany)==null?void 0:N.id)})||{reaisPerPoint:10,companyId:((f=t.currentCompany)==null?void 0:f.id)||""},[s,i]=T.useState({customerId:"",customerSearch:"",amount:"",description:""}),[a,l]=T.useState({}),[c,u]=T.useState(!1),d=y=>{const{name:N,value:k}=y.target;i(_=>({..._,[N]:k})),a[N]&&l(_=>({..._,[N]:""}))},m=y=>{const N=y.target.value;i(k=>({...k,customerSearch:N,customerId:""})),u(N.length>0),a.customerId&&l(k=>({...k,customerId:""}))},x=y=>{i(N=>({...N,customerId:y.id,customerSearch:`${y.name} - ${y.cpf}`})),u(!1)},g=t.customers.filter(y=>{var N;return y.companyId===((N=t.currentCompany)==null?void 0:N.id)}).filter(y=>{const N=s.customerSearch.toLowerCase();return y.name.toLowerCase().includes(N)||y.cpf.includes(N)||y.email.toLowerCase().includes(N)}).slice(0,10),v=()=>{const y={};return s.customerId||(y.customerId="Cliente é obrigatório"),(!s.amount||Number(s.amount)<=0)&&(y.amount="Valor deve ser maior que zero"),l(y),Object.keys(y).length===0},b=y=>{var H,Y;if(y.preventDefault(),!v())return;const N=t.customers.find(S=>S.id===s.customerId);if(!N)return;const k=Number(s.amount),_=Math.floor(k/r.reaisPerPoint),C={id:He(),companyId:((H=t.currentCompany)==null?void 0:H.id)||"",customerId:N.id,customerName:N.name,amount:k,pointsEarned:_,date:new Date,description:s.description.trim()},O={...N,points:N.points+_},R={id:He(),companyId:((Y=t.currentCompany)==null?void 0:Y.id)||"",customerId:N.id,customerName:N.name,type:"earned",points:_,description:`Compra: ${Ee(k)}`,date:new Date};n({type:"ADD_SALE",payload:C}),n({type:"UPDATE_CUSTOMER",payload:O}),n({type:"ADD_POINTS_TRANSACTION",payload:R}),e()},w=t.customers.find(y=>y.id===s.customerId),h=Number(s.amount)||0,p=Math.floor(h/r.reaisPerPoint);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nova Venda"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),o.jsxs("div",{className:"relative",children:[o.jsx(As,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:s.customerSearch,onChange:m,onFocus:()=>u(s.customerSearch.length>0),className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.customerId?"border-red-500":"border-gray-300"}`,placeholder:"Busque por nome, CPF ou email..."}),c&&g.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(y=>o.jsxs("button",{type:"button",onClick:()=>x(y),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:y.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[y.cpf," • ",y.email," • ",y.points," pontos"]})]},y.id))}),c&&s.customerSearch.length>0&&g.length===0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Nenhum cliente encontrado"})]}),a.customerId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor da Venda *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Rn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:d,min:"0",step:"0.01",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.amount?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),a.amount&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.amount})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),o.jsxs("div",{className:"relative",children:[o.jsx(bc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"description",value:s.description,onChange:d,rows:3,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Descrição da venda (opcional)"})]})]}),h>0&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Resumo da Venda"}),o.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[o.jsxs("p",{children:["Valor: ",Ee(h)]}),o.jsxs("p",{children:["Pontos a ganhar: ",p]}),w&&o.jsxs("p",{children:["Pontos finais: ",w.points+p]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Registrar Venda"})]})]})]})})}function Qy({onClose:e}){var u;const{state:t,dispatch:n}=ve(),r=t.pointsConfigs.find(d=>{var m;return d.companyId===((m=t.currentCompany)==null?void 0:m.id)})||{reaisPerPoint:10,companyId:((u=t.currentCompany)==null?void 0:u.id)||""},[s,i]=T.useState(r.reaisPerPoint),[a,l]=T.useState(""),c=d=>{var m;if(d.preventDefault(),s<=0){l("O valor deve ser maior que zero");return}n({type:"UPDATE_POINTS_CONFIG",payload:{reaisPerPoint:s,companyId:((m=t.currentCompany)==null?void 0:m.id)||""}}),e()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Configuração de Pontos"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reais por Ponto"}),o.jsxs("div",{className:"relative",children:[o.jsx(Rn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",value:s,onChange:d=>i(Number(d.target.value)),min:"0.01",step:"0.01",className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all",placeholder:"0.00"})]}),o.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Cada ",s," reais gastos = 1 ponto"]})]}),a&&o.jsx("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg",children:a}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Exemplo"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["Com R$ ",s.toFixed(2)," por ponto:"]}),o.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[o.jsxs("li",{children:["• Compra de R$ ",(s*10).toFixed(2)," = 10 pontos"]}),o.jsxs("li",{children:["• Compra de R$ ",(s*50).toFixed(2)," = 50 pontos"]}),o.jsxs("li",{children:["• Compra de R$ ",(s*100).toFixed(2)," = 100 pontos"]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Salvar"})]})]})]})})}function Jy({onClose:e}){const{state:t,dispatch:n}=ve(),[r,s]=T.useState({customerId:"",customerSearch:"",points:"",description:"",type:"credit"}),[i,a]=T.useState({}),[l,c]=T.useState(!1),u=w=>{const{name:h,value:p}=w.target;s(f=>({...f,[h]:p})),i[h]&&a(f=>({...f,[h]:""}))},d=w=>{const h=w.target.value;s(p=>({...p,customerSearch:h,customerId:""})),c(h.length>0),i.customerId&&a(p=>({...p,customerId:""}))},m=w=>{s(h=>({...h,customerId:w.id,customerSearch:`${w.name} - ${w.cpf}`})),c(!1)},x=t.customers.filter(w=>{var h;return w.companyId===((h=t.currentCompany)==null?void 0:h.id)}).filter(w=>{const h=r.customerSearch.toLowerCase();return w.name.toLowerCase().includes(h)||w.cpf.includes(h)||w.email.toLowerCase().includes(h)}).slice(0,10),g=()=>{const w={};if(r.customerId||(w.customerId="Cliente é obrigatório"),(!r.points||Number(r.points)<=0)&&(w.points="Pontos devem ser maior que zero"),r.description.trim()||(w.description="Descrição é obrigatória"),r.type!=="remove_all"){const h=t.customers.find(p=>p.id===r.customerId);h&&r.type==="debit"&&h.points<Number(r.points)&&(w.points="Cliente não possui pontos suficientes")}return a(w),Object.keys(w).length===0},v=w=>{var _;if(w.preventDefault(),!g())return;const h=t.customers.find(C=>C.id===r.customerId);if(!h)return;let p=Number(r.points),f=h.points,y=r.type;r.type==="remove_all"?(p=h.points,f=0,y="debit"):f=r.type==="credit"?h.points+p:h.points-p;const N={...h,points:f},k={id:He(),companyId:((_=t.currentCompany)==null?void 0:_.id)||"",customerId:h.id,customerName:h.name,type:y,points:p,description:r.type==="remove_all"?`Remoção total de pontos: ${r.description.trim()}`:r.description.trim(),date:new Date};n({type:"UPDATE_CUSTOMER",payload:N}),n({type:"ADD_POINTS_TRANSACTION",payload:k}),e()},b=t.customers.find(w=>w.id===r.customerId);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gerenciar Pontos"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),o.jsxs("div",{className:"relative",children:[o.jsx(As,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:r.customerSearch,onChange:d,onFocus:()=>c(r.customerSearch.length>0),className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${i.customerId?"border-red-500":"border-gray-300"}`,placeholder:"Busque por nome, CPF ou email..."}),l&&x.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(w=>o.jsxs("button",{type:"button",onClick:()=>m(w),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:w.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[w.cpf," • ",w.email," • ",w.points," pontos"]})]},w.id))}),l&&r.customerSearch.length>0&&x.length===0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Nenhum cliente encontrado"})]}),i.customerId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Operação *"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>s(w=>({...w,type:"credit"})),className:`flex items-center justify-center space-x-2 px-4 py-3 border rounded-lg transition-all ${r.type==="credit"?"bg-green-50 border-green-300 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Adicionar"})]}),o.jsxs("button",{type:"button",onClick:()=>s(w=>({...w,type:"debit"})),className:`flex items-center justify-center space-x-2 px-4 py-3 border rounded-lg transition-all ${r.type==="debit"?"bg-red-50 border-red-300 text-red-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(zy,{className:"w-4 h-4"}),o.jsx("span",{children:"Remover"})]}),o.jsxs("button",{type:"button",onClick:()=>s(w=>({...w,type:"remove_all"})),className:`flex items-center justify-center space-x-2 px-3 py-3 border rounded-lg transition-all ${r.type==="remove_all"?"bg-red-50 border-red-300 text-red-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(_n,{className:"w-4 h-4"}),o.jsx("span",{children:"Zerar"})]})]})]}),r.type!=="remove_all"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade de Pontos *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Nn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"points",value:r.points,onChange:u,min:"1",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${i.points?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),i.points&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.points})]}),r.type==="remove_all"&&b&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-red-800 mb-2",children:"⚠️ Atenção"}),o.jsxs("p",{className:"text-sm text-red-700",children:["Esta ação irá remover TODOS os ",b.points," pontos do cliente. Esta operação não pode ser desfeita."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição *"}),o.jsx("textarea",{name:"description",value:r.description,onChange:u,rows:3,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none ${i.description?"border-red-500":"border-gray-300"}`,placeholder:r.type==="remove_all"?"Motivo da remoção total de pontos":"Motivo da alteração de pontos"}),i.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description})]}),b&&(r.points||r.type==="remove_all")&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Resumo"}),o.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[o.jsxs("p",{children:["Cliente: ",b.name]}),o.jsxs("p",{children:["Pontos atuais: ",b.points]}),o.jsxs("p",{children:["Pontos após operação: ",r.type==="remove_all"?0:r.type==="credit"?b.points+Number(r.points):b.points-Number(r.points)]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:`flex-1 px-4 py-3 text-white rounded-lg transition-all transform hover:scale-105 ${r.type==="remove_all"?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":r.type==="credit"?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600":"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600"}`,children:r.type==="remove_all"?"Zerar Pontos":r.type==="credit"?"Adicionar Pontos":"Remover Pontos"})]})]})]})})}var Rs={},Gy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},um={},Ge={};let _c;const Yy=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ge.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ge.getSymbolTotalCodewords=function(t){return Yy[t]};Ge.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Ge.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');_c=t};Ge.isKanjiModeEnabled=function(){return typeof _c<"u"};Ge.toSJIS=function(t){return _c(t)};var bo={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,s){if(e.isValid(r))return r;try{return t(r)}catch{return s}}})(bo);function dm(){this.buffer=[],this.length=0}dm.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Xy=dm;function Is(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Is.prototype.set=function(e,t,n,r){const s=e*this.size+t;this.data[s]=n,r&&(this.reservedBit[s]=!0)};Is.prototype.get=function(e,t){return this.data[e*this.size+t]};Is.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Is.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Zy=Is,hm={};(function(e){const t=Ge.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=t(r),a=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-a;return l.push(6),l.reverse()},e.getPositions=function(r){const s=[],i=e.getRowColCoords(r),a=i.length;for(let l=0;l<a;l++)for(let c=0;c<a;c++)l===0&&c===0||l===0&&c===a-1||l===a-1&&c===0||s.push([i[l],i[c]]);return s}})(hm);var fm={};const ev=Ge.getSymbolSize,dd=7;fm.getPositions=function(t){const n=ev(t);return[[0,0],[n-dd,0],[0,n-dd]]};var mm={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const i=s.size;let a=0,l=0,c=0,u=null,d=null;for(let m=0;m<i;m++){l=c=0,u=d=null;for(let x=0;x<i;x++){let g=s.get(m,x);g===u?l++:(l>=5&&(a+=t.N1+(l-5)),u=g,l=1),g=s.get(x,m),g===d?c++:(c>=5&&(a+=t.N1+(c-5)),d=g,c=1)}l>=5&&(a+=t.N1+(l-5)),c>=5&&(a+=t.N1+(c-5))}return a},e.getPenaltyN2=function(s){const i=s.size;let a=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const u=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(u===4||u===0)&&a++}return a*t.N2},e.getPenaltyN3=function(s){const i=s.size;let a=0,l=0,c=0;for(let u=0;u<i;u++){l=c=0;for(let d=0;d<i;d++)l=l<<1&2047|s.get(u,d),d>=10&&(l===1488||l===93)&&a++,c=c<<1&2047|s.get(d,u),d>=10&&(c===1488||c===93)&&a++}return a*t.N3},e.getPenaltyN4=function(s){let i=0;const a=s.data.length;for(let c=0;c<a;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/a/5)-10)*t.N4};function n(r,s,i){switch(r){case e.Patterns.PATTERN000:return(s+i)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(s+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return s*i%2+s*i%3===0;case e.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case e.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(s,i){const a=i.size;for(let l=0;l<a;l++)for(let c=0;c<a;c++)i.isReserved(c,l)||i.xor(c,l,n(s,c,l))},e.getBestMask=function(s,i){const a=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let u=0;u<a;u++){i(u),e.applyMask(u,s);const d=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(u,s),d<c&&(c=d,l=u)}return l}})(mm);var jo={};const Jt=bo,ri=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],si=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];jo.getBlocksCount=function(t,n){switch(n){case Jt.L:return ri[(t-1)*4+0];case Jt.M:return ri[(t-1)*4+1];case Jt.Q:return ri[(t-1)*4+2];case Jt.H:return ri[(t-1)*4+3];default:return}};jo.getTotalCodewordsCount=function(t,n){switch(n){case Jt.L:return si[(t-1)*4+0];case Jt.M:return si[(t-1)*4+1];case Jt.Q:return si[(t-1)*4+2];case Jt.H:return si[(t-1)*4+3];default:return}};var pm={},No={};const ns=new Uint8Array(512),Ki=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)ns[n]=t,Ki[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)ns[n]=ns[n-255]})();No.log=function(t){if(t<1)throw new Error("log("+t+")");return Ki[t]};No.exp=function(t){return ns[t]};No.mul=function(t,n){return t===0||n===0?0:ns[Ki[t]+Ki[n]]};(function(e){const t=No;e.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let a=0;a<r.length;a++)for(let l=0;l<s.length;l++)i[a+l]^=t.mul(r[a],s[l]);return i},e.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const a=i[0];for(let c=0;c<s.length;c++)i[c]^=t.mul(s[c],a);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=e.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(pm);const gm=pm;function kc(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}kc.prototype.initialize=function(t){this.degree=t,this.genPoly=gm.generateECPolynomial(this.degree)};kc.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=gm.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var tv=kc,xm={},dn={},Sc={};Sc.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var jt={};const ym="[0-9]+",nv="[A-Z $%*+\\-./:]+";let js="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";js=js.replace(/u/g,"\\u");const rv="(?:(?![A-Z0-9 $%*+\\-./:]|"+js+`)(?:.|[\r
]))+`;jt.KANJI=new RegExp(js,"g");jt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");jt.BYTE=new RegExp(rv,"g");jt.NUMERIC=new RegExp(ym,"g");jt.ALPHANUMERIC=new RegExp(nv,"g");const sv=new RegExp("^"+js+"$"),iv=new RegExp("^"+ym+"$"),ov=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");jt.testKanji=function(t){return sv.test(t)};jt.testNumeric=function(t){return iv.test(t)};jt.testAlphanumeric=function(t){return ov.test(t)};(function(e){const t=Sc,n=jt;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,a){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?i.ccBits[0]:a<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(i,a){if(e.isValid(i))return i;try{return r(i)}catch{return a}}})(dn);(function(e){const t=Ge,n=jo,r=bo,s=dn,i=Sc,a=7973,l=t.getBCHDigit(a);function c(x,g,v){for(let b=1;b<=40;b++)if(g<=e.getCapacity(b,v,x))return b}function u(x,g){return s.getCharCountIndicator(x,g)+4}function d(x,g){let v=0;return x.forEach(function(b){const w=u(b.mode,g);v+=w+b.getBitsLength()}),v}function m(x,g){for(let v=1;v<=40;v++)if(d(x,v)<=e.getCapacity(v,g,s.MIXED))return v}e.from=function(g,v){return i.isValid(g)?parseInt(g,10):v},e.getCapacity=function(g,v,b){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=s.BYTE);const w=t.getSymbolTotalCodewords(g),h=n.getTotalCodewordsCount(g,v),p=(w-h)*8;if(b===s.MIXED)return p;const f=p-u(b,g);switch(b){case s.NUMERIC:return Math.floor(f/10*3);case s.ALPHANUMERIC:return Math.floor(f/11*2);case s.KANJI:return Math.floor(f/13);case s.BYTE:default:return Math.floor(f/8)}},e.getBestVersionForData=function(g,v){let b;const w=r.from(v,r.M);if(Array.isArray(g)){if(g.length>1)return m(g,w);if(g.length===0)return 1;b=g[0]}else b=g;return c(b.mode,b.getLength(),w)},e.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let v=g<<12;for(;t.getBCHDigit(v)-l>=0;)v^=a<<t.getBCHDigit(v)-l;return g<<12|v}})(xm);var vm={};const gl=Ge,wm=1335,av=21522,hd=gl.getBCHDigit(wm);vm.getEncodedBits=function(t,n){const r=t.bit<<3|n;let s=r<<10;for(;gl.getBCHDigit(s)-hd>=0;)s^=wm<<gl.getBCHDigit(s)-hd;return(r<<10|s)^av};var bm={};const lv=dn;function br(e){this.mode=lv.NUMERIC,this.data=e.toString()}br.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};br.prototype.getLength=function(){return this.data.length};br.prototype.getBitsLength=function(){return br.getBitsLength(this.data.length)};br.prototype.write=function(t){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),t.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),t.put(s,i*3+1))};var cv=br;const uv=dn,la=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function jr(e){this.mode=uv.ALPHANUMERIC,this.data=e}jr.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};jr.prototype.getLength=function(){return this.data.length};jr.prototype.getBitsLength=function(){return jr.getBitsLength(this.data.length)};jr.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=la.indexOf(this.data[n])*45;r+=la.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(la.indexOf(this.data[n]),6)};var dv=jr;const hv=dn;function Nr(e){this.mode=hv.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Nr.getBitsLength=function(t){return t*8};Nr.prototype.getLength=function(){return this.data.length};Nr.prototype.getBitsLength=function(){return Nr.getBitsLength(this.data.length)};Nr.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var fv=Nr;const mv=dn,pv=Ge;function _r(e){this.mode=mv.KANJI,this.data=e}_r.getBitsLength=function(t){return t*13};_r.prototype.getLength=function(){return this.data.length};_r.prototype.getBitsLength=function(){return _r.getBitsLength(this.data.length)};_r.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=pv.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var gv=_r,jm={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,s){var i={},a={};a[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var c,u,d,m,x,g,v,b,w;!l.empty();){c=l.pop(),u=c.value,m=c.cost,x=n[u]||{};for(d in x)x.hasOwnProperty(d)&&(g=x[d],v=m+g,b=a[d],w=typeof a[d]>"u",(w||b>v)&&(a[d]=v,l.push(d,v),i[d]=u))}if(typeof s<"u"&&typeof a[s]>"u"){var h=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(h)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=t.single_source_shortest_paths(n,r,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(jm);var xv=jm.exports;(function(e){const t=dn,n=cv,r=dv,s=fv,i=gv,a=jt,l=Ge,c=xv;function u(h){return unescape(encodeURIComponent(h)).length}function d(h,p,f){const y=[];let N;for(;(N=h.exec(f))!==null;)y.push({data:N[0],index:N.index,mode:p,length:N[0].length});return y}function m(h){const p=d(a.NUMERIC,t.NUMERIC,h),f=d(a.ALPHANUMERIC,t.ALPHANUMERIC,h);let y,N;return l.isKanjiModeEnabled()?(y=d(a.BYTE,t.BYTE,h),N=d(a.KANJI,t.KANJI,h)):(y=d(a.BYTE_KANJI,t.BYTE,h),N=[]),p.concat(f,y,N).sort(function(_,C){return _.index-C.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function x(h,p){switch(p){case t.NUMERIC:return n.getBitsLength(h);case t.ALPHANUMERIC:return r.getBitsLength(h);case t.KANJI:return i.getBitsLength(h);case t.BYTE:return s.getBitsLength(h)}}function g(h){return h.reduce(function(p,f){const y=p.length-1>=0?p[p.length-1]:null;return y&&y.mode===f.mode?(p[p.length-1].data+=f.data,p):(p.push(f),p)},[])}function v(h){const p=[];for(let f=0;f<h.length;f++){const y=h[f];switch(y.mode){case t.NUMERIC:p.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:p.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:p.push([y,{data:y.data,mode:t.BYTE,length:u(y.data)}]);break;case t.BYTE:p.push([{data:y.data,mode:t.BYTE,length:u(y.data)}])}}return p}function b(h,p){const f={},y={start:{}};let N=["start"];for(let k=0;k<h.length;k++){const _=h[k],C=[];for(let O=0;O<_.length;O++){const R=_[O],H=""+k+O;C.push(H),f[H]={node:R,lastCount:0},y[H]={};for(let Y=0;Y<N.length;Y++){const S=N[Y];f[S]&&f[S].node.mode===R.mode?(y[S][H]=x(f[S].lastCount+R.length,R.mode)-x(f[S].lastCount,R.mode),f[S].lastCount+=R.length):(f[S]&&(f[S].lastCount=R.length),y[S][H]=x(R.length,R.mode)+4+t.getCharCountIndicator(R.mode,p))}}N=C}for(let k=0;k<N.length;k++)y[N[k]].end=0;return{map:y,table:f}}function w(h,p){let f;const y=t.getBestModeForData(h);if(f=t.from(p,y),f!==t.BYTE&&f.bit<y.bit)throw new Error('"'+h+'" cannot be encoded with mode '+t.toString(f)+`.
 Suggested mode is: `+t.toString(y));switch(f===t.KANJI&&!l.isKanjiModeEnabled()&&(f=t.BYTE),f){case t.NUMERIC:return new n(h);case t.ALPHANUMERIC:return new r(h);case t.KANJI:return new i(h);case t.BYTE:return new s(h)}}e.fromArray=function(p){return p.reduce(function(f,y){return typeof y=="string"?f.push(w(y,null)):y.data&&f.push(w(y.data,y.mode)),f},[])},e.fromString=function(p,f){const y=m(p,l.isKanjiModeEnabled()),N=v(y),k=b(N,f),_=c.find_path(k.map,"start","end"),C=[];for(let O=1;O<_.length-1;O++)C.push(k.table[_[O]].node);return e.fromArray(g(C))},e.rawSplit=function(p){return e.fromArray(m(p,l.isKanjiModeEnabled()))}})(bm);const _o=Ge,ca=bo,yv=Xy,vv=Zy,wv=hm,bv=fm,xl=mm,yl=jo,jv=tv,Qi=xm,Nv=vm,_v=dn,ua=bm;function kv(e,t){const n=e.size,r=bv.getPositions(t);for(let s=0;s<r.length;s++){const i=r[s][0],a=r[s][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||n<=i+l))for(let c=-1;c<=7;c++)a+c<=-1||n<=a+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(i+l,a+c,!0,!0):e.set(i+l,a+c,!1,!0))}}function Sv(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function Cv(e,t){const n=wv.getPositions(t);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a===-2||a===2||l===-2||l===2||a===0&&l===0?e.set(s+a,i+l,!0,!0):e.set(s+a,i+l,!1,!0)}}function Ev(e,t){const n=e.size,r=Qi.getEncodedBits(t);let s,i,a;for(let l=0;l<18;l++)s=Math.floor(l/3),i=l%3+n-8-3,a=(r>>l&1)===1,e.set(s,i,a,!0),e.set(i,s,a,!0)}function da(e,t,n){const r=e.size,s=Nv.getEncodedBits(t,n);let i,a;for(i=0;i<15;i++)a=(s>>i&1)===1,i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(r-15+i,8,a,!0),i<8?e.set(8,r-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(r-8,8,1,!0)}function Pv(e,t){const n=e.size;let r=-1,s=n-1,i=7,a=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(s,l-c)){let u=!1;a<t.length&&(u=(t[a]>>>i&1)===1),e.set(s,l-c,u),i--,i===-1&&(a++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function Tv(e,t,n){const r=new yv;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),_v.getCharCountIndicator(c.mode,e)),c.write(r)});const s=_o.getSymbolTotalCodewords(e),i=yl.getTotalCodewordsCount(e,t),a=(s-i)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(a-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return Av(r,e,t)}function Av(e,t,n){const r=_o.getSymbolTotalCodewords(t),s=yl.getTotalCodewordsCount(t,n),i=r-s,a=yl.getBlocksCount(t,n),l=r%a,c=a-l,u=Math.floor(r/a),d=Math.floor(i/a),m=d+1,x=u-d,g=new jv(x);let v=0;const b=new Array(a),w=new Array(a);let h=0;const p=new Uint8Array(e.buffer);for(let _=0;_<a;_++){const C=_<c?d:m;b[_]=p.slice(v,v+C),w[_]=g.encode(b[_]),v+=C,h=Math.max(h,C)}const f=new Uint8Array(r);let y=0,N,k;for(N=0;N<h;N++)for(k=0;k<a;k++)N<b[k].length&&(f[y++]=b[k][N]);for(N=0;N<x;N++)for(k=0;k<a;k++)f[y++]=w[k][N];return f}function Rv(e,t,n,r){let s;if(Array.isArray(e))s=ua.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const d=ua.rawSplit(e);u=Qi.getBestVersionForData(d,n)}s=ua.fromString(e,u||40)}else throw new Error("Invalid data");const i=Qi.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const a=Tv(t,n,s),l=_o.getSymbolSize(t),c=new vv(l);return kv(c,t),Sv(c),Cv(c,t),da(c,n,0),t>=7&&Ev(c,t),Pv(c,a),isNaN(r)&&(r=xl.getBestMask(c,da.bind(null,c,n))),xl.applyMask(r,c),da(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:s}}um.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=ca.M,s,i;return typeof n<"u"&&(r=ca.from(n.errorCorrectionLevel,ca.M),s=Qi.from(n.version),i=xl.from(n.maskPattern),n.toSJISFunc&&_o.setToSJISFunction(n.toSJISFunc)),Rv(t,s,r,i)};var Nm={},Cc={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:i,scale:i?4:a,margin:s,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},e.getImageWidth=function(r,s){const i=e.getScale(r,s);return Math.floor((r+s.margin*2)*i)},e.qrToImageData=function(r,s,i){const a=s.modules.size,l=s.modules.data,c=e.getScale(a,i),u=Math.floor((a+i.margin*2)*c),d=i.margin*c,m=[i.color.light,i.color.dark];for(let x=0;x<u;x++)for(let g=0;g<u;g++){let v=(x*u+g)*4,b=i.color.light;if(x>=d&&g>=d&&x<u-d&&g<u-d){const w=Math.floor((x-d)/c),h=Math.floor((g-d)/c);b=m[l[w*a+h]?1:0]}r[v++]=b.r,r[v++]=b.g,r[v++]=b.b,r[v]=b.a}}})(Cc);(function(e){const t=Cc;function n(s,i,a){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=a,i.width=a,i.style.height=a+"px",i.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,a,l){let c=l,u=a;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),a||(u=r()),c=t.getOptions(c);const d=t.getImageWidth(i.modules.size,c),m=u.getContext("2d"),x=m.createImageData(d,d);return t.qrToImageData(x.data,i,c),n(m,u,d),m.putImageData(x,0,0),u},e.renderToDataURL=function(i,a,l){let c=l;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),c||(c={});const u=e.render(i,a,c),d=c.type||"image/png",m=c.rendererOpts||{};return u.toDataURL(d,m.quality)}})(Nm);var _m={};const Iv=Cc;function fd(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function ha(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function Dv(e,t,n){let r="",s=0,i=!1,a=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);!c&&!i&&(i=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(r+=i?ha("M",c+n,.5+u+n):ha("m",s,0),s=0,i=!1),c+1<t&&e[l+1]||(r+=ha("h",a),a=0)):s++}return r}_m.render=function(t,n,r){const s=Iv.getOptions(n),i=t.modules.size,a=t.modules.data,l=i+s.margin*2,c=s.color.light.a?"<path "+fd(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+fd(s.color.dark,"stroke")+' d="'+Dv(a,i,s.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof r=="function"&&r(null,x),x};const Ov=Gy,vl=um,km=Nm,Lv=_m;function Ec(e,t,n,r,s){const i=[].slice.call(arguments,1),a=i.length,l=typeof i[a-1]=="function";if(!l&&!Ov())throw new Error("Callback required as last argument");if(l){if(a<2)throw new Error("Too few arguments provided");a===2?(s=n,n=t,t=r=void 0):a===3&&(t.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(n=t,t=r=void 0):a===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,u){try{const d=vl.create(n,r);c(e(d,t,r))}catch(d){u(d)}})}try{const c=vl.create(n,r);s(null,e(c,t,r))}catch(c){s(c)}}Rs.create=vl.create;Rs.toCanvas=Ec.bind(null,km.render);Rs.toDataURL=Ec.bind(null,km.renderToDataURL);Rs.toString=Ec.bind(null,function(e,t,n){return Lv.render(e,n)});function $v({onClose:e}){const{state:t}=ve(),[n,r]=T.useState(""),[s,i]=T.useState(!1),a=t.currentCompany,l=`${window.location.origin}/register/${a==null?void 0:a.slug}`;T.useEffect(()=>{l&&(async()=>{try{const m=await Rs.toDataURL(l,{width:300,margin:2,color:{dark:"#1f2937",light:"#ffffff"}});r(m)}catch(m){console.error("Erro ao gerar QR Code:",m)}})()},[l]);const c=async()=>{try{await navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3)}catch(d){console.error("Erro ao copiar URL:",d)}},u=()=>{if(n){const d=document.createElement("a");d.download=`qr-code-${a==null?void 0:a.slug}.png`,d.href=n,d.click()}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"QR Code de Cadastro"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-4",children:n?o.jsx("img",{src:n,alt:"QR Code",className:"mx-auto rounded-lg shadow-sm"}):o.jsx("div",{className:"w-[300px] h-[300px] mx-auto bg-gray-200 rounded-lg flex items-center justify-center",children:o.jsx(rm,{className:"w-16 h-16 text-gray-400"})})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a==null?void 0:a.name}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Escaneie o QR Code para se cadastrar automaticamente"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL de Cadastro"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm"}),o.jsx("button",{onClick:c,className:"flex items-center space-x-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:s?o.jsxs(o.Fragment,{children:[o.jsx(Iy,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Copiado!"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dy,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Copiar"})]})})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Como usar:"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("li",{children:"• Clientes escaneiam o QR Code com a câmera do celular"}),o.jsx("li",{children:"• São direcionados para uma página de cadastro"}),o.jsx("li",{children:"• Após o cadastro, já têm acesso ao sistema"}),o.jsx("li",{children:"• Podem acompanhar pontos e fazer solicitações"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar"}),o.jsxs("button",{onClick:u,disabled:!n,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50",children:[o.jsx(Ly,{className:"w-4 h-4"}),o.jsx("span",{children:"Baixar QR"})]})]})]})]})})}function Uv({type:e,onClose:t}){const{state:n}=ve(),r=n.currentCompany,s=n.loyaltyRequests.filter(h=>h.companyId===(r==null?void 0:r.id)),i=n.pointsConfigs.find(h=>h.companyId===(r==null?void 0:r.id))||{reaisPerPoint:10,companyId:(r==null?void 0:r.id)||""},a=s.length,l=s.filter(h=>h.status==="pending").length,c=s.filter(h=>h.status==="approved"||h.status==="available_for_pickup"||h.status==="completed").length,u=s.filter(h=>h.status==="rejected").length;s.filter(h=>h.status==="completed").length;const d=s.filter(h=>h.status==="approved"||h.status==="available_for_pickup"||h.status==="completed"),m=d.reduce((h,p)=>h+p.pointsUsed,0),x=m*(i.reaisPerPoint/100),g=d.reduce((h,p)=>{const f=p.productName;return h[f]||(h[f]={count:0,totalPoints:0}),h[f].count++,h[f].totalPoints+=p.pointsUsed,h},{}),v=Object.entries(g).sort(([,h],[,p])=>p.count-h.count).slice(0,5),b=d.reduce((h,p)=>{const f=new Date(p.requestDate).toLocaleDateString("pt-BR",{year:"numeric",month:"long"});return h[f]||(h[f]={count:0,totalPoints:0}),h[f].count++,h[f].totalPoints+=p.pointsUsed,h},{}),w=Object.entries(b).sort(([h],[p])=>new Date(h).getTime()-new Date(p).getTime()).slice(-6);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e==="requests"?"Estatísticas de Solicitações":"Custo das Solicitações"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-6",children:e==="requests"?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:a})]}),o.jsx(Wt,{className:"w-8 h-8 text-blue-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Pendentes"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:l})]}),o.jsx(Qt,{className:"w-8 h-8 text-yellow-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-600",children:"Aprovadas"}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:c})]}),o.jsx(Nn,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-red-600",children:"Rejeitadas"}),o.jsx("p",{className:"text-2xl font-bold text-red-900",children:u})]}),o.jsx(Ke,{className:"w-8 h-8 text-red-500"})]})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Produtos Mais Solicitados"}),o.jsx("div",{className:"space-y-3",children:v.length>0?v.map(([h,p],f)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-bold text-blue-600",children:f+1})}),o.jsx("span",{className:"font-medium text-gray-900",children:h})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[p.count," solicitações"]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[p.totalPoints," pontos"]})]})]},h)):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma solicitação aprovada ainda"})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Evolução Mensal"}),o.jsx("div",{className:"space-y-3",children:w.length>0?w.map(([h,p])=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-900",children:h}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[p.count," solicitações"]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[p.totalPoints," pontos"]})]})]},h)):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum dado mensal disponível"})})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Total de Pontos"}),o.jsx("p",{className:"text-2xl font-bold text-purple-900",children:m.toLocaleString()})]}),o.jsx(Nn,{className:"w-8 h-8 text-purple-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-600",children:"Custo Estimado"}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:Ee(x)})]}),o.jsx(Rn,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Média por Solicitação"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:c>0?Math.round(m/c):0}),o.jsx("p",{className:"text-xs text-blue-600",children:"pontos"})]}),o.jsx(Qt,{className:"w-8 h-8 text-blue-500"})]})})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Configuração Atual"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["Cada R$ ",i.reaisPerPoint.toFixed(2)," gastos = 1 ponto"]}),o.jsxs("p",{className:"text-sm text-blue-700",children:["Valor estimado por ponto: R$ ",(i.reaisPerPoint/100).toFixed(2)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Custo por Produto"}),o.jsx("div",{className:"space-y-3",children:v.length>0?v.map(([h,p])=>{const f=p.totalPoints*(i.reaisPerPoint/100);return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900",children:h}),o.jsxs("div",{className:"text-xs text-gray-500",children:[p.count," solicitações"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ee(f)}),o.jsxs("div",{className:"text-xs text-gray-500",children:[p.totalPoints," pontos"]})]})]},h)}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma solicitação aprovada ainda"})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Custo Mensal"}),o.jsx("div",{className:"space-y-3",children:w.length>0?w.map(([h,p])=>{const f=p.totalPoints*(i.reaisPerPoint/100);return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-900",children:h}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ee(f)}),o.jsxs("div",{className:"text-xs text-gray-500",children:[p.totalPoints," pontos"]})]})]},h)}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum dado mensal disponível"})})]})]})}),o.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:o.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:"Fechar"})})]})})}function Mv({onClose:e}){const{state:t,dispatch:n}=ve(),r=t.currentCompany,s=t.webhookConfigs.find(w=>w.companyId===(r==null?void 0:r.id)),[i,a]=T.useState(s||{companyId:(r==null?void 0:r.id)||"",purchases:{enabled:!1,url:""},requests:{enabled:!1,url:""},birthdays:{enabled:!1,url:"",message:"Olá, {nome_do_cliente}! Vimos que é seu aniversário e gostaríamos de informar que disponibilizamos {valor_de_creditos} pontos para você! Que seu aniversário seja ainda mais completo!",creditsAmount:100,daysInAdvance:0}}),[l,c]=T.useState({}),u=w=>{a(h=>({...h,[w]:{...h[w],enabled:!h[w].enabled}}))},d=(w,h)=>{a(p=>({...p,[w]:{...p[w],url:h}})),l[`${w}_url`]&&c(p=>({...p,[`${w}_url`]:""}))},m=(w,h)=>{a(p=>({...p,birthdays:{...p.birthdays,[w]:h}})),l[`birthdays_${w}`]&&c(p=>({...p,[`birthdays_${w}`]:""}))},x=w=>{try{return new URL(w),w.startsWith("http://")||w.startsWith("https://")}catch{return!1}},g=()=>{const w={};return i.purchases.enabled&&!x(i.purchases.url)&&(w.purchases_url="URL inválida para webhook de compras"),i.requests.enabled&&!x(i.requests.url)&&(w.requests_url="URL inválida para webhook de solicitações"),i.birthdays.enabled&&(x(i.birthdays.url)||(w.birthdays_url="URL inválida para webhook de aniversários"),i.birthdays.message.trim()||(w.birthdays_message="Mensagem de aniversário é obrigatória"),i.birthdays.creditsAmount<=0&&(w.birthdays_creditsAmount="Quantidade de créditos deve ser maior que zero"),(i.birthdays.daysInAdvance<0||i.birthdays.daysInAdvance>30)&&(w.birthdays_daysInAdvance="Dias de antecedência deve ser entre 0 e 30")),c(w),Object.keys(w).length===0},v=()=>{g()&&(n({type:"UPDATE_WEBHOOK_CONFIG",payload:i}),e())},b=async w=>{var p;const h=i[w].url;if(h){try{new URL(h)}catch{alert("URL inválida. Verifique o formato da URL.");return}try{let f={};switch(w){case"purchases":f={type:"purchase",customer:{name:"João Silva",phone:"(11) 99999-9999"},purchase:{amount:150,points_earned:15},store:{name:r==null?void 0:r.name},timestamp:new Date().toISOString()};break;case"requests":f={type:"request_approved",customer:{name:"Maria Santos",phone:"(11) 88888-8888"},request:{product:"Produto Teste",approved_at:new Date().toISOString(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()},store:{name:r==null?void 0:r.name}};break;case"birthdays":f={type:"birthday",customer:{name:"Ana Costa",phone:"(11) 77777-7777",last_purchase:"2024-01-15"},message:i.birthdays.message.replace("{nome_do_cliente}","Ana Costa").replace("{valor_de_creditos}",i.birthdays.creditsAmount.toString()),credits_amount:i.birthdays.creditsAmount,store:{name:r==null?void 0:r.name}};break}const y=(p=document.querySelector(`button[onclick*="testWebhook('${w}')"]`))==null?void 0:p.textContent,N=document.querySelector(`button[onclick*="testWebhook('${w}')"]`);N&&(N.textContent="Testando...",N.disabled=!0);const k=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"Fideliza.AI-Webhook-Test/1.0"},body:JSON.stringify(f),mode:"no-cors"});N&&(N.textContent=y||"Testar",N.disabled=!1),alert(`✅ Webhook enviado com sucesso!

Dados enviados para: ${h}

📋 Payload:
${JSON.stringify(f,null,2)}`)}catch(f){const y=document.querySelector(`button[onclick*="testWebhook('${w}')"]`);y&&(y.textContent="Testar",y.disabled=!1);let N="Erro desconhecido";f instanceof TypeError&&f.message.includes("Failed to fetch")?N=`❌ Erro de conexão:

• Verifique se a URL está correta
• Certifique-se de que o servidor está online
• Verifique se o servidor aceita requisições CORS
• Teste a URL em uma ferramenta como Postman

URL testada: ${h}`:f instanceof Error&&(N=`❌ Erro: ${f.message}`),alert(N)}}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(sm,{className:"w-6 h-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Configuração de Webhooks"})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(hr,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Webhook - Compras"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Enviado quando uma venda é registrada"})]})]}),o.jsx("button",{onClick:()=>u("purchases"),className:"flex items-center space-x-2",children:i.purchases.enabled?o.jsx(aa,{className:"w-8 h-8 text-green-500"}):o.jsx(oa,{className:"w-8 h-8 text-gray-400"})})]}),i.purchases.enabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"url",value:i.purchases.url,onChange:w=>d("purchases",w.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ${l.purchases_url?"border-red-500":"border-gray-300"}`,placeholder:"https://sua-api.com/webhook/compras"}),o.jsx("button",{onClick:()=>b("purchases"),disabled:!i.purchases.url,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Testar"})]}),l.purchases_url&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.purchases_url})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Enviados:"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[o.jsx("li",{children:"• Nome do cliente"}),o.jsx("li",{children:"• Telefone do cliente"}),o.jsx("li",{children:"• Valor da compra"}),o.jsx("li",{children:"• Quantidade de pontos ganhos"}),o.jsx("li",{children:"• Nome da loja"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx($y,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Webhook - Solicitações"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Enviado quando uma solicitação é aprovada"})]})]}),o.jsx("button",{onClick:()=>u("requests"),className:"flex items-center space-x-2",children:i.requests.enabled?o.jsx(aa,{className:"w-8 h-8 text-blue-500"}):o.jsx(oa,{className:"w-8 h-8 text-gray-400"})})]}),i.requests.enabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"url",value:i.requests.url,onChange:w=>d("requests",w.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.requests_url?"border-red-500":"border-gray-300"}`,placeholder:"https://sua-api.com/webhook/solicitacoes"}),o.jsx("button",{onClick:()=>b("requests"),disabled:!i.requests.url,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Testar"})]}),l.requests_url&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.requests_url})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Enviados:"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[o.jsx("li",{children:"• Nome do cliente"}),o.jsx("li",{children:"• Telefone do cliente"}),o.jsx("li",{children:"• Nome da loja"}),o.jsx("li",{children:"• Produto solicitado"}),o.jsx("li",{children:"• Horário da aprovação"}),o.jsx("li",{children:"• Horário máximo para retirada"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(xi,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Webhook - Aniversários"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Enviado em aniversários de clientes"})]})]}),o.jsx("button",{onClick:()=>u("birthdays"),className:"flex items-center space-x-2",children:i.birthdays.enabled?o.jsx(aa,{className:"w-8 h-8 text-purple-500"}):o.jsx(oa,{className:"w-8 h-8 text-gray-400"})})]}),i.birthdays.enabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"url",value:i.birthdays.url,onChange:w=>d("birthdays",w.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.birthdays_url?"border-red-500":"border-gray-300"}`,placeholder:"https://sua-api.com/webhook/aniversarios"}),o.jsx("button",{onClick:()=>b("birthdays"),disabled:!i.birthdays.url,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Testar"})]}),l.birthdays_url&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_url})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Créditos de Aniversário *"}),o.jsx("input",{type:"number",value:i.birthdays.creditsAmount,onChange:w=>m("creditsAmount",Number(w.target.value)),min:"1",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.birthdays_creditsAmount?"border-red-500":"border-gray-300"}`,placeholder:"100"}),l.birthdays_creditsAmount&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_creditsAmount})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dias de Antecedência *"}),o.jsxs("select",{value:i.birthdays.daysInAdvance,onChange:w=>m("daysInAdvance",Number(w.target.value)),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.birthdays_daysInAdvance?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:0,children:"No dia do aniversário"}),o.jsx("option",{value:1,children:"1 dia antes"}),o.jsx("option",{value:3,children:"3 dias antes"}),o.jsx("option",{value:7,children:"1 semana antes"}),o.jsx("option",{value:15,children:"15 dias antes"}),o.jsx("option",{value:30,children:"30 dias antes"})]}),l.birthdays_daysInAdvance&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_daysInAdvance})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensagem Personalizada *"}),o.jsx("textarea",{value:i.birthdays.message,onChange:w=>m("message",w.target.value),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none ${l.birthdays_message?"border-red-500":"border-gray-300"}`,placeholder:"Digite sua mensagem personalizada..."}),l.birthdays_message&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_message}),o.jsxs("div",{className:"mt-2 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"Variáveis Disponíveis:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[o.jsxs("div",{children:[o.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{nome_do_cliente}"})," - Nome do cliente"]}),o.jsxs("div",{children:[o.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{valor_de_creditos}"})," - Quantidade de créditos"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Enviados:"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[o.jsx("li",{children:"• Nome do cliente"}),o.jsx("li",{children:"• Telefone do cliente"}),o.jsx("li",{children:"• Data da última venda"}),o.jsx("li",{children:"• Mensagem personalizada"}),o.jsx("li",{children:"• Quantidade de créditos"}),o.jsx("li",{children:"• Nome da loja"})]})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[o.jsx("button",{onClick:e,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsxs("button",{onClick:v,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(By,{className:"w-4 h-4"}),o.jsx("span",{children:"Salvar Configurações"})]})]})]})})}function zv({onClose:e}){var k;const{state:t,dispatch:n}=ve(),r=t.pointsConfigs.find(_=>{var C;return _.companyId===((C=t.currentCompany)==null?void 0:C.id)})||{reaisPerPoint:10,companyId:((k=t.currentCompany)==null?void 0:k.id)||""},[s,i]=T.useState({customerId:"",customerSearch:"",amount:"",description:"",products:"",usePointsDiscount:!1,pointsToUse:""}),[a,l]=T.useState({}),[c,u]=T.useState(!1),d=_=>{const{name:C,value:O,type:R}=_.target,H=R==="checkbox"?_.target.checked:O;i(Y=>({...Y,[C]:H})),a[C]&&l(Y=>({...Y,[C]:""}))},m=_=>{const C=_.target.value;i(O=>({...O,customerSearch:C,customerId:""})),u(C.length>0),a.customerId&&l(O=>({...O,customerId:""}))},x=_=>{i(C=>({...C,customerId:_.id,customerSearch:`${_.name} - ${_.cpf}`})),u(!1)},g=t.customers.filter(_=>{var C;return _.companyId===((C=t.currentCompany)==null?void 0:C.id)}).filter(_=>{const C=s.customerSearch.toLowerCase();return _.name.toLowerCase().includes(C)||_.cpf.includes(C)||_.email.toLowerCase().includes(C)}).slice(0,10),v=()=>{const _={};if(s.customerId||(_.customerId="Cliente é obrigatório"),(!s.amount||Number(s.amount)<=0)&&(_.amount="Valor deve ser maior que zero"),s.usePointsDiscount){const C=t.customers.find(R=>R.id===s.customerId),O=Number(s.pointsToUse);!s.pointsToUse||O<=0?_.pointsToUse="Quantidade de pontos deve ser maior que zero":C&&O>C.points&&(_.pointsToUse="Cliente não possui pontos suficientes")}return l(_),Object.keys(_).length===0},b=_=>{var A,D,L;if(_.preventDefault(),!v())return;const C=t.customers.find(q=>q.id===s.customerId);if(!C)return;const O=Number(s.amount),R=s.usePointsDiscount?Number(s.pointsToUse):0,H=R*(r.reaisPerPoint/100),Y=Math.max(0,O-H),S=Math.floor(Y/r.reaisPerPoint),W={id:He(),companyId:((A=t.currentCompany)==null?void 0:A.id)||"",customerId:C.id,customerName:C.name,amount:Y,pointsEarned:S,date:new Date,description:s.description.trim(),products:s.products.trim(),originalAmount:O,pointsUsedAsDiscount:R,discountAmount:H};let P=C.points+S;s.usePointsDiscount&&(P-=R);const $={...C,points:P},K={id:He(),companyId:((D=t.currentCompany)==null?void 0:D.id)||"",customerId:C.id,customerName:C.name,type:"earned",points:S,description:`Compra: ${Ee(Y)}`,date:new Date};if(n({type:"ADD_SALE",payload:W}),n({type:"UPDATE_CUSTOMER",payload:$}),n({type:"ADD_POINTS_TRANSACTION",payload:K}),s.usePointsDiscount&&R>0){const q={id:He(),companyId:((L=t.currentCompany)==null?void 0:L.id)||"",customerId:C.id,customerName:C.name,type:"spent",points:R,description:`Desconto na compra: ${Ee(H)}`,date:new Date};n({type:"ADD_POINTS_TRANSACTION",payload:q})}e()},w=t.customers.find(_=>_.id===s.customerId),h=Number(s.amount)||0,p=s.usePointsDiscount?Number(s.pointsToUse):0,f=p*(r.reaisPerPoint/100),y=Math.max(0,h-f),N=Math.floor(y/r.reaisPerPoint);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nova Venda - Financeiro"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),o.jsxs("div",{className:"relative",children:[o.jsx(As,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:s.customerSearch,onChange:m,onFocus:()=>u(s.customerSearch.length>0),className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.customerId?"border-red-500":"border-gray-300"}`,placeholder:"Busque por nome, CPF ou email..."}),c&&g.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(_=>o.jsxs("button",{type:"button",onClick:()=>x(_),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[_.cpf," • ",_.email," • ",_.points," pontos"]})]},_.id))}),c&&s.customerSearch.length>0&&g.length===0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Nenhum cliente encontrado"})]}),a.customerId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Original da Venda *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Rn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:d,min:"0",step:"0.01",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.amount?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),a.amount&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.amount})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produtos Comprados"}),o.jsxs("div",{className:"relative",children:[o.jsx(Wt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"products",value:s.products,onChange:d,rows:2,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Liste os produtos comprados"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),o.jsxs("div",{className:"relative",children:[o.jsx(bc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"description",value:s.description,onChange:d,rows:2,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Descrição da venda (opcional)"})]})]}),w&&w.points>0&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx("input",{type:"checkbox",name:"usePointsDiscount",id:"usePointsDiscount",checked:s.usePointsDiscount,onChange:d,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}),o.jsx("label",{htmlFor:"usePointsDiscount",className:"text-sm font-medium text-blue-800",children:"Usar pontos como desconto"})]}),s.usePointsDiscount&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Quantidade de pontos a usar"}),o.jsxs("div",{className:"relative",children:[o.jsx(Fy,{className:"absolute left-3 top-3 h-5 w-5 text-blue-400"}),o.jsx("input",{type:"number",name:"pointsToUse",value:s.pointsToUse,onChange:d,min:"1",max:w.points,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${a.pointsToUse?"border-red-500":"border-blue-300"}`,placeholder:"0"})]}),o.jsxs("p",{className:"mt-1 text-xs text-blue-600",children:["Máximo: ",w.points," pontos disponíveis"]}),a.pointsToUse&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.pointsToUse})]})]}),h>0&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Resumo da Venda"}),o.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Valor original:"}),o.jsx("span",{children:Ee(h)})]}),s.usePointsDiscount&&p>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Desconto (",p," pontos):"]}),o.jsxs("span",{children:["-",Ee(f)]})]}),o.jsxs("div",{className:"flex justify-between font-medium",children:[o.jsx("span",{children:"Valor final:"}),o.jsx("span",{children:Ee(y)})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Pontos a ganhar:"}),o.jsx("span",{children:N})]}),w&&o.jsxs("div",{className:"flex justify-between font-medium",children:[o.jsx("span",{children:"Pontos finais:"}),o.jsx("span",{children:w.points+N-p})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Registrar Venda"})]})]})]})})}function Fv(){const{state:e,dispatch:t}=ve(),[n,r]=T.useState("customers"),[s,i]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(!1),[d,m]=T.useState(!1),[x,g]=T.useState(!1),[v,b]=T.useState(!1),[w,h]=T.useState(null),[p,f]=T.useState(null),[y,N]=T.useState(!1),[k,_]=T.useState(null),[C,O]=T.useState(!1),[R,H]=T.useState(""),[Y,S]=T.useState(!1),[W,P]=T.useState(null),$=e.currentCompany,K=e.plans.find(j=>j.id===($==null?void 0:$.planId));if(!$||!K)return o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[o.jsx(id,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-lg font-medium text-red-800 mb-2",children:"Erro de Configuração"}),o.jsx("p",{className:"text-red-600",children:"Empresa ou plano não encontrado. Entre em contato com o suporte."})]})});const A=e.customers.filter(j=>j.companyId===$.id),D=e.products.filter(j=>j.companyId===$.id),L=e.sales.filter(j=>j.companyId===$.id),q=e.pointsTransactions.filter(j=>j.companyId===$.id),ee=e.pointsConfigs.find(j=>j.companyId===$.id)||{reaisPerPoint:10,companyId:$.id},pe=e.loyaltyRequests.filter(j=>j.companyId===$.id),we=pe.filter(j=>j.status==="pending"),mt=(()=>{const j=new Map;return pe.forEach(z=>{const re=z.productId,De=z.productName;j.has(re)||j.set(re,{id:re,name:De,totalRequests:0,approvedRequests:0,rejectedRequests:0,pendingRequests:0,completedRequests:0,totalPointsUsed:0,lastRequestDate:null});const G=j.get(re);switch(G.totalRequests++,G.totalPointsUsed+=z.pointsUsed,(!G.lastRequestDate||new Date(z.requestDate)>new Date(G.lastRequestDate))&&(G.lastRequestDate=z.requestDate),z.status){case"approved":case"available_for_pickup":G.approvedRequests++;break;case"rejected":G.rejectedRequests++;break;case"pending":G.pendingRequests++;break;case"completed":G.completedRequests++;break}}),Array.from(j.values()).sort((z,re)=>re.totalRequests-z.totalRequests)})(),pt=Hy(A,30),Ds=pt.filter(j=>j.daysUntilBirthday===0),Os=pt.filter(j=>j.daysUntilBirthday<=7&&j.daysUntilBirthday>0),Un=K.maxCustomers!==-1&&A.length>=K.maxCustomers,Mn=K.maxProducts!==-1&&D.length>=K.maxProducts,Sm=[{id:"customers",label:"Clientes",icon:bs},{id:"products",label:"Produtos",icon:hr},{id:"sales",label:"Vendas",icon:od},{id:"financial",label:"Financeiro",icon:Rn},{id:"requests",label:"Solicitações",icon:ni},{id:"recurrence",label:"Recorrências",icon:Qt},{id:"transactions",label:"Transações",icon:Qt},{id:"birthdays",label:"Aniversários",icon:xi},{id:"settings",label:"Configurações",icon:ml}],Cm=[{label:"Total de Clientes",value:`${A.length}${K.maxCustomers!==-1?`/${K.maxCustomers}`:""}`,icon:bs,color:Un?"text-red-600":"text-blue-600",bgColor:Un?"bg-red-100":"bg-blue-100"},{label:"Produtos Ativos",value:`${D.filter(j=>j.available).length}${K.maxProducts!==-1?`/${K.maxProducts}`:""}`,icon:hr,color:Mn?"text-red-600":"text-green-600",bgColor:Mn?"bg-red-100":"bg-green-100"},{label:"Vendas Hoje",value:L.filter(j=>{const z=new Date;return new Date(j.date).toDateString()===z.toDateString()}).length,icon:od,color:"text-pink-600",bgColor:"bg-pink-100"},{label:"Receita Total",value:Ee(L.reduce((j,z)=>j+z.amount,0)),icon:Qt,color:"text-orange-600",bgColor:"bg-orange-100"},{label:"Solicitações Pendentes",value:we.length,icon:ni,color:"text-purple-600",bgColor:"bg-purple-100"}],Em=A.filter(j=>j.name.toLowerCase().includes(R.toLowerCase())||j.email.toLowerCase().includes(R.toLowerCase())||j.cpf.includes(R)),Pm=D.filter(j=>j.name.toLowerCase().includes(R.toLowerCase())||j.description.toLowerCase().includes(R.toLowerCase())),Pc=L.filter(j=>j.customerName.toLowerCase().includes(R.toLowerCase())||j.description&&j.description.toLowerCase().includes(R.toLowerCase())),Tm=q.filter(j=>j.customerName.toLowerCase().includes(R.toLowerCase())||j.description.toLowerCase().includes(R.toLowerCase())),Am=j=>{var De;const z=new Date;z.setHours(z.getHours()+24);const re={...j,status:"available_for_pickup",processedDate:new Date,processedBy:((De=e.currentUser)==null?void 0:De.name)||"Admin",expiresAt:z};t({type:"UPDATE_LOYALTY_REQUEST",payload:re})},Tc=(j,z)=>{var De;if(z){const G=e.customers.find(de=>de.id===j.customerId);if(G){const de={...G,points:G.points+j.pointsUsed};t({type:"UPDATE_CUSTOMER",payload:de});const he={id:He(),companyId:$.id,customerId:G.id,customerName:G.name,type:"credit",points:j.pointsUsed,description:`Devolução: ${j.productName} (solicitação rejeitada)`,date:new Date};t({type:"ADD_POINTS_TRANSACTION",payload:he})}}const re={...j,status:"rejected",processedDate:new Date,processedBy:((De=e.currentUser)==null?void 0:De.name)||"Admin"};t({type:"UPDATE_LOYALTY_REQUEST",payload:re}),S(!1),P(null)},Rm=j=>{var z;if(window.confirm("Marcar como concluído? O produto foi entregue ao cliente?")){const re={...j,status:"completed",processedDate:new Date,processedBy:((z=e.currentUser)==null?void 0:z.name)||"Admin"};t({type:"UPDATE_LOYALTY_REQUEST",payload:re})}},Im=j=>{P(j),S(!0)};_l.useEffect(()=>{const j=()=>{const re=new Date;pe.filter(G=>G.status==="available_for_pickup"&&G.expiresAt&&new Date(G.expiresAt)<=re).forEach(G=>{const de={...G,status:"completed",processedDate:new Date,processedBy:"Sistema (expirado)"};t({type:"UPDATE_LOYALTY_REQUEST",payload:de})})},z=setInterval(j,6e4);return j(),()=>clearInterval(z)},[pe,t]);const Dm=j=>{const z=e.customers.find(De=>De.id===j);if(!z)return;const re=`Tem certeza que deseja excluir o cliente "${z.name}"?

Esta ação irá:
- Remover o cliente permanentemente
- Excluir todas as vendas relacionadas
- Excluir todas as transações de pontos
- Excluir todas as solicitações de produtos

Esta operação NÃO PODE ser desfeita!`;if(window.confirm(re)){const De=e.sales.filter(he=>he.customerId===j),G=e.pointsTransactions.filter(he=>he.customerId===j),de=e.loyaltyRequests.filter(he=>he.customerId===j);De.forEach(he=>{t({type:"DELETE_SALE",payload:he.id})}),G.forEach(he=>{t({type:"DELETE_POINTS_TRANSACTION",payload:he.id})}),de.forEach(he=>{t({type:"DELETE_LOYALTY_REQUEST",payload:he.id})}),t({type:"DELETE_CUSTOMER",payload:j})}},Om=j=>{const z=e.products.find(de=>de.id===j);if(!z)return;const re=e.loyaltyRequests.filter(de=>de.productId===j),De=re.some(de=>de.status==="pending");let G=`Tem certeza que deseja excluir o produto "${z.name}"?`;De&&(G+=`

ATENÇÃO: Este produto possui solicitações pendentes que também serão excluídas.`),re.length>0&&(G+=`

Esta ação irá excluir ${re.length} solicitação(ões) relacionada(s).`),G+=`

Esta operação NÃO PODE ser desfeita!`,window.confirm(G)&&(re.forEach(de=>{if(de.status==="pending"){const he=e.customers.find(ko=>ko.id===de.customerId);if(he){const ko={...he,points:he.points+de.pointsUsed},$m={id:He(),companyId:$.id,customerId:he.id,customerName:he.name,type:"credit",points:de.pointsUsed,description:`Devolução automática: ${z.name} (produto excluído)`,date:new Date};t({type:"UPDATE_CUSTOMER",payload:ko}),t({type:"ADD_POINTS_TRANSACTION",payload:$m})}}t({type:"DELETE_LOYALTY_REQUEST",payload:de.id})}),t({type:"DELETE_PRODUCT",payload:j}))},Lm=j=>{window.confirm("Tem certeza que deseja excluir esta solicitação?")&&t({type:"DELETE_LOYALTY_REQUEST",payload:j.id})};return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 mb-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:$.name}),o.jsxs("p",{className:"text-blue-100 mt-1",children:["Plano: ",K.name]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm text-blue-100",children:"Código de acesso"}),o.jsx("div",{className:"text-lg font-bold",children:$.slug})]})]})}),(Un||Mn)&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(id,{className:"w-5 h-5 text-yellow-600 mr-2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Limite do plano atingido"}),o.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:[Un&&"Você atingiu o limite de clientes do seu plano. ",Mn&&"Você atingiu o limite de produtos do seu plano. ","Considere fazer upgrade para continuar crescendo."]})]})]})}),(Ds.length>0||Os.length>0)&&o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Ry,{className:"w-5 h-5 text-purple-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Notificações de Aniversário"})]}),Ds.length>0&&o.jsx("div",{className:"mb-2",children:o.jsxs("p",{className:"text-sm text-purple-700",children:["🎉 ",o.jsx("strong",{children:"Hoje:"})," ",Ds.map(j=>j.name).join(", ")]})}),Os.length>0&&o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-purple-700",children:["📅 ",o.jsx("strong",{children:"Próximos 7 dias:"})," ",Os.length," aniversário(s)"]})})]}),we.length>0&&o.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ni,{className:"w-5 h-5 text-orange-600 mr-2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Solicitações Pendentes"}),o.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Você tem ",we.length," solicitação(ões) de produtos aguardando aprovação."]})]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Cm.map(j=>{const z=j.icon;return o.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:j.label}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.value})]}),o.jsx("div",{className:`p-3 rounded-lg ${j.bgColor}`,children:o.jsx(z,{className:`w-6 h-6 ${j.color}`})})]})},j.label)})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:Sm.map(j=>{const z=j.icon;return o.jsxs("button",{onClick:()=>r(j.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(z,{className:"w-5 h-5"}),o.jsx("span",{children:j.label})]},j.id)})})}),o.jsxs("div",{className:"p-6",children:[n!=="settings"&&o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(As,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:R,onChange:j=>H(j.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-80"})]}),o.jsxs("div",{className:"flex space-x-3",children:[n==="customers"&&o.jsxs("button",{onClick:()=>i(!0),disabled:Un,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${Un?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Novo Cliente"})]}),n==="products"&&o.jsxs("button",{onClick:()=>l(!0),disabled:Mn,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${Mn?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Novo Produto"})]}),n==="sales"&&o.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Nova Venda"})]}),n==="financial"&&o.jsxs("button",{onClick:()=>b(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Kt,{className:"w-4 h-4"}),o.jsx("span",{children:"Nova Venda"})]})]})]}),n==="customers"&&o.jsx("div",{className:"space-y-4",children:Em.map(j=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[j.email," • ",j.cpf]}),o.jsx("p",{className:"text-sm text-gray-500",children:j.phone}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[j.points," pontos"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:[pl(new Date(j.birthDate))," anos"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Desde ",ut(new Date(j.createdAt))]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>h(j),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Hi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Dm(j.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(_n,{className:"w-4 h-4"})})]})]},j.id))}),n==="products"&&o.jsx("div",{className:"space-y-4",children:Pm.map(j=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.name}),o.jsx("p",{className:"text-sm text-gray-500",children:j.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[j.pointsRequired," pontos"]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.available?"Disponível":"Indisponível"})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>f(j),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Hi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Om(j.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(_n,{className:"w-4 h-4"})})]})]},j.id))}),n==="sales"&&o.jsx("div",{className:"space-y-4",children:Pc.map(j=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:j.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:Ee(j.amount)}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["+",j.pointsEarned," pontos"]}),o.jsx("span",{className:"text-xs text-gray-500",children:ut(new Date(j.date))})]})]})},j.id))}),n==="financial"&&o.jsx("div",{className:"space-y-4",children:Pc.map(j=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:j.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:Ee(j.amount)}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["+",j.pointsEarned," pontos"]}),j.pointsUsedAsDiscount&&o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["-",j.pointsUsedAsDiscount," pontos (desconto)"]}),o.jsx("span",{className:"text-xs text-gray-500",children:ut(new Date(j.date))})]})]})},j.id))}),n==="requests"&&o.jsxs("div",{className:"space-y-4",children:[pe.map(j=>o.jsxs("div",{className:`rounded-lg p-4 flex items-center justify-between ${j.status==="pending"?"bg-yellow-50 border border-yellow-200":j.status==="available_for_pickup"?"bg-blue-50 border border-blue-200":j.status==="completed"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.customerName}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Produto: ",j.productName]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[j.pointsUsed," pontos"]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.status==="pending"?"bg-yellow-100 text-yellow-800":j.status==="available_for_pickup"?"bg-blue-100 text-blue-800":j.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.status==="pending"?"Pendente":j.status==="available_for_pickup"?"Disponível para retirada":j.status==="completed"?"Concluído":"Rejeitado"}),o.jsx("span",{className:"text-xs text-gray-500",children:ut(new Date(j.requestDate))}),j.status==="available_for_pickup"&&j.expiresAt&&o.jsx(Bv,{expiresAt:new Date(j.expiresAt)})]})]}),j.status==="pending"&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>Am(j),className:"p-2 text-green-600 hover:text-green-800 transition-colors",title:"Aprovar",children:o.jsx(Vi,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>Im(j),className:"p-2 text-red-600 hover:text-red-800 transition-colors",title:"Rejeitar",children:o.jsx(im,{className:"w-5 h-5"})})]}),j.status==="available_for_pickup"&&o.jsx("div",{className:"flex space-x-2",children:o.jsx("button",{onClick:()=>Rm(j),className:"p-2 text-green-600 hover:text-green-800 transition-colors",title:"Marcar como concluído",children:o.jsx(Vi,{className:"w-5 h-5"})})}),(j.status==="rejected"||j.status==="completed")&&o.jsx("button",{onClick:()=>Lm(j),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Excluir",children:o.jsx(_n,{className:"w-4 h-4"})})]},j.id)),pe.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ni,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhuma solicitação encontrada"})]})]}),n==="recurrence"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Produtos Mais Solicitados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:pe.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Total de Solicitações"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:pe.filter(j=>j.status==="completed").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Produtos Entregues"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:pe.reduce((j,z)=>j+z.pointsUsed,0)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Pontos Utilizados"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[mt.map((j,z)=>{const re=j.totalRequests>0?((j.approvedRequests+j.completedRequests)/j.totalRequests*100).toFixed(1):"0";return o.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${z===0?"bg-yellow-500":z===1?"bg-gray-400":z===2?"bg-orange-500":"bg-blue-500"}`,children:z+1}),o.jsx("h3",{className:"font-medium text-gray-900",children:j.name})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.totalRequests}),o.jsx("div",{className:"text-xs text-gray-500",children:"Total de Solicitações"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.completedRequests}),o.jsx("div",{className:"text-xs text-gray-500",children:"Entregues"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.totalPointsUsed}),o.jsx("div",{className:"text-xs text-gray-500",children:"Pontos Utilizados"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[re,"%"]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Taxa de Aprovação"})]})]}),o.jsx("div",{className:"flex items-center space-x-6 mt-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[j.pendingRequests," pendente(s)"]}),o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[j.approvedRequests," aprovada(s)"]}),o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[j.rejectedRequests," rejeitada(s)"]})]})}),j.lastRequestDate&&o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Última solicitação: ",ut(new Date(j.lastRequestDate))]})]})})},j.id)}),mt.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhuma solicitação de produto encontrada"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Os dados de recorrência aparecerão quando os clientes começarem a solicitar produtos"})]})]})]}),n==="transactions"&&o.jsx("div",{className:"space-y-4",children:Tm.map(j=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:j.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.type==="earned"||j.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[j.type==="earned"||j.type==="credit"?"+":"-",j.points," pontos"]}),o.jsx("span",{className:"text-xs text-gray-500",children:ut(new Date(j.date))})]})]})},j.id))}),n==="birthdays"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-purple-900 mb-4",children:"Aniversários Próximos (30 dias)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Ds.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Hoje"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Os.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Próximos 7 dias"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:pt.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Próximos 30 dias"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[pt.map(j=>o.jsxs("div",{className:`rounded-lg p-4 flex items-center justify-between ${j.daysUntilBirthday===0?"bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-300":j.daysUntilBirthday<=7?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:j.name}),j.daysUntilBirthday===0&&o.jsx("span",{className:"text-2xl",children:"🎉"})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[j.email," • ",j.phone]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:cm(new Date(j.birthDate))}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[pl(new Date(j.birthDate))+1," anos"]}),o.jsx("span",{className:`text-xs font-medium ${j.daysUntilBirthday===0?"text-purple-600":j.daysUntilBirthday<=7?"text-blue-600":"text-gray-600"}`,children:j.daysUntilBirthday===0?"Hoje!":j.daysUntilBirthday===1?"Amanhã":`Em ${j.daysUntilBirthday} dias`})]})]}),o.jsx("div",{className:"text-right",children:o.jsx(xi,{className:`w-6 h-6 ${j.daysUntilBirthday===0?"text-purple-500":j.daysUntilBirthday<=7?"text-blue-500":"text-gray-400"}`})})]},j.id)),pt.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(xi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhum aniversário nos próximos 30 dias"})]})]})]}),n==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuração de Pontos"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Estatísticas"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>_("requests"),className:"w-full flex items-center justify-between p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ay,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Solicitações de Fidelidade"})]}),o.jsx("span",{className:"text-xs text-blue-600",children:"Ver →"})]}),o.jsxs("button",{onClick:()=>_("costs"),className:"w-full flex items-center justify-between p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm font-medium text-green-800",children:"Custo das Solicitações"})]}),o.jsx("span",{className:"text-xs text-green-600",children:"Ver →"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ferramentas"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>N(!0),className:"w-full flex items-center justify-between p-3 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(rm,{className:"w-4 h-4 text-purple-600"}),o.jsx("span",{className:"text-sm font-medium text-purple-800",children:"QR Code de Cadastro"})]}),o.jsx("span",{className:"text-xs text-purple-600",children:"Gerar →"})]}),o.jsxs("button",{onClick:()=>O(!0),className:"w-full flex items-center justify-between p-3 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(sm,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Configurar Webhooks"})]}),o.jsx("span",{className:"text-xs text-orange-600",children:"Config →"})]})]})]})]}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Atualmente: Cada ",ee.reaisPerPoint," reais gastos = 1 ponto"]}),o.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(ml,{className:"w-4 h-4"}),o.jsx("span",{children:"Alterar Configuração"})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gerenciar Pontos"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Adicione ou remova pontos diretamente de um cliente"}),o.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all",children:[o.jsx(An,{className:"w-4 h-4"}),o.jsx("span",{children:"Gerenciar Pontos"})]})]})]})]})]}),s&&o.jsx(cd,{customer:w,onClose:()=>{i(!1),h(null)}}),a&&o.jsx(ud,{product:p,onClose:()=>{l(!1),f(null)}}),c&&o.jsx(Ky,{onClose:()=>u(!1)}),v&&o.jsx(zv,{onClose:()=>b(!1)}),d&&o.jsx(Qy,{onClose:()=>m(!1)}),x&&o.jsx(Jy,{onClose:()=>g(!1)}),w&&o.jsx(cd,{customer:w,onClose:()=>h(null)}),p&&o.jsx(ud,{product:p,onClose:()=>f(null)}),y&&o.jsx($v,{onClose:()=>N(!1)}),k&&o.jsx(Uv,{type:k,onClose:()=>_(null)}),C&&o.jsx(Mv,{onClose:()=>O(!1)}),Y&&W&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Rejeitar Solicitação"}),o.jsx("button",{onClick:()=>{S(!1),P(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Ke,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:W.customerName}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Produto: ",W.productName]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Pontos utilizados: ",W.pointsUsed]})]}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[o.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"O que fazer com os pontos?"}),o.jsx("p",{className:"text-sm text-yellow-700",children:"Os pontos já foram descontados do cliente. Escolha se deseja devolvê-los ou mantê-los removidos."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>Tc(W,!1),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Rejeitar sem devolver pontos"}),o.jsx("button",{onClick:()=>Tc(W,!0),className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Rejeitar e devolver pontos"})]})]})]})})]})}function Bv({expiresAt:e}){const[t,n]=T.useState("");return T.useEffect(()=>{const r=()=>{const i=new Date,a=e.getTime()-i.getTime();if(a<=0){n("Expirado");return}const l=Math.floor(a/(1e3*60*60)),c=Math.floor(a%(1e3*60*60)/(1e3*60)),u=Math.floor(a%(1e3*60)/1e3);n(`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`)};r();const s=setInterval(r,1e3);return()=>clearInterval(s)},[e]),o.jsxs("span",{className:`text-xs font-mono ${t==="Expirado"?"text-red-600":"text-blue-600"}`,children:["⏰ ",t]})}function qv(){const{state:e,dispatch:t}=ve(),[n,r]=T.useState("points"),[s,i]=T.useState(""),[a,l]=T.useState(!1),[c,u]=T.useState(""),[d,m]=T.useState(""),[x,g]=T.useState(!1),[v,b]=T.useState(!1),[w,h]=T.useState(""),p=e.customers.filter(S=>{var W;return S.email===((W=e.currentUser)==null?void 0:W.email)});_l.useEffect(()=>{!s&&p.length>0&&i(p[0].companyId)},[p,s]);const f=p.find(S=>S.companyId===s),y=e.companies.find(S=>S.id===s);if(!f||!y)return o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-gray-500",children:"Carregando..."})})});const N=e.products.filter(S=>S.available&&S.companyId===s),k=N.filter(S=>S.pointsRequired<=f.points),_=e.pointsTransactions.filter(S=>S.customerId===f.id&&S.companyId===s),C=e.pointsConfigs.find(S=>S.companyId===s)||{reaisPerPoint:10,companyId:s},O=e.loyaltyRequests.filter(S=>S.customerId===f.id&&S.companyId===s),R=S=>{if(S.pointsRequired>f.points){alert("Você não possui pontos suficientes para este produto.");return}if(window.confirm(`Deseja solicitar ${S.name} por ${S.pointsRequired} pontos?`)){const W={id:He(),customerId:f.id,customerName:f.name,productId:S.id,productName:S.name,pointsUsed:S.pointsRequired,status:"pending",requestDate:new Date,companyId:s},P={...f,points:f.points-S.pointsRequired},$={id:He(),companyId:s,customerId:f.id,customerName:f.name,type:"spent",points:S.pointsRequired,description:`Solicitação: ${S.name}`,date:new Date};t({type:"ADD_LOYALTY_REQUEST",payload:W}),t({type:"UPDATE_CUSTOMER",payload:P}),t({type:"ADD_POINTS_TRANSACTION",payload:$}),alert("Solicitação enviada com sucesso! Aguarde a aprovação da empresa.")}},H=[{id:"points",label:"Meus Pontos",icon:Nn},{id:"products",label:"Produtos",icon:hr},{id:"orders",label:"Pedidos",icon:Wt},{id:"history",label:"Histórico",icon:ia},{id:"settings",label:"Configurações",icon:ml}],Y=S=>{if(S.preventDefault(),h(""),c.length<4){h("A senha deve ter pelo menos 4 caracteres");return}if(c!==d){h("As senhas não coincidem");return}const W={...f,password:c};t({type:"UPDATE_CUSTOMER",payload:W}),l(!1),u(""),m("")};return o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p.length>1&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a empresa"}),o.jsx("select",{value:s,onChange:S=>i(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",children:p.map(S=>{const W=e.companies.find(P=>P.id===S.companyId);return o.jsxs("option",{value:S.companyId,children:[W==null?void 0:W.name," - ",S.points," pontos"]},S.companyId)})})]}),o.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-orange-400 rounded-xl p-6 mb-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Olá, ",f.name,"!"]}),o.jsxs("p",{className:"text-pink-100 mt-1",children:[y.name," - Programa de Fidelidade"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-bold",children:f.points}),o.jsx("div",{className:"text-pink-100",children:"pontos disponíveis"})]})]})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:H.map(S=>{const W=S.icon;return o.jsxs("button",{onClick:()=>r(S.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===S.id?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(W,{className:"w-5 h-5"}),o.jsx("span",{children:S.label})]},S.id)})})}),o.jsxs("div",{className:"p-6",children:[n==="points"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-orange-50 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pontos Totais"}),o.jsx("p",{className:"text-2xl font-bold text-pink-600",children:f.points})]}),o.jsx(Nn,{className:"w-8 h-8 text-pink-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Produtos Disponíveis"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.length})]}),o.jsx(hr,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transações"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_.length})]}),o.jsx(ia,{className:"w-8 h-8 text-blue-500"})]})})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Como funciona o sistema de pontos?"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["A cada R$ ",C.reaisPerPoint.toFixed(2)," gastos, você ganha 1 ponto. Use seus pontos para resgatar produtos incríveis em nossa loja!"]})]})]}),n==="products"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:N.map(S=>{const W=S.pointsRequired<=f.points;return o.jsxs("div",{className:`rounded-lg border-2 p-6 transition-all ${W?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:S.name}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${W?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[S.pointsRequired," pontos"]}),W&&o.jsx("span",{className:"text-sm text-green-600 font-medium",children:"✓ Disponível"})]})]}),S.imageUrl&&o.jsx("div",{className:"ml-4",children:o.jsx("img",{src:S.imageUrl,alt:S.name,className:"w-16 h-16 object-cover rounded-lg"})})]}),W&&o.jsx("button",{onClick:()=>R(S),className:"mt-4 w-full bg-gradient-to-r from-pink-500 to-orange-400 text-white py-2 px-4 rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Solicitar Agora"})]},S.id)})}),N.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(hr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhum produto disponível no momento"})]})]}),n==="orders"&&o.jsxs("div",{className:"space-y-4",children:[O.map(S=>o.jsx("div",{className:`rounded-lg p-4 border-2 ${S.status==="pending"?"bg-yellow-50 border-yellow-200":S.status==="available_for_pickup"?"bg-blue-50 border-blue-200":S.status==="completed"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:S.productName}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Solicitado em ",ut(new Date(S.requestDate))]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[S.pointsUsed," pontos"]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.status==="pending"?"bg-yellow-100 text-yellow-800":S.status==="available_for_pickup"?"bg-blue-100 text-blue-800":S.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S.status==="pending"?"Aguardando resposta da loja":S.status==="available_for_pickup"?"Disponível para retirada":S.status==="completed"?"Concluído":"Rejeitado"})]}),S.status==="available_for_pickup"&&S.expiresAt&&o.jsxs("div",{className:"mt-3 p-3 bg-blue-100 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wt,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Produto disponível para retirada"})]}),o.jsx("div",{className:"mt-1",children:o.jsx(Vv,{expiresAt:new Date(S.expiresAt)})})]}),S.status==="completed"&&o.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Nn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm font-medium text-green-800",children:"Produto entregue com sucesso!"})]}),S.processedDate&&o.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Concluído em ",ut(new Date(S.processedDate))]})]}),S.status==="rejected"&&o.jsxs("div",{className:"mt-3 p-3 bg-red-100 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wt,{className:"w-4 h-4 text-red-600"}),o.jsx("span",{className:"text-sm font-medium text-red-800",children:"Solicitação rejeitada"})]}),S.rejectionReason&&o.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded border border-red-200",children:[o.jsx("p",{className:"text-xs font-medium text-red-800",children:"Motivo:"}),o.jsx("p",{className:"text-xs text-red-700",children:S.rejectionReason})]}),S.processedDate&&o.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Rejeitado em ",ut(new Date(S.processedDate))]})]})]})})},S.id)),O.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Você ainda não fez nenhuma solicitação"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Acesse a aba "Produtos" para solicitar itens com seus pontos'})]})]}),n==="history"&&o.jsxs("div",{className:"space-y-4",children:[_.map(S=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:S.description}),o.jsx("p",{className:"text-sm text-gray-500",children:ut(new Date(S.date))})]}),o.jsx("div",{className:"text-right",children:o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium ${S.type==="earned"||S.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[S.type==="earned"||S.type==="credit"?"+":"-",S.points," pontos"]})})]},S.id)),_.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ia,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhuma transação encontrada"})]})]}),n==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informações da Conta"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:f.cpf})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Nascimento"}),o.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[cm(new Date(f.birthDate))," (",pl(new Date(f.birthDate))," anos)"]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Alterar Senha"}),a?o.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nova Senha"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:x?"text":"password",value:c,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Digite sua nova senha",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>g(!x),children:x?o.jsx(In,{className:"h-4 w-4"}):o.jsx(Dn,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nova Senha"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:v?"text":"password",value:d,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Confirme sua nova senha",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>b(!v),children:v?o.jsx(In,{className:"h-4 w-4"}):o.jsx(Dn,{className:"h-4 w-4"})})]})]}),w&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:w}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{l(!1),u(""),m(""),h("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all",children:"Salvar Senha"})]})]}):o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all",children:[o.jsx(jc,{className:"w-4 h-4"}),o.jsx("span",{children:"Alterar Senha"})]})]})]})]})]})]})}function Vv({expiresAt:e}){const[t,n]=T.useState("");return _l.useEffect(()=>{const r=()=>{const i=new Date,a=e.getTime()-i.getTime();if(a<=0){n("Expirado");return}const l=Math.floor(a/(1e3*60*60)),c=Math.floor(a%(1e3*60*60)/(1e3*60)),u=Math.floor(a%(1e3*60)/1e3);n(`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`)};r();const s=setInterval(r,1e3);return()=>clearInterval(s)},[e]),o.jsxs("div",{className:"text-sm text-blue-700",children:[o.jsx("span",{className:"font-medium",children:"Tempo restante: "}),o.jsx("span",{className:`font-mono ${t==="Expirado"?"text-red-600":"text-blue-600"}`,children:t==="Expirado"?"⏰ Expirado":`⏰ ${t}`})]})}function Hv({companySlug:e}){const{state:t,dispatch:n}=ve(),[r,s]=T.useState({name:"",cpf:"",email:"",phone:"",address:"",birthDate:"",password:"",confirmPassword:""}),[i,a]=T.useState({}),[l,c]=T.useState(!1),[u,d]=T.useState(!1),[m,x]=T.useState(!1),g=t.companies.find(h=>h.slug===e&&h.isActive);if(!g)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-pink-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-md w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Tn,{className:"w-8 h-8 text-red-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Empresa não encontrada"}),o.jsxs("p",{className:"text-gray-600",children:['A empresa com o código "',e,'" não foi encontrada ou está inativa.']})]})})});const v=h=>{const{name:p,value:f}=h.target;let y=f;p==="cpf"?y=om(f):p==="phone"&&(y=am(f)),s(N=>({...N,[p]:y})),i[p]&&a(N=>({...N,[p]:""}))},b=()=>{const h={};return r.name.trim()||(h.name="Nome é obrigatório"),r.cpf.trim()?lm(r.cpf)?t.customers.find(f=>f.cpf===r.cpf&&f.companyId===g.id)&&(h.cpf="CPF já cadastrado nesta empresa"):h.cpf="CPF inválido":h.cpf="CPF é obrigatório",r.email.trim()?Nc(r.email)?t.customers.find(f=>f.email===r.email&&f.companyId===g.id)&&(h.email="Email já cadastrado nesta empresa"):h.email="Email inválido":h.email="Email é obrigatório",r.phone.trim()?Wi(r.phone).length<10&&(h.phone="Telefone inválido"):h.phone="Telefone é obrigatório",r.birthDate?new Date(r.birthDate)>=new Date&&(h.birthDate="Data de nascimento deve ser anterior a hoje"):h.birthDate="Data de nascimento é obrigatória",r.password.trim()?r.password.length<4&&(h.password="Senha deve ter pelo menos 4 caracteres"):h.password="Senha é obrigatória",r.password!==r.confirmPassword&&(h.confirmPassword="Senhas não coincidem"),a(h),Object.keys(h).length===0},w=async h=>{if(h.preventDefault(),!b())return;const p={company_id:g.id,name:r.name.trim(),cpf:r.cpf,email:r.email.trim(),phone:Wi(r.phone),address:r.address.trim()||null,birth_date:r.birthDate,password:r.password,points:0};try{const f=await fetch("https://qufzqkbkdvhkporsowzj.supabase.co/rest/v1/customers",{method:"POST",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1Znpxa2JrZHZoa3BvcnNvd3pqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNTIxODUsImV4cCI6MjA2ODcyODE4NX0.XeTleMNfffM_92H4R_YIrMcaOOUMR0Gu6DRt4Nd7gAA",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1Znpxa2JrZHZoa3BvcnNvd3pqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNTIxODUsImV4cCI6MjA2ODcyODE4NX0.XeTleMNfffM_92H4R_YIrMcaOOUMR0Gu6DRt4Nd7gAA","Content-Type":"application/json",Prefer:"return=representation"},body:JSON.stringify(p)});if(!f.ok)throw new Error(`Falha ao cadastrar: ${f.status}`);const[y]=await f.json();n({type:"ADD_CUSTOMER",payload:{id:y.id,companyId:y.company_id,name:y.name,cpf:y.cpf,email:y.email,phone:y.phone,address:y.address,birthDate:new Date(y.birth_date),password:y.password,points:y.points,createdAt:new Date(y.created_at)}}),x(!0)}catch(f){console.error(f),a(y=>({...y,form:f.message}))}};return m?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-md w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Vi,{className:"w-8 h-8 text-green-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Cadastro realizado com sucesso!"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["Bem-vindo ao programa de fidelidade da ",g.name,"!"]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Seus dados de acesso:"}),o.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Email:"})," ",r.email]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Senha:"})," ",r.password]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Agora você pode acessar o sistema e começar a acumular pontos!"}),o.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105",children:"Fazer Login"})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Tn,{className:"w-8 h-8 text-white"})}),o.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Cadastre-se em ",g.name]}),o.jsx("p",{className:"text-gray-600",children:"Junte-se ao nosso programa de fidelidade e comece a acumular pontos!"})]}),o.jsxs("form",{onSubmit:w,className:"bg-white rounded-xl shadow-lg p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),o.jsxs("div",{className:"relative",children:[o.jsx(wo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:r.name,onChange:v,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.name?"border-red-500":"border-gray-300"}`,placeholder:"Seu nome completo"})]}),i.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF *"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"cpf",value:r.cpf,onChange:v,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.cpf?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14})]}),i.cpf&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.cpf})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),o.jsxs("div",{className:"relative",children:[o.jsx(vo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"email",value:r.email,onChange:v,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.email?"border-red-500":"border-gray-300"}`,placeholder:"seu@email.com"})]}),i.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),o.jsxs("div",{className:"relative",children:[o.jsx(nm,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:v,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.phone?"border-red-500":"border-gray-300"}`,placeholder:"(11) 99999-9999",maxLength:15})]}),i.phone&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento *"}),o.jsx("input",{type:"date",name:"birthDate",value:r.birthDate,onChange:v,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.birthDate?"border-red-500":"border-gray-300"}`}),i.birthDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.birthDate})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço"}),o.jsxs("div",{className:"relative",children:[o.jsx(tm,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"address",value:r.address,onChange:v,rows:2,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all resize-none",placeholder:"Seu endereço (opcional)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:l?"text":"password",name:"password",value:r.password,onChange:v,className:`w-full px-3 py-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.password?"border-red-500":"border-gray-300"}`,placeholder:"Sua senha"}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>c(!l),children:l?o.jsx(In,{className:"h-5 w-5"}):o.jsx(Dn,{className:"h-5 w-5"})})]}),i.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:u?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:v,className:`w-full px-3 py-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirme sua senha"}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>d(!u),children:u?o.jsx(In,{className:"h-5 w-5"}):o.jsx(Dn,{className:"h-5 w-5"})})]}),i.confirmPassword&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),o.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105 font-medium",children:"Criar Conta"}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Já tem uma conta?"," ",o.jsx("button",{type:"button",onClick:()=>window.location.href="/",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Fazer login"})]})})]})]})})}function Wv(){const{state:e}=ve(),[t,n]=T.useState(window.location.pathname);T.useEffect(()=>{const s=()=>{n(window.location.pathname)};return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[]);const r=t.match(/^\/register\/(.+)$/);if(r){const s=r[1];return o.jsx(Hv,{companySlug:s})}return e.currentUser?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(qy,{}),e.currentUser.type==="superadmin"?o.jsx(Wy,{}):e.currentUser.type==="admin"?o.jsx(Fv,{}):o.jsx(qv,{})]}):o.jsx(Vy,{})}function Kv(){return o.jsx(Ey,{children:o.jsx(Wv,{})})}Cf(document.getElementById("root")).render(o.jsx(T.StrictMode,{children:o.jsx(Kv,{})}));
