(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Om(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var cd={exports:{}},Ki={},ud={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=Symbol.for("react.element"),$m=Symbol.for("react.portal"),Um=Symbol.for("react.fragment"),Mm=Symbol.for("react.strict_mode"),zm=Symbol.for("react.profiler"),Fm=Symbol.for("react.provider"),Bm=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Hm=Symbol.for("react.memo"),Wm=Symbol.for("react.lazy"),Cc=Symbol.iterator;function Km(e){return e===null||typeof e!="object"?null:(e=Cc&&e[Cc]||e["@@iterator"],typeof e=="function"?e:null)}var dd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hd=Object.assign,fd={};function vr(e,t,n){this.props=e,this.context=t,this.refs=fd,this.updater=n||dd}vr.prototype.isReactComponent={};vr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function md(){}md.prototype=vr.prototype;function xl(e,t,n){this.props=e,this.context=t,this.refs=fd,this.updater=n||dd}var yl=xl.prototype=new md;yl.constructor=xl;hd(yl,vr.prototype);yl.isPureReactComponent=!0;var Ec=Array.isArray,pd=Object.prototype.hasOwnProperty,vl={current:null},gd={key:!0,ref:!0,__self:!0,__source:!0};function xd(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)pd.call(t,r)&&!gd.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ys,type:e,key:i,ref:a,props:s,_owner:vl.current}}function Qm(e,t){return{$$typeof:ys,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ys}function Gm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Pc=/\/+/g;function _o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gm(""+e.key):t.toString(36)}function ri(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ys:case $m:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+_o(a,0):r,Ec(s)?(n="",e!=null&&(n=e.replace(Pc,"$&/")+"/"),ri(s,t,n,"",function(u){return u})):s!=null&&(wl(s)&&(s=Qm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Pc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Ec(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+_o(i,l);a+=ri(i,t,n,c,s)}else if(c=Km(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+_o(i,l++),a+=ri(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Rs(e,t,n){if(e==null)return e;var r=[],s=0;return ri(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Jm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ee={current:null},si={transition:null},Ym={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:si,ReactCurrentOwner:vl};function yd(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Rs,forEach:function(e,t,n){Rs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rs(e,function(){t++}),t},toArray:function(e){return Rs(e,function(t){return t})||[]},only:function(e){if(!wl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=vr;B.Fragment=Um;B.Profiler=zm;B.PureComponent=xl;B.StrictMode=Mm;B.Suspense=Vm;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ym;B.act=yd;B.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hd({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=vl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)pd.call(t,c)&&!gd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ys,type:e.type,key:s,ref:i,props:r,_owner:a}};B.createContext=function(e){return e={$$typeof:Bm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fm,_context:e},e.Consumer=e};B.createElement=xd;B.createFactory=function(e){var t=xd.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:qm,render:e}};B.isValidElement=wl;B.lazy=function(e){return{$$typeof:Wm,_payload:{_status:-1,_result:e},_init:Jm}};B.memo=function(e,t){return{$$typeof:Hm,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=si.transition;si.transition={};try{e()}finally{si.transition=t}};B.unstable_act=yd;B.useCallback=function(e,t){return Ee.current.useCallback(e,t)};B.useContext=function(e){return Ee.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return Ee.current.useDeferredValue(e)};B.useEffect=function(e,t){return Ee.current.useEffect(e,t)};B.useId=function(){return Ee.current.useId()};B.useImperativeHandle=function(e,t,n){return Ee.current.useImperativeHandle(e,t,n)};B.useInsertionEffect=function(e,t){return Ee.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return Ee.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return Ee.current.useMemo(e,t)};B.useReducer=function(e,t,n){return Ee.current.useReducer(e,t,n)};B.useRef=function(e){return Ee.current.useRef(e)};B.useState=function(e){return Ee.current.useState(e)};B.useSyncExternalStore=function(e,t,n){return Ee.current.useSyncExternalStore(e,t,n)};B.useTransition=function(){return Ee.current.useTransition()};B.version="18.3.1";ud.exports=B;var P=ud.exports;const bl=Om(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=P,Zm=Symbol.for("react.element"),ep=Symbol.for("react.fragment"),tp=Object.prototype.hasOwnProperty,np=Xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rp={key:!0,ref:!0,__self:!0,__source:!0};function vd(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)tp.call(t,r)&&!rp.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Zm,type:e,key:i,ref:a,props:s,_owner:np.current}}Ki.Fragment=ep;Ki.jsx=vd;Ki.jsxs=vd;cd.exports=Ki;var o=cd.exports,wd={exports:{}},We={},bd={exports:{}},jd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,I){var L=A.length;A.push(I);e:for(;0<L;){var Q=L-1>>>1,ae=A[Q];if(0<s(ae,I))A[Q]=I,A[L]=ae,L=Q;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var I=A[0],L=A.pop();if(L!==I){A[0]=L;e:for(var Q=0,ae=A.length,Ae=ae>>>1;Q<Ae;){var nt=2*(Q+1)-1,Ps=A[nt],ft=nt+1,mt=A[ft];if(0>s(Ps,L))ft<ae&&0>s(mt,Ps)?(A[Q]=mt,A[ft]=L,Q=ft):(A[Q]=Ps,A[nt]=L,Q=nt);else if(ft<ae&&0>s(mt,L))A[Q]=mt,A[ft]=L,Q=ft;else break e}}return I}function s(A,I){var L=A.sortIndex-I.sortIndex;return L!==0?L:A.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,m=null,g=3,x=!1,y=!1,j=!1,b=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=A)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function w(A){if(j=!1,p(A),!y)if(n(c)!==null)y=!0,G(_);else{var I=n(u);I!==null&&$(w,I.startTime-A)}}function _(A,I){y=!1,j&&(j=!1,h(k),k=-1),x=!0;var L=g;try{for(p(I),m=n(c);m!==null&&(!(m.expirationTime>I)||A&&!z());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,g=m.priorityLevel;var ae=Q(m.expirationTime<=I);I=e.unstable_now(),typeof ae=="function"?m.callback=ae:m===n(c)&&r(c),p(I)}else r(c);m=n(c)}if(m!==null)var Ae=!0;else{var nt=n(u);nt!==null&&$(w,nt.startTime-I),Ae=!1}return Ae}finally{m=null,g=L,x=!1}}var S=!1,v=null,k=-1,D=5,T=-1;function z(){return!(e.unstable_now()-T<D)}function K(){if(v!==null){var A=e.unstable_now();T=A;var I=!0;try{I=v(!0,A)}finally{I?C():(S=!1,v=null)}}else S=!1}var C;if(typeof f=="function")C=function(){f(K)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Te=V.port2;V.port1.onmessage=K,C=function(){Te.postMessage(null)}}else C=function(){b(K,0)};function G(A){v=A,S||(S=!0,C())}function $(A,I){k=b(function(){A(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,G(_))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(g){case 1:case 2:case 3:var I=3;break;default:I=g}var L=g;g=I;try{return A()}finally{g=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,I){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var L=g;g=A;try{return I()}finally{g=L}},e.unstable_scheduleCallback=function(A,I,L){var Q=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Q+L:Q):L=Q,A){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=L+ae,A={id:d++,callback:I,priorityLevel:A,startTime:L,expirationTime:ae,sortIndex:-1},L>Q?(A.sortIndex=L,t(u,A),n(c)===null&&A===n(u)&&(j?(h(k),k=-1):j=!0,$(w,L-Q))):(A.sortIndex=ae,t(c,A),y||x||(y=!0,G(_))),A},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(A){var I=g;return function(){var L=g;g=I;try{return A.apply(this,arguments)}finally{g=L}}}})(jd);bd.exports=jd;var sp=bd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=P,Ve=sp;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nd=new Set,Xr={};function An(e,t){ar(e,t),ar(e+"Capture",t)}function ar(e,t){for(Xr[e]=t,e=0;e<t.length;e++)Nd.add(t[e])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ua=Object.prototype.hasOwnProperty,op=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tc={},Ac={};function ap(e){return ua.call(Ac,e)?!0:ua.call(Tc,e)?!1:op.test(e)?Ac[e]=!0:(Tc[e]=!0,!1)}function lp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cp(e,t,n,r){if(t===null||typeof t>"u"||lp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pe(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new Pe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new Pe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new Pe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new Pe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new Pe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new Pe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ve[e]=new Pe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ve[e]=new Pe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ve[e]=new Pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var jl=/[\-:]([a-z])/g;function Nl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jl,Nl);ve[t]=new Pe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jl,Nl);ve[t]=new Pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jl,Nl);ve[t]=new Pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new Pe(e,1,!1,e.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ve[e]=new Pe(e,1,!1,e.toLowerCase(),null,!0,!0)});function _l(e,t,n,r){var s=ve.hasOwnProperty(t)?ve[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cp(t,n,s,r)&&(n=null),r||s===null?ap(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rt=ip.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ds=Symbol.for("react.element"),Bn=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),kl=Symbol.for("react.strict_mode"),da=Symbol.for("react.profiler"),_d=Symbol.for("react.provider"),kd=Symbol.for("react.context"),Sl=Symbol.for("react.forward_ref"),ha=Symbol.for("react.suspense"),fa=Symbol.for("react.suspense_list"),Cl=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),Sd=Symbol.for("react.offscreen"),Rc=Symbol.iterator;function _r(e){return e===null||typeof e!="object"?null:(e=Rc&&e[Rc]||e["@@iterator"],typeof e=="function"?e:null)}var se=Object.assign,ko;function Dr(e){if(ko===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ko=t&&t[1]||""}return`
`+ko+e}var So=!1;function Co(e,t){if(!e||So)return"";So=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{So=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Dr(e):""}function up(e){switch(e.tag){case 5:return Dr(e.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 2:case 15:return e=Co(e.type,!1),e;case 11:return e=Co(e.type.render,!1),e;case 1:return e=Co(e.type,!0),e;default:return""}}function ma(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qn:return"Fragment";case Bn:return"Portal";case da:return"Profiler";case kl:return"StrictMode";case ha:return"Suspense";case fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kd:return(e.displayName||"Context")+".Consumer";case _d:return(e._context.displayName||"Context")+".Provider";case Sl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cl:return t=e.displayName||null,t!==null?t:ma(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return ma(e(t))}catch{}}return null}function dp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ma(t);case 8:return t===kl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hp(e){var t=Cd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){e._valueTracker||(e._valueTracker=hp(e))}function Ed(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Cd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pa(e,t){var n=t.checked;return se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Dc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=tn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pd(e,t){t=t.checked,t!=null&&_l(e,"checked",t,!1)}function ga(e,t){Pd(e,t);var n=tn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&xa(e,t.type,tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ic(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xa(e,t,n){(t!=="number"||xi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ir=Array.isArray;function er(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+tn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ya(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(E(92));if(Ir(n)){if(1<n.length)throw Error(E(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:tn(n)}}function Td(e,t){var n=tn(t.value),r=tn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ad(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ad(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Os,Rd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Os=Os||document.createElement("div"),Os.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Os.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fp=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(e){fp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ur[t]=Ur[e]})});function Dd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ur.hasOwnProperty(e)&&Ur[e]?(""+t).trim():t+"px"}function Id(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var mp=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wa(e,t){if(t){if(mp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function ba(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ja=null;function El(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Na=null,tr=null,nr=null;function $c(e){if(e=bs(e)){if(typeof Na!="function")throw Error(E(280));var t=e.stateNode;t&&(t=Xi(t),Na(e.stateNode,e.type,t))}}function Od(e){tr?nr?nr.push(e):nr=[e]:tr=e}function Ld(){if(tr){var e=tr,t=nr;if(nr=tr=null,$c(e),t)for(e=0;e<t.length;e++)$c(t[e])}}function $d(e,t){return e(t)}function Ud(){}var Eo=!1;function Md(e,t,n){if(Eo)return e(t,n);Eo=!0;try{return $d(e,t,n)}finally{Eo=!1,(tr!==null||nr!==null)&&(Ud(),Ld())}}function es(e,t){var n=e.stateNode;if(n===null)return null;var r=Xi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(E(231,t,typeof n));return n}var _a=!1;if(Et)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){_a=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{_a=!1}function pp(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Mr=!1,yi=null,vi=!1,ka=null,gp={onError:function(e){Mr=!0,yi=e}};function xp(e,t,n,r,s,i,a,l,c){Mr=!1,yi=null,pp.apply(gp,arguments)}function yp(e,t,n,r,s,i,a,l,c){if(xp.apply(this,arguments),Mr){if(Mr){var u=yi;Mr=!1,yi=null}else throw Error(E(198));vi||(vi=!0,ka=u)}}function Rn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uc(e){if(Rn(e)!==e)throw Error(E(188))}function vp(e){var t=e.alternate;if(!t){if(t=Rn(e),t===null)throw Error(E(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uc(s),e;if(i===r)return Uc(s),t;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?e:t}function Fd(e){return e=vp(e),e!==null?Bd(e):null}function Bd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bd(e);if(t!==null)return t;e=e.sibling}return null}var qd=Ve.unstable_scheduleCallback,Mc=Ve.unstable_cancelCallback,wp=Ve.unstable_shouldYield,bp=Ve.unstable_requestPaint,oe=Ve.unstable_now,jp=Ve.unstable_getCurrentPriorityLevel,Pl=Ve.unstable_ImmediatePriority,Vd=Ve.unstable_UserBlockingPriority,wi=Ve.unstable_NormalPriority,Np=Ve.unstable_LowPriority,Hd=Ve.unstable_IdlePriority,Qi=null,yt=null;function _p(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Qi,e,void 0,(e.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:Cp,kp=Math.log,Sp=Math.LN2;function Cp(e){return e>>>=0,e===0?32:31-(kp(e)/Sp|0)|0}var Ls=64,$s=4194304;function Or(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Or(l):(i&=a,i!==0&&(r=Or(i)))}else a=n&~s,a!==0?r=Or(a):i!==0&&(r=Or(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ut(t),s=1<<n,r|=e[n],t&=~s;return r}function Ep(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-ut(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Ep(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Sa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wd(){var e=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),e}function Po(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ut(t),e[t]=n}function Tp(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ut(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Tl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ut(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var H=0;function Kd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qd,Al,Gd,Jd,Yd,Ca=!1,Us=[],Kt=null,Qt=null,Gt=null,ts=new Map,ns=new Map,Ut=[],Ap="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zc(e,t){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function Sr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=bs(t),t!==null&&Al(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Rp(e,t,n,r,s){switch(t){case"focusin":return Kt=Sr(Kt,e,t,n,r,s),!0;case"dragenter":return Qt=Sr(Qt,e,t,n,r,s),!0;case"mouseover":return Gt=Sr(Gt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ts.set(i,Sr(ts.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ns.set(i,Sr(ns.get(i)||null,e,t,n,r,s)),!0}return!1}function Xd(e){var t=mn(e.target);if(t!==null){var n=Rn(t);if(n!==null){if(t=n.tag,t===13){if(t=zd(n),t!==null){e.blockedOn=t,Yd(e.priority,function(){Gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ea(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ja=r,n.target.dispatchEvent(r),ja=null}else return t=bs(n),t!==null&&Al(t),e.blockedOn=n,!1;t.shift()}return!0}function Fc(e,t,n){ii(e)&&n.delete(t)}function Dp(){Ca=!1,Kt!==null&&ii(Kt)&&(Kt=null),Qt!==null&&ii(Qt)&&(Qt=null),Gt!==null&&ii(Gt)&&(Gt=null),ts.forEach(Fc),ns.forEach(Fc)}function Cr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ca||(Ca=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,Dp)))}function rs(e){function t(s){return Cr(s,e)}if(0<Us.length){Cr(Us[0],e);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kt!==null&&Cr(Kt,e),Qt!==null&&Cr(Qt,e),Gt!==null&&Cr(Gt,e),ts.forEach(t),ns.forEach(t),n=0;n<Ut.length;n++)r=Ut[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ut.length&&(n=Ut[0],n.blockedOn===null);)Xd(n),n.blockedOn===null&&Ut.shift()}var rr=Rt.ReactCurrentBatchConfig,ji=!0;function Ip(e,t,n,r){var s=H,i=rr.transition;rr.transition=null;try{H=1,Rl(e,t,n,r)}finally{H=s,rr.transition=i}}function Op(e,t,n,r){var s=H,i=rr.transition;rr.transition=null;try{H=4,Rl(e,t,n,r)}finally{H=s,rr.transition=i}}function Rl(e,t,n,r){if(ji){var s=Ea(e,t,n,r);if(s===null)Mo(e,t,r,Ni,n),zc(e,r);else if(Rp(s,e,t,n,r))r.stopPropagation();else if(zc(e,r),t&4&&-1<Ap.indexOf(e)){for(;s!==null;){var i=bs(s);if(i!==null&&Qd(i),i=Ea(e,t,n,r),i===null&&Mo(e,t,r,Ni,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mo(e,t,r,null,n)}}var Ni=null;function Ea(e,t,n,r){if(Ni=null,e=El(r),e=mn(e),e!==null)if(t=Rn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ni=e,null}function Zd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jp()){case Pl:return 1;case Vd:return 4;case wi:case Np:return 16;case Hd:return 536870912;default:return 16}default:return 16}}var Ft=null,Dl=null,oi=null;function eh(){if(oi)return oi;var e,t=Dl,n=t.length,r,s="value"in Ft?Ft.value:Ft.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return oi=s.slice(e,1<r?1-r:void 0)}function ai(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ms(){return!0}function Bc(){return!1}function Ke(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ms:Bc,this.isPropagationStopped=Bc,this}return se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=Ke(wr),ws=se({},wr,{view:0,detail:0}),Lp=Ke(ws),To,Ao,Er,Gi=se({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Er&&(Er&&e.type==="mousemove"?(To=e.screenX-Er.screenX,Ao=e.screenY-Er.screenY):Ao=To=0,Er=e),To)},movementY:function(e){return"movementY"in e?e.movementY:Ao}}),qc=Ke(Gi),$p=se({},Gi,{dataTransfer:0}),Up=Ke($p),Mp=se({},ws,{relatedTarget:0}),Ro=Ke(Mp),zp=se({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Fp=Ke(zp),Bp=se({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qp=Ke(Bp),Vp=se({},wr,{data:0}),Vc=Ke(Vp),Hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kp[e])?!!t[e]:!1}function Ol(){return Qp}var Gp=se({},ws,{key:function(e){if(e.key){var t=Hp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(e){return e.type==="keypress"?ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jp=Ke(Gp),Yp=se({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hc=Ke(Yp),Xp=se({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),Zp=Ke(Xp),e0=se({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),t0=Ke(e0),n0=se({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r0=Ke(n0),s0=[9,13,27,32],Ll=Et&&"CompositionEvent"in window,zr=null;Et&&"documentMode"in document&&(zr=document.documentMode);var i0=Et&&"TextEvent"in window&&!zr,th=Et&&(!Ll||zr&&8<zr&&11>=zr),Wc=" ",Kc=!1;function nh(e,t){switch(e){case"keyup":return s0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vn=!1;function o0(e,t){switch(e){case"compositionend":return rh(t);case"keypress":return t.which!==32?null:(Kc=!0,Wc);case"textInput":return e=t.data,e===Wc&&Kc?null:e;default:return null}}function a0(e,t){if(Vn)return e==="compositionend"||!Ll&&nh(e,t)?(e=eh(),oi=Dl=Ft=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return th&&t.locale!=="ko"?null:t.data;default:return null}}var l0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!l0[e.type]:t==="textarea"}function sh(e,t,n,r){Od(r),t=_i(t,"onChange"),0<t.length&&(n=new Il("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fr=null,ss=null;function c0(e){ph(e,0)}function Ji(e){var t=Kn(e);if(Ed(t))return e}function u0(e,t){if(e==="change")return t}var ih=!1;if(Et){var Do;if(Et){var Io="oninput"in document;if(!Io){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),Io=typeof Gc.oninput=="function"}Do=Io}else Do=!1;ih=Do&&(!document.documentMode||9<document.documentMode)}function Jc(){Fr&&(Fr.detachEvent("onpropertychange",oh),ss=Fr=null)}function oh(e){if(e.propertyName==="value"&&Ji(ss)){var t=[];sh(t,ss,e,El(e)),Md(c0,t)}}function d0(e,t,n){e==="focusin"?(Jc(),Fr=t,ss=n,Fr.attachEvent("onpropertychange",oh)):e==="focusout"&&Jc()}function h0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ji(ss)}function f0(e,t){if(e==="click")return Ji(t)}function m0(e,t){if(e==="input"||e==="change")return Ji(t)}function p0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ht=typeof Object.is=="function"?Object.is:p0;function is(e,t){if(ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ua.call(t,s)||!ht(e[s],t[s]))return!1}return!0}function Yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var n=Yc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yc(n)}}function ah(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ah(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lh(){for(var e=window,t=xi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xi(e.document)}return t}function $l(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function g0(e){var t=lh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ah(n.ownerDocument.documentElement,n)){if(r!==null&&$l(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Xc(n,i);var a=Xc(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var x0=Et&&"documentMode"in document&&11>=document.documentMode,Hn=null,Pa=null,Br=null,Ta=!1;function Zc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ta||Hn==null||Hn!==xi(r)||(r=Hn,"selectionStart"in r&&$l(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Br&&is(Br,r)||(Br=r,r=_i(Pa,"onSelect"),0<r.length&&(t=new Il("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hn)))}function zs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wn={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},Oo={},ch={};Et&&(ch=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function Yi(e){if(Oo[e])return Oo[e];if(!Wn[e])return e;var t=Wn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ch)return Oo[e]=t[n];return e}var uh=Yi("animationend"),dh=Yi("animationiteration"),hh=Yi("animationstart"),fh=Yi("transitionend"),mh=new Map,eu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(e,t){mh.set(e,t),An(t,[e])}for(var Lo=0;Lo<eu.length;Lo++){var $o=eu[Lo],y0=$o.toLowerCase(),v0=$o[0].toUpperCase()+$o.slice(1);rn(y0,"on"+v0)}rn(uh,"onAnimationEnd");rn(dh,"onAnimationIteration");rn(hh,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(fh,"onTransitionEnd");ar("onMouseEnter",["mouseout","mouseover"]);ar("onMouseLeave",["mouseout","mouseover"]);ar("onPointerEnter",["pointerout","pointerover"]);ar("onPointerLeave",["pointerout","pointerover"]);An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));An("onBeforeInput",["compositionend","keypress","textInput","paste"]);An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function tu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,yp(r,t,void 0,e),e.currentTarget=null}function ph(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;tu(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;tu(s,l,u),i=c}}}if(vi)throw e=ka,vi=!1,ka=null,e}function X(e,t){var n=t[Oa];n===void 0&&(n=t[Oa]=new Set);var r=e+"__bubble";n.has(r)||(gh(t,e,2,!1),n.add(r))}function Uo(e,t,n){var r=0;t&&(r|=4),gh(n,e,r,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function os(e){if(!e[Fs]){e[Fs]=!0,Nd.forEach(function(n){n!=="selectionchange"&&(w0.has(n)||Uo(n,!1,e),Uo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,Uo("selectionchange",!1,t))}}function gh(e,t,n,r){switch(Zd(t)){case 1:var s=Ip;break;case 4:s=Op;break;default:s=Rl}n=s.bind(null,t,n,e),s=void 0,!_a||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Mo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=mn(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Md(function(){var u=i,d=El(n),m=[];e:{var g=mh.get(e);if(g!==void 0){var x=Il,y=e;switch(e){case"keypress":if(ai(n)===0)break e;case"keydown":case"keyup":x=Jp;break;case"focusin":y="focus",x=Ro;break;case"focusout":y="blur",x=Ro;break;case"beforeblur":case"afterblur":x=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Zp;break;case uh:case dh:case hh:x=Fp;break;case fh:x=t0;break;case"scroll":x=Lp;break;case"wheel":x=r0;break;case"copy":case"cut":case"paste":x=qp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Hc}var j=(t&4)!==0,b=!j&&e==="scroll",h=j?g!==null?g+"Capture":null:g;j=[];for(var f=u,p;f!==null;){p=f;var w=p.stateNode;if(p.tag===5&&w!==null&&(p=w,h!==null&&(w=es(f,h),w!=null&&j.push(as(f,w,p)))),b)break;f=f.return}0<j.length&&(g=new x(g,y,null,n,d),m.push({event:g,listeners:j}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",g&&n!==ja&&(y=n.relatedTarget||n.fromElement)&&(mn(y)||y[Pt]))break e;if((x||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=u,y=y?mn(y):null,y!==null&&(b=Rn(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(j=qc,w="onMouseLeave",h="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(j=Hc,w="onPointerLeave",h="onPointerEnter",f="pointer"),b=x==null?g:Kn(x),p=y==null?g:Kn(y),g=new j(w,f+"leave",x,n,d),g.target=b,g.relatedTarget=p,w=null,mn(d)===u&&(j=new j(h,f+"enter",y,n,d),j.target=p,j.relatedTarget=b,w=j),b=w,x&&y)t:{for(j=x,h=y,f=0,p=j;p;p=Ln(p))f++;for(p=0,w=h;w;w=Ln(w))p++;for(;0<f-p;)j=Ln(j),f--;for(;0<p-f;)h=Ln(h),p--;for(;f--;){if(j===h||h!==null&&j===h.alternate)break t;j=Ln(j),h=Ln(h)}j=null}else j=null;x!==null&&nu(m,g,x,j,!1),y!==null&&b!==null&&nu(m,b,y,j,!0)}}e:{if(g=u?Kn(u):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var _=u0;else if(Qc(g))if(ih)_=m0;else{_=h0;var S=d0}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(_=f0);if(_&&(_=_(e,u))){sh(m,_,n,d);break e}S&&S(e,g,u),e==="focusout"&&(S=g._wrapperState)&&S.controlled&&g.type==="number"&&xa(g,"number",g.value)}switch(S=u?Kn(u):window,e){case"focusin":(Qc(S)||S.contentEditable==="true")&&(Hn=S,Pa=u,Br=null);break;case"focusout":Br=Pa=Hn=null;break;case"mousedown":Ta=!0;break;case"contextmenu":case"mouseup":case"dragend":Ta=!1,Zc(m,n,d);break;case"selectionchange":if(x0)break;case"keydown":case"keyup":Zc(m,n,d)}var v;if(Ll)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vn?nh(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(th&&n.locale!=="ko"&&(Vn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vn&&(v=eh()):(Ft=d,Dl="value"in Ft?Ft.value:Ft.textContent,Vn=!0)),S=_i(u,k),0<S.length&&(k=new Vc(k,e,null,n,d),m.push({event:k,listeners:S}),v?k.data=v:(v=rh(n),v!==null&&(k.data=v)))),(v=i0?o0(e,n):a0(e,n))&&(u=_i(u,"onBeforeInput"),0<u.length&&(d=new Vc("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=v))}ph(m,t)})}function as(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _i(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=es(e,n),i!=null&&r.unshift(as(e,i,s)),i=es(e,t),i!=null&&r.push(as(e,i,s))),e=e.return}return r}function Ln(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nu(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=es(n,i),c!=null&&a.unshift(as(n,c,l))):s||(c=es(n,i),c!=null&&a.push(as(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var b0=/\r\n?/g,j0=/\u0000|\uFFFD/g;function ru(e){return(typeof e=="string"?e:""+e).replace(b0,`
`).replace(j0,"")}function Bs(e,t,n){if(t=ru(t),ru(e)!==t&&n)throw Error(E(425))}function ki(){}var Aa=null,Ra=null;function Da(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ia=typeof setTimeout=="function"?setTimeout:void 0,N0=typeof clearTimeout=="function"?clearTimeout:void 0,su=typeof Promise=="function"?Promise:void 0,_0=typeof queueMicrotask=="function"?queueMicrotask:typeof su<"u"?function(e){return su.resolve(null).then(e).catch(k0)}:Ia;function k0(e){setTimeout(function(){throw e})}function zo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),rs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rs(t)}function Jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var br=Math.random().toString(36).slice(2),xt="__reactFiber$"+br,ls="__reactProps$"+br,Pt="__reactContainer$"+br,Oa="__reactEvents$"+br,S0="__reactListeners$"+br,C0="__reactHandles$"+br;function mn(e){var t=e[xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pt]||n[xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=iu(e);e!==null;){if(n=e[xt])return n;e=iu(e)}return t}e=n,n=e.parentNode}return null}function bs(e){return e=e[xt]||e[Pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function Xi(e){return e[ls]||null}var La=[],Qn=-1;function sn(e){return{current:e}}function Z(e){0>Qn||(e.current=La[Qn],La[Qn]=null,Qn--)}function Y(e,t){Qn++,La[Qn]=e.current,e.current=t}var nn={},ke=sn(nn),$e=sn(!1),bn=nn;function lr(e,t){var n=e.type.contextTypes;if(!n)return nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(e){return e=e.childContextTypes,e!=null}function Si(){Z($e),Z(ke)}function ou(e,t,n){if(ke.current!==nn)throw Error(E(168));Y(ke,t),Y($e,n)}function xh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(E(108,dp(e)||"Unknown",s));return se({},n,r)}function Ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nn,bn=ke.current,Y(ke,e),Y($e,$e.current),!0}function au(e,t,n){var r=e.stateNode;if(!r)throw Error(E(169));n?(e=xh(e,t,bn),r.__reactInternalMemoizedMergedChildContext=e,Z($e),Z(ke),Y(ke,e)):Z($e),Y($e,n)}var _t=null,Zi=!1,Fo=!1;function yh(e){_t===null?_t=[e]:_t.push(e)}function E0(e){Zi=!0,yh(e)}function on(){if(!Fo&&_t!==null){Fo=!0;var e=0,t=H;try{var n=_t;for(H=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_t=null,Zi=!1}catch(s){throw _t!==null&&(_t=_t.slice(e+1)),qd(Pl,on),s}finally{H=t,Fo=!1}}return null}var Gn=[],Jn=0,Ei=null,Pi=0,Ge=[],Je=0,jn=null,kt=1,St="";function un(e,t){Gn[Jn++]=Pi,Gn[Jn++]=Ei,Ei=e,Pi=t}function vh(e,t,n){Ge[Je++]=kt,Ge[Je++]=St,Ge[Je++]=jn,jn=e;var r=kt;e=St;var s=32-ut(r)-1;r&=~(1<<s),n+=1;var i=32-ut(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,kt=1<<32-ut(t)+s|n<<s|r,St=i+e}else kt=1<<i|n<<s|r,St=e}function Ul(e){e.return!==null&&(un(e,1),vh(e,1,0))}function Ml(e){for(;e===Ei;)Ei=Gn[--Jn],Gn[Jn]=null,Pi=Gn[--Jn],Gn[Jn]=null;for(;e===jn;)jn=Ge[--Je],Ge[Je]=null,St=Ge[--Je],Ge[Je]=null,kt=Ge[--Je],Ge[Je]=null}var Be=null,Fe=null,te=!1,lt=null;function wh(e,t){var n=Ye(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function lu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Be=e,Fe=Jt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Be=e,Fe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jn!==null?{id:kt,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ye(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Be=e,Fe=null,!0):!1;default:return!1}}function $a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ua(e){if(te){var t=Fe;if(t){var n=t;if(!lu(e,t)){if($a(e))throw Error(E(418));t=Jt(n.nextSibling);var r=Be;t&&lu(e,t)?wh(r,n):(e.flags=e.flags&-4097|2,te=!1,Be=e)}}else{if($a(e))throw Error(E(418));e.flags=e.flags&-4097|2,te=!1,Be=e}}}function cu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Be=e}function qs(e){if(e!==Be)return!1;if(!te)return cu(e),te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Da(e.type,e.memoizedProps)),t&&(t=Fe)){if($a(e))throw bh(),Error(E(418));for(;t;)wh(e,t),t=Jt(t.nextSibling)}if(cu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fe=Jt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fe=null}}else Fe=Be?Jt(e.stateNode.nextSibling):null;return!0}function bh(){for(var e=Fe;e;)e=Jt(e.nextSibling)}function cr(){Fe=Be=null,te=!1}function zl(e){lt===null?lt=[e]:lt.push(e)}var P0=Rt.ReactCurrentBatchConfig;function Pr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,e))}return e}function Vs(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uu(e){var t=e._init;return t(e._payload)}function jh(e){function t(h,f){if(e){var p=h.deletions;p===null?(h.deletions=[f],h.flags|=16):p.push(f)}}function n(h,f){if(!e)return null;for(;f!==null;)t(h,f),f=f.sibling;return null}function r(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function s(h,f){return h=en(h,f),h.index=0,h.sibling=null,h}function i(h,f,p){return h.index=p,e?(p=h.alternate,p!==null?(p=p.index,p<f?(h.flags|=2,f):p):(h.flags|=2,f)):(h.flags|=1048576,f)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,f,p,w){return f===null||f.tag!==6?(f=Qo(p,h.mode,w),f.return=h,f):(f=s(f,p),f.return=h,f)}function c(h,f,p,w){var _=p.type;return _===qn?d(h,f,p.props.children,w,p.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ot&&uu(_)===f.type)?(w=s(f,p.props),w.ref=Pr(h,f,p),w.return=h,w):(w=mi(p.type,p.key,p.props,null,h.mode,w),w.ref=Pr(h,f,p),w.return=h,w)}function u(h,f,p,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=Go(p,h.mode,w),f.return=h,f):(f=s(f,p.children||[]),f.return=h,f)}function d(h,f,p,w,_){return f===null||f.tag!==7?(f=yn(p,h.mode,w,_),f.return=h,f):(f=s(f,p),f.return=h,f)}function m(h,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Qo(""+f,h.mode,p),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ds:return p=mi(f.type,f.key,f.props,null,h.mode,p),p.ref=Pr(h,null,f),p.return=h,p;case Bn:return f=Go(f,h.mode,p),f.return=h,f;case Ot:var w=f._init;return m(h,w(f._payload),p)}if(Ir(f)||_r(f))return f=yn(f,h.mode,p,null),f.return=h,f;Vs(h,f)}return null}function g(h,f,p,w){var _=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return _!==null?null:l(h,f,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ds:return p.key===_?c(h,f,p,w):null;case Bn:return p.key===_?u(h,f,p,w):null;case Ot:return _=p._init,g(h,f,_(p._payload),w)}if(Ir(p)||_r(p))return _!==null?null:d(h,f,p,w,null);Vs(h,p)}return null}function x(h,f,p,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(p)||null,l(f,h,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ds:return h=h.get(w.key===null?p:w.key)||null,c(f,h,w,_);case Bn:return h=h.get(w.key===null?p:w.key)||null,u(f,h,w,_);case Ot:var S=w._init;return x(h,f,p,S(w._payload),_)}if(Ir(w)||_r(w))return h=h.get(p)||null,d(f,h,w,_,null);Vs(f,w)}return null}function y(h,f,p,w){for(var _=null,S=null,v=f,k=f=0,D=null;v!==null&&k<p.length;k++){v.index>k?(D=v,v=null):D=v.sibling;var T=g(h,v,p[k],w);if(T===null){v===null&&(v=D);break}e&&v&&T.alternate===null&&t(h,v),f=i(T,f,k),S===null?_=T:S.sibling=T,S=T,v=D}if(k===p.length)return n(h,v),te&&un(h,k),_;if(v===null){for(;k<p.length;k++)v=m(h,p[k],w),v!==null&&(f=i(v,f,k),S===null?_=v:S.sibling=v,S=v);return te&&un(h,k),_}for(v=r(h,v);k<p.length;k++)D=x(v,h,k,p[k],w),D!==null&&(e&&D.alternate!==null&&v.delete(D.key===null?k:D.key),f=i(D,f,k),S===null?_=D:S.sibling=D,S=D);return e&&v.forEach(function(z){return t(h,z)}),te&&un(h,k),_}function j(h,f,p,w){var _=_r(p);if(typeof _!="function")throw Error(E(150));if(p=_.call(p),p==null)throw Error(E(151));for(var S=_=null,v=f,k=f=0,D=null,T=p.next();v!==null&&!T.done;k++,T=p.next()){v.index>k?(D=v,v=null):D=v.sibling;var z=g(h,v,T.value,w);if(z===null){v===null&&(v=D);break}e&&v&&z.alternate===null&&t(h,v),f=i(z,f,k),S===null?_=z:S.sibling=z,S=z,v=D}if(T.done)return n(h,v),te&&un(h,k),_;if(v===null){for(;!T.done;k++,T=p.next())T=m(h,T.value,w),T!==null&&(f=i(T,f,k),S===null?_=T:S.sibling=T,S=T);return te&&un(h,k),_}for(v=r(h,v);!T.done;k++,T=p.next())T=x(v,h,k,T.value,w),T!==null&&(e&&T.alternate!==null&&v.delete(T.key===null?k:T.key),f=i(T,f,k),S===null?_=T:S.sibling=T,S=T);return e&&v.forEach(function(K){return t(h,K)}),te&&un(h,k),_}function b(h,f,p,w){if(typeof p=="object"&&p!==null&&p.type===qn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Ds:e:{for(var _=p.key,S=f;S!==null;){if(S.key===_){if(_=p.type,_===qn){if(S.tag===7){n(h,S.sibling),f=s(S,p.props.children),f.return=h,h=f;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ot&&uu(_)===S.type){n(h,S.sibling),f=s(S,p.props),f.ref=Pr(h,S,p),f.return=h,h=f;break e}n(h,S);break}else t(h,S);S=S.sibling}p.type===qn?(f=yn(p.props.children,h.mode,w,p.key),f.return=h,h=f):(w=mi(p.type,p.key,p.props,null,h.mode,w),w.ref=Pr(h,f,p),w.return=h,h=w)}return a(h);case Bn:e:{for(S=p.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(h,f.sibling),f=s(f,p.children||[]),f.return=h,h=f;break e}else{n(h,f);break}else t(h,f);f=f.sibling}f=Go(p,h.mode,w),f.return=h,h=f}return a(h);case Ot:return S=p._init,b(h,f,S(p._payload),w)}if(Ir(p))return y(h,f,p,w);if(_r(p))return j(h,f,p,w);Vs(h,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(h,f.sibling),f=s(f,p),f.return=h,h=f):(n(h,f),f=Qo(p,h.mode,w),f.return=h,h=f),a(h)):n(h,f)}return b}var ur=jh(!0),Nh=jh(!1),Ti=sn(null),Ai=null,Yn=null,Fl=null;function Bl(){Fl=Yn=Ai=null}function ql(e){var t=Ti.current;Z(Ti),e._currentValue=t}function Ma(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sr(e,t){Ai=e,Fl=Yn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function et(e){var t=e._currentValue;if(Fl!==e)if(e={context:e,memoizedValue:t,next:null},Yn===null){if(Ai===null)throw Error(E(308));Yn=e,Ai.dependencies={lanes:0,firstContext:e}}else Yn=Yn.next=e;return t}var pn=null;function Vl(e){pn===null?pn=[e]:pn.push(e)}function _h(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Vl(t)):(n.next=s.next,s.next=n),t.interleaved=n,Tt(e,r)}function Tt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Lt=!1;function Hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ct(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Tt(e,n)}return s=r.interleaved,s===null?(t.next=t,Vl(r)):(t.next=s.next,s.next=t),r.interleaved=t,Tt(e,n)}function li(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Tl(e,n)}}function du(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ri(e,t,n,r){var s=e.updateQueue;Lt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,d=u=c=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,j=l;switch(g=t,x=n,j.tag){case 1:if(y=j.payload,typeof y=="function"){m=y.call(x,m,g);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=j.payload,g=typeof y=="function"?y.call(x,m,g):y,g==null)break e;m=se({},m,g);break e;case 2:Lt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=m):d=d.next=x,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);_n|=a,e.lanes=a,e.memoizedState=m}}function hu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var js={},vt=sn(js),cs=sn(js),us=sn(js);function gn(e){if(e===js)throw Error(E(174));return e}function Wl(e,t){switch(Y(us,t),Y(cs,e),Y(vt,js),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=va(t,e)}Z(vt),Y(vt,t)}function dr(){Z(vt),Z(cs),Z(us)}function Sh(e){gn(us.current);var t=gn(vt.current),n=va(t,e.type);t!==n&&(Y(cs,e),Y(vt,n))}function Kl(e){cs.current===e&&(Z(vt),Z(cs))}var ne=sn(0);function Di(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bo=[];function Ql(){for(var e=0;e<Bo.length;e++)Bo[e]._workInProgressVersionPrimary=null;Bo.length=0}var ci=Rt.ReactCurrentDispatcher,qo=Rt.ReactCurrentBatchConfig,Nn=0,re=null,de=null,me=null,Ii=!1,qr=!1,ds=0,T0=0;function we(){throw Error(E(321))}function Gl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ht(e[n],t[n]))return!1;return!0}function Jl(e,t,n,r,s,i){if(Nn=i,re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ci.current=e===null||e.memoizedState===null?I0:O0,e=n(r,s),qr){i=0;do{if(qr=!1,ds=0,25<=i)throw Error(E(301));i+=1,me=de=null,t.updateQueue=null,ci.current=L0,e=n(r,s)}while(qr)}if(ci.current=Oi,t=de!==null&&de.next!==null,Nn=0,me=de=re=null,Ii=!1,t)throw Error(E(300));return e}function Yl(){var e=ds!==0;return ds=0,e}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?re.memoizedState=me=e:me=me.next=e,me}function tt(){if(de===null){var e=re.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=me===null?re.memoizedState:me.next;if(t!==null)me=t,de=e;else{if(e===null)throw Error(E(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},me===null?re.memoizedState=me=e:me=me.next=e}return me}function hs(e,t){return typeof t=="function"?t(e):t}function Vo(e){var t=tt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=de,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Nn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,re.lanes|=d,_n|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,ht(r,t.memoizedState)||(Le=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,re.lanes|=i,_n|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ho(e){var t=tt(),n=t.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);ht(i,t.memoizedState)||(Le=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ch(){}function Eh(e,t){var n=re,r=tt(),s=t(),i=!ht(r.memoizedState,s);if(i&&(r.memoizedState=s,Le=!0),r=r.queue,Xl(Ah.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||me!==null&&me.memoizedState.tag&1){if(n.flags|=2048,fs(9,Th.bind(null,n,r,s,t),void 0,null),pe===null)throw Error(E(349));Nn&30||Ph(n,t,s)}return s}function Ph(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Th(e,t,n,r){t.value=n,t.getSnapshot=r,Rh(t)&&Dh(e)}function Ah(e,t,n){return n(function(){Rh(t)&&Dh(e)})}function Rh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ht(e,n)}catch{return!0}}function Dh(e){var t=Tt(e,1);t!==null&&dt(t,e,1,-1)}function fu(e){var t=gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:e},t.queue=e,e=e.dispatch=D0.bind(null,re,e),[t.memoizedState,e]}function fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=re.updateQueue,t===null?(t={lastEffect:null,stores:null},re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ih(){return tt().memoizedState}function ui(e,t,n,r){var s=gt();re.flags|=e,s.memoizedState=fs(1|t,n,void 0,r===void 0?null:r)}function eo(e,t,n,r){var s=tt();r=r===void 0?null:r;var i=void 0;if(de!==null){var a=de.memoizedState;if(i=a.destroy,r!==null&&Gl(r,a.deps)){s.memoizedState=fs(t,n,i,r);return}}re.flags|=e,s.memoizedState=fs(1|t,n,i,r)}function mu(e,t){return ui(8390656,8,e,t)}function Xl(e,t){return eo(2048,8,e,t)}function Oh(e,t){return eo(4,2,e,t)}function Lh(e,t){return eo(4,4,e,t)}function $h(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uh(e,t,n){return n=n!=null?n.concat([e]):null,eo(4,4,$h.bind(null,t,e),n)}function Zl(){}function Mh(e,t){var n=tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zh(e,t){var n=tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fh(e,t,n){return Nn&21?(ht(n,t)||(n=Wd(),re.lanes|=n,_n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=n)}function A0(e,t){var n=H;H=n!==0&&4>n?n:4,e(!0);var r=qo.transition;qo.transition={};try{e(!1),t()}finally{H=n,qo.transition=r}}function Bh(){return tt().memoizedState}function R0(e,t,n){var r=Zt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qh(e))Vh(t,n);else if(n=_h(e,t,n,r),n!==null){var s=Ce();dt(n,e,r,s),Hh(n,t,r)}}function D0(e,t,n){var r=Zt(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qh(e))Vh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,ht(l,a)){var c=t.interleaved;c===null?(s.next=s,Vl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=_h(e,t,s,r),n!==null&&(s=Ce(),dt(n,e,r,s),Hh(n,t,r))}}function qh(e){var t=e.alternate;return e===re||t!==null&&t===re}function Vh(e,t){qr=Ii=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Tl(e,n)}}var Oi={readContext:et,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useInsertionEffect:we,useLayoutEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useMutableSource:we,useSyncExternalStore:we,useId:we,unstable_isNewReconciler:!1},I0={readContext:et,useCallback:function(e,t){return gt().memoizedState=[e,t===void 0?null:t],e},useContext:et,useEffect:mu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ui(4194308,4,$h.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return ui(4,2,e,t)},useMemo:function(e,t){var n=gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=R0.bind(null,re,e),[r.memoizedState,e]},useRef:function(e){var t=gt();return e={current:e},t.memoizedState=e},useState:fu,useDebugValue:Zl,useDeferredValue:function(e){return gt().memoizedState=e},useTransition:function(){var e=fu(!1),t=e[0];return e=A0.bind(null,e[1]),gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=re,s=gt();if(te){if(n===void 0)throw Error(E(407));n=n()}else{if(n=t(),pe===null)throw Error(E(349));Nn&30||Ph(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,mu(Ah.bind(null,r,i,e),[e]),r.flags|=2048,fs(9,Th.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gt(),t=pe.identifierPrefix;if(te){var n=St,r=kt;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=T0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},O0={readContext:et,useCallback:Mh,useContext:et,useEffect:Xl,useImperativeHandle:Uh,useInsertionEffect:Oh,useLayoutEffect:Lh,useMemo:zh,useReducer:Vo,useRef:Ih,useState:function(){return Vo(hs)},useDebugValue:Zl,useDeferredValue:function(e){var t=tt();return Fh(t,de.memoizedState,e)},useTransition:function(){var e=Vo(hs)[0],t=tt().memoizedState;return[e,t]},useMutableSource:Ch,useSyncExternalStore:Eh,useId:Bh,unstable_isNewReconciler:!1},L0={readContext:et,useCallback:Mh,useContext:et,useEffect:Xl,useImperativeHandle:Uh,useInsertionEffect:Oh,useLayoutEffect:Lh,useMemo:zh,useReducer:Ho,useRef:Ih,useState:function(){return Ho(hs)},useDebugValue:Zl,useDeferredValue:function(e){var t=tt();return de===null?t.memoizedState=e:Fh(t,de.memoizedState,e)},useTransition:function(){var e=Ho(hs)[0],t=tt().memoizedState;return[e,t]},useMutableSource:Ch,useSyncExternalStore:Eh,useId:Bh,unstable_isNewReconciler:!1};function it(e,t){if(e&&e.defaultProps){t=se({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:se({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var to={isMounted:function(e){return(e=e._reactInternals)?Rn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ce(),s=Zt(e),i=Ct(r,s);i.payload=t,n!=null&&(i.callback=n),t=Yt(e,i,s),t!==null&&(dt(t,e,s,r),li(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ce(),s=Zt(e),i=Ct(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Yt(e,i,s),t!==null&&(dt(t,e,s,r),li(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ce(),r=Zt(e),s=Ct(n,r);s.tag=2,t!=null&&(s.callback=t),t=Yt(e,s,r),t!==null&&(dt(t,e,r,n),li(t,e,r))}};function pu(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!is(n,r)||!is(s,i):!0}function Wh(e,t,n){var r=!1,s=nn,i=t.contextType;return typeof i=="object"&&i!==null?i=et(i):(s=Ue(t)?bn:ke.current,r=t.contextTypes,i=(r=r!=null)?lr(e,s):nn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=to,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function gu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&to.enqueueReplaceState(t,t.state,null)}function Fa(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Hl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=et(i):(i=Ue(t)?bn:ke.current,s.context=lr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(za(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&to.enqueueReplaceState(s,s.state,null),Ri(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function hr(e,t){try{var n="",r=t;do n+=up(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Wo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ba(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function Kh(e,t,n){n=Ct(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$i||($i=!0,Xa=r),Ba(e,t)},n}function Qh(e,t,n){n=Ct(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ba(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ba(e,t),typeof r!="function"&&(Xt===null?Xt=new Set([this]):Xt.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function xu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new $0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Y0.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ct(-1,1),t.tag=2,Yt(n,t,1))),n.lanes|=1),e)}var U0=Rt.ReactCurrentOwner,Le=!1;function Se(e,t,n,r){t.child=e===null?Nh(t,null,n,r):ur(t,e.child,n,r)}function wu(e,t,n,r,s){n=n.render;var i=t.ref;return sr(t,s),r=Jl(e,t,n,r,i,s),n=Yl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(te&&n&&Ul(t),t.flags|=1,Se(e,t,r,s),t.child)}function bu(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ac(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Gh(e,t,i,r,s)):(e=mi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:is,n(a,r)&&e.ref===t.ref)return At(e,t,s)}return t.flags|=1,e=en(i,r),e.ref=t.ref,e.return=t,t.child=e}function Gh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(is(i,r)&&e.ref===t.ref)if(Le=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,At(e,t,s)}return qa(e,t,n,r,s)}function Jh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Zn,ze),ze|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Y(Zn,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Y(Zn,ze),ze|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Y(Zn,ze),ze|=r;return Se(e,t,s,n),t.child}function Yh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qa(e,t,n,r,s){var i=Ue(n)?bn:ke.current;return i=lr(t,i),sr(t,s),n=Jl(e,t,n,r,i,s),r=Yl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(te&&r&&Ul(t),t.flags|=1,Se(e,t,n,s),t.child)}function ju(e,t,n,r,s){if(Ue(n)){var i=!0;Ci(t)}else i=!1;if(sr(t,s),t.stateNode===null)di(e,t),Wh(t,n,r),Fa(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=et(u):(u=Ue(n)?bn:ke.current,u=lr(t,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&gu(t,a,r,u),Lt=!1;var g=t.memoizedState;a.state=g,Ri(t,r,a,s),c=t.memoizedState,l!==r||g!==c||$e.current||Lt?(typeof d=="function"&&(za(t,n,d,r),c=t.memoizedState),(l=Lt||pu(t,n,l,r,g,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,kh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:it(t.type,l),a.props=u,m=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=et(c):(c=Ue(n)?bn:ke.current,c=lr(t,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||g!==c)&&gu(t,a,r,c),Lt=!1,g=t.memoizedState,a.state=g,Ri(t,r,a,s);var y=t.memoizedState;l!==m||g!==y||$e.current||Lt?(typeof x=="function"&&(za(t,n,x,r),y=t.memoizedState),(u=Lt||pu(t,n,u,r,g,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Va(e,t,n,r,i,s)}function Va(e,t,n,r,s,i){Yh(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&au(t,n,!1),At(e,t,i);r=t.stateNode,U0.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ur(t,e.child,null,i),t.child=ur(t,null,l,i)):Se(e,t,l,i),t.memoizedState=r.state,s&&au(t,n,!0),t.child}function Xh(e){var t=e.stateNode;t.pendingContext?ou(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ou(e,t.context,!1),Wl(e,t.containerInfo)}function Nu(e,t,n,r,s){return cr(),zl(s),t.flags|=256,Se(e,t,n,r),t.child}var Ha={dehydrated:null,treeContext:null,retryLane:0};function Wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zh(e,t,n){var r=t.pendingProps,s=ne.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Y(ne,s&1),e===null)return Ua(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=so(a,r,0,null),e=yn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Wa(n),t.memoizedState=Ha,e):ec(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return M0(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=en(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=en(l,i):(i=yn(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Wa(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Ha,r}return i=e.child,e=i.sibling,r=en(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ec(e,t){return t=so({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hs(e,t,n,r){return r!==null&&zl(r),ur(t,e.child,null,n),e=ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M0(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Wo(Error(E(422))),Hs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=so({mode:"visible",children:r.children},s,0,null),i=yn(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ur(t,e.child,null,a),t.child.memoizedState=Wa(a),t.memoizedState=Ha,i);if(!(t.mode&1))return Hs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(E(419)),r=Wo(i,r,void 0),Hs(e,t,a,r)}if(l=(a&e.childLanes)!==0,Le||l){if(r=pe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tt(e,s),dt(r,e,s,-1))}return oc(),r=Wo(Error(E(421))),Hs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=X0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Fe=Jt(s.nextSibling),Be=t,te=!0,lt=null,e!==null&&(Ge[Je++]=kt,Ge[Je++]=St,Ge[Je++]=jn,kt=e.id,St=e.overflow,jn=t),t=ec(t,r.children),t.flags|=4096,t)}function _u(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ma(e.return,t,n)}function Ko(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ef(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Se(e,t,r.children,n),r=ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_u(e,n,t);else if(e.tag===19)_u(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Y(ne,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Di(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ko(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Di(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ko(t,!0,n,null,i);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function di(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function At(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,n=en(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=en(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function z0(e,t,n){switch(t.tag){case 3:Xh(t),cr();break;case 5:Sh(t);break;case 1:Ue(t.type)&&Ci(t);break;case 4:Wl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Y(Ti,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Y(ne,ne.current&1),t.flags|=128,null):n&t.child.childLanes?Zh(e,t,n):(Y(ne,ne.current&1),e=At(e,t,n),e!==null?e.sibling:null);Y(ne,ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ef(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Y(ne,ne.current),r)break;return null;case 22:case 23:return t.lanes=0,Jh(e,t,n)}return At(e,t,n)}var tf,Ka,nf,rf;tf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ka=function(){};nf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,gn(vt.current);var i=null;switch(n){case"input":s=pa(e,s),r=pa(e,r),i=[];break;case"select":s=se({},s,{value:void 0}),r=se({},r,{value:void 0}),i=[];break;case"textarea":s=ya(e,s),r=ya(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ki)}wa(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xr.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&X("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};rf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Tr(e,t){if(!te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function F0(e,t,n){var r=t.pendingProps;switch(Ml(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return Ue(t.type)&&Si(),be(t),null;case 3:return r=t.stateNode,dr(),Z($e),Z(ke),Ql(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lt!==null&&(tl(lt),lt=null))),Ka(e,t),be(t),null;case 5:Kl(t);var s=gn(us.current);if(n=t.type,e!==null&&t.stateNode!=null)nf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(E(166));return be(t),null}if(e=gn(vt.current),qs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[xt]=t,r[ls]=i,e=(t.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)X(Lr[s],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":Dc(r,i),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},X("invalid",r);break;case"textarea":Oc(r,i),X("invalid",r)}wa(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bs(r.textContent,l,e),s=["children",""+l]):Xr.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&X("scroll",r)}switch(n){case"input":Is(r),Ic(r,i,!0);break;case"textarea":Is(r),Lc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ki)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ad(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[xt]=t,e[ls]=r,tf(e,t,!1,!1),t.stateNode=e;e:{switch(a=ba(n,r),n){case"dialog":X("cancel",e),X("close",e),s=r;break;case"iframe":case"object":case"embed":X("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)X(Lr[s],e);s=r;break;case"source":X("error",e),s=r;break;case"img":case"image":case"link":X("error",e),X("load",e),s=r;break;case"details":X("toggle",e),s=r;break;case"input":Dc(e,r),s=pa(e,r),X("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=se({},r,{value:void 0}),X("invalid",e);break;case"textarea":Oc(e,r),s=ya(e,r),X("invalid",e);break;default:s=r}wa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Id(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rd(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Zr(e,c):typeof c=="number"&&Zr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&X("scroll",e):c!=null&&_l(e,i,c,a))}switch(n){case"input":Is(e),Ic(e,r,!1);break;case"textarea":Is(e),Lc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+tn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?er(e,!!r.multiple,i,!1):r.defaultValue!=null&&er(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ki)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(e&&t.stateNode!=null)rf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(E(166));if(n=gn(us.current),gn(vt.current),qs(t)){if(r=t.stateNode,n=t.memoizedProps,r[xt]=t,(i=r.nodeValue!==n)&&(e=Be,e!==null))switch(e.tag){case 3:Bs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xt]=t,t.stateNode=r}return be(t),null;case 13:if(Z(ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(te&&Fe!==null&&t.mode&1&&!(t.flags&128))bh(),cr(),t.flags|=98560,i=!1;else if(i=qs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[xt]=t}else cr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),i=!1}else lt!==null&&(tl(lt),lt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?he===0&&(he=3):oc())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return dr(),Ka(e,t),e===null&&os(t.stateNode.containerInfo),be(t),null;case 10:return ql(t.type._context),be(t),null;case 17:return Ue(t.type)&&Si(),be(t),null;case 19:if(Z(ne),i=t.memoizedState,i===null)return be(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Tr(i,!1);else{if(he!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Di(e),a!==null){for(t.flags|=128,Tr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Y(ne,ne.current&1|2),t.child}e=e.sibling}i.tail!==null&&oe()>fr&&(t.flags|=128,r=!0,Tr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Di(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!te)return be(t),null}else 2*oe()-i.renderingStartTime>fr&&n!==1073741824&&(t.flags|=128,r=!0,Tr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=oe(),t.sibling=null,n=ne.current,Y(ne,r?n&1|2:n&1),t):(be(t),null);case 22:case 23:return ic(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ze&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function B0(e,t){switch(Ml(t),t.tag){case 1:return Ue(t.type)&&Si(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dr(),Z($e),Z(ke),Ql(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kl(t),null;case 13:if(Z(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(ne),null;case 4:return dr(),null;case 10:return ql(t.type._context),null;case 22:case 23:return ic(),null;case 24:return null;default:return null}}var Ws=!1,Ne=!1,q0=typeof WeakSet=="function"?WeakSet:Set,R=null;function Xn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(e,t,r)}else n.current=null}function Qa(e,t,n){try{n()}catch(r){ie(e,t,r)}}var ku=!1;function V0(e,t){if(Aa=ji,e=lh(),$l(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,m=e,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===e)break t;if(g===n&&++u===s&&(l=a),g===i&&++d===r&&(c=a),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ra={focusedElem:e,selectionRange:n},ji=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var j=y.memoizedProps,b=y.memoizedState,h=t.stateNode,f=h.getSnapshotBeforeUpdate(t.elementType===t.type?j:it(t.type,j),b);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){ie(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return y=ku,ku=!1,y}function Vr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qa(t,n,i)}s=s.next}while(s!==r)}}function no(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ga(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sf(e){var t=e.alternate;t!==null&&(e.alternate=null,sf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xt],delete t[ls],delete t[Oa],delete t[S0],delete t[C0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function of(e){return e.tag===5||e.tag===3||e.tag===4}function Su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ja(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ki));else if(r!==4&&(e=e.child,e!==null))for(Ja(e,t,n),e=e.sibling;e!==null;)Ja(e,t,n),e=e.sibling}function Ya(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ya(e,t,n),e=e.sibling;e!==null;)Ya(e,t,n),e=e.sibling}var xe=null,ot=!1;function Dt(e,t,n){for(n=n.child;n!==null;)af(e,t,n),n=n.sibling}function af(e,t,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Qi,n)}catch{}switch(n.tag){case 5:Ne||Xn(n,t);case 6:var r=xe,s=ot;xe=null,Dt(e,t,n),xe=r,ot=s,xe!==null&&(ot?(e=xe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xe.removeChild(n.stateNode));break;case 18:xe!==null&&(ot?(e=xe,n=n.stateNode,e.nodeType===8?zo(e.parentNode,n):e.nodeType===1&&zo(e,n),rs(e)):zo(xe,n.stateNode));break;case 4:r=xe,s=ot,xe=n.stateNode.containerInfo,ot=!0,Dt(e,t,n),xe=r,ot=s;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Qa(n,t,a),s=s.next}while(s!==r)}Dt(e,t,n);break;case 1:if(!Ne&&(Xn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ie(n,t,l)}Dt(e,t,n);break;case 21:Dt(e,t,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,Dt(e,t,n),Ne=r):Dt(e,t,n);break;default:Dt(e,t,n)}}function Cu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new q0),t.forEach(function(r){var s=Z0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:xe=l.stateNode,ot=!1;break e;case 3:xe=l.stateNode.containerInfo,ot=!0;break e;case 4:xe=l.stateNode.containerInfo,ot=!0;break e}l=l.return}if(xe===null)throw Error(E(160));af(i,a,s),xe=null,ot=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ie(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lf(t,e),t=t.sibling}function lf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rt(t,e),pt(e),r&4){try{Vr(3,e,e.return),no(3,e)}catch(j){ie(e,e.return,j)}try{Vr(5,e,e.return)}catch(j){ie(e,e.return,j)}}break;case 1:rt(t,e),pt(e),r&512&&n!==null&&Xn(n,n.return);break;case 5:if(rt(t,e),pt(e),r&512&&n!==null&&Xn(n,n.return),e.flags&32){var s=e.stateNode;try{Zr(s,"")}catch(j){ie(e,e.return,j)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Pd(s,i),ba(l,a);var u=ba(l,i);for(a=0;a<c.length;a+=2){var d=c[a],m=c[a+1];d==="style"?Id(s,m):d==="dangerouslySetInnerHTML"?Rd(s,m):d==="children"?Zr(s,m):_l(s,d,m,u)}switch(l){case"input":ga(s,i);break;case"textarea":Td(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?er(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?er(s,!!i.multiple,i.defaultValue,!0):er(s,!!i.multiple,i.multiple?[]:"",!1))}s[ls]=i}catch(j){ie(e,e.return,j)}}break;case 6:if(rt(t,e),pt(e),r&4){if(e.stateNode===null)throw Error(E(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(j){ie(e,e.return,j)}}break;case 3:if(rt(t,e),pt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rs(t.containerInfo)}catch(j){ie(e,e.return,j)}break;case 4:rt(t,e),pt(e);break;case 13:rt(t,e),pt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rc=oe())),r&4&&Cu(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ne=(u=Ne)||d,rt(t,e),Ne=u):rt(t,e),pt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(m=R=d;R!==null;){switch(g=R,x=g.child,g.tag){case 0:case 11:case 14:case 15:Vr(4,g,g.return);break;case 1:Xn(g,g.return);var y=g.stateNode;if(typeof y.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(j){ie(r,n,j)}}break;case 5:Xn(g,g.return);break;case 22:if(g.memoizedState!==null){Pu(m);continue}}x!==null?(x.return=g,R=x):Pu(m)}d=d.sibling}e:for(d=null,m=e;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Dd("display",a))}catch(j){ie(e,e.return,j)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(j){ie(e,e.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rt(t,e),pt(e),r&4&&Cu(e);break;case 21:break;default:rt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(of(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zr(s,""),r.flags&=-33);var i=Su(e);Ya(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Su(e);Ja(e,l,a);break;default:throw Error(E(161))}}catch(c){ie(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function H0(e,t,n){R=e,cf(e)}function cf(e,t,n){for(var r=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ws;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ne;l=Ws;var u=Ne;if(Ws=a,(Ne=c)&&!u)for(R=s;R!==null;)a=R,c=a.child,a.tag===22&&a.memoizedState!==null?Tu(s):c!==null?(c.return=a,R=c):Tu(s);for(;i!==null;)R=i,cf(i),i=i.sibling;R=s,Ws=l,Ne=u}Eu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):Eu(e)}}function Eu(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||no(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:it(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&hu(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hu(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&rs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ne||t.flags&512&&Ga(t)}catch(g){ie(t,t.return,g)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function Pu(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function Tu(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{no(4,t)}catch(c){ie(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ie(t,s,c)}}var i=t.return;try{Ga(t)}catch(c){ie(t,i,c)}break;case 5:var a=t.return;try{Ga(t)}catch(c){ie(t,a,c)}}}catch(c){ie(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var W0=Math.ceil,Li=Rt.ReactCurrentDispatcher,tc=Rt.ReactCurrentOwner,Xe=Rt.ReactCurrentBatchConfig,q=0,pe=null,le=null,ye=0,ze=0,Zn=sn(0),he=0,ms=null,_n=0,ro=0,nc=0,Hr=null,Ie=null,rc=0,fr=1/0,jt=null,$i=!1,Xa=null,Xt=null,Ks=!1,Bt=null,Ui=0,Wr=0,Za=null,hi=-1,fi=0;function Ce(){return q&6?oe():hi!==-1?hi:hi=oe()}function Zt(e){return e.mode&1?q&2&&ye!==0?ye&-ye:P0.transition!==null?(fi===0&&(fi=Wd()),fi):(e=H,e!==0||(e=window.event,e=e===void 0?16:Zd(e.type)),e):1}function dt(e,t,n,r){if(50<Wr)throw Wr=0,Za=null,Error(E(185));vs(e,n,r),(!(q&2)||e!==pe)&&(e===pe&&(!(q&2)&&(ro|=n),he===4&&Mt(e,ye)),Me(e,r),n===1&&q===0&&!(t.mode&1)&&(fr=oe()+500,Zi&&on()))}function Me(e,t){var n=e.callbackNode;Pp(e,t);var r=bi(e,e===pe?ye:0);if(r===0)n!==null&&Mc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mc(n),t===1)e.tag===0?E0(Au.bind(null,e)):yh(Au.bind(null,e)),_0(function(){!(q&6)&&on()}),n=null;else{switch(Kd(r)){case 1:n=Pl;break;case 4:n=Vd;break;case 16:n=wi;break;case 536870912:n=Hd;break;default:n=wi}n=xf(n,uf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uf(e,t){if(hi=-1,fi=0,q&6)throw Error(E(327));var n=e.callbackNode;if(ir()&&e.callbackNode!==n)return null;var r=bi(e,e===pe?ye:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Mi(e,r);else{t=r;var s=q;q|=2;var i=hf();(pe!==e||ye!==t)&&(jt=null,fr=oe()+500,xn(e,t));do try{G0();break}catch(l){df(e,l)}while(!0);Bl(),Li.current=i,q=s,le!==null?t=0:(pe=null,ye=0,t=he)}if(t!==0){if(t===2&&(s=Sa(e),s!==0&&(r=s,t=el(e,s))),t===1)throw n=ms,xn(e,0),Mt(e,r),Me(e,oe()),n;if(t===6)Mt(e,r);else{if(s=e.current.alternate,!(r&30)&&!K0(s)&&(t=Mi(e,r),t===2&&(i=Sa(e),i!==0&&(r=i,t=el(e,i))),t===1))throw n=ms,xn(e,0),Mt(e,r),Me(e,oe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(E(345));case 2:dn(e,Ie,jt);break;case 3:if(Mt(e,r),(r&130023424)===r&&(t=rc+500-oe(),10<t)){if(bi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ce(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ia(dn.bind(null,e,Ie,jt),t);break}dn(e,Ie,jt);break;case 4:if(Mt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-ut(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W0(r/1960))-r,10<r){e.timeoutHandle=Ia(dn.bind(null,e,Ie,jt),r);break}dn(e,Ie,jt);break;case 5:dn(e,Ie,jt);break;default:throw Error(E(329))}}}return Me(e,oe()),e.callbackNode===n?uf.bind(null,e):null}function el(e,t){var n=Hr;return e.current.memoizedState.isDehydrated&&(xn(e,t).flags|=256),e=Mi(e,t),e!==2&&(t=Ie,Ie=n,t!==null&&tl(t)),e}function tl(e){Ie===null?Ie=e:Ie.push.apply(Ie,e)}function K0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ht(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mt(e,t){for(t&=~nc,t&=~ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ut(t),r=1<<n;e[n]=-1,t&=~r}}function Au(e){if(q&6)throw Error(E(327));ir();var t=bi(e,0);if(!(t&1))return Me(e,oe()),null;var n=Mi(e,t);if(e.tag!==0&&n===2){var r=Sa(e);r!==0&&(t=r,n=el(e,r))}if(n===1)throw n=ms,xn(e,0),Mt(e,t),Me(e,oe()),n;if(n===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dn(e,Ie,jt),Me(e,oe()),null}function sc(e,t){var n=q;q|=1;try{return e(t)}finally{q=n,q===0&&(fr=oe()+500,Zi&&on())}}function kn(e){Bt!==null&&Bt.tag===0&&!(q&6)&&ir();var t=q;q|=1;var n=Xe.transition,r=H;try{if(Xe.transition=null,H=1,e)return e()}finally{H=r,Xe.transition=n,q=t,!(q&6)&&on()}}function ic(){ze=Zn.current,Z(Zn)}function xn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,N0(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(Ml(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Si();break;case 3:dr(),Z($e),Z(ke),Ql();break;case 5:Kl(r);break;case 4:dr();break;case 13:Z(ne);break;case 19:Z(ne);break;case 10:ql(r.type._context);break;case 22:case 23:ic()}n=n.return}if(pe=e,le=e=en(e.current,null),ye=ze=t,he=0,ms=null,nc=ro=_n=0,Ie=Hr=null,pn!==null){for(t=0;t<pn.length;t++)if(n=pn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}pn=null}return e}function df(e,t){do{var n=le;try{if(Bl(),ci.current=Oi,Ii){for(var r=re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ii=!1}if(Nn=0,me=de=re=null,qr=!1,ds=0,tc.current=null,n===null||n.return===null){he=1,ms=t,le=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=ye,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=yu(a);if(x!==null){x.flags&=-257,vu(x,a,l,i,t),x.mode&1&&xu(i,u,t),t=x,c=u;var y=t.updateQueue;if(y===null){var j=new Set;j.add(c),t.updateQueue=j}else y.add(c);break e}else{if(!(t&1)){xu(i,u,t),oc();break e}c=Error(E(426))}}else if(te&&l.mode&1){var b=yu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),vu(b,a,l,i,t),zl(hr(c,l));break e}}i=c=hr(c,l),he!==4&&(he=2),Hr===null?Hr=[i]:Hr.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=Kh(i,c,t);du(i,h);break e;case 1:l=c;var f=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Xt===null||!Xt.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Qh(i,l,t);du(i,w);break e}}i=i.return}while(i!==null)}mf(n)}catch(_){t=_,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function hf(){var e=Li.current;return Li.current=Oi,e===null?Oi:e}function oc(){(he===0||he===3||he===2)&&(he=4),pe===null||!(_n&268435455)&&!(ro&268435455)||Mt(pe,ye)}function Mi(e,t){var n=q;q|=2;var r=hf();(pe!==e||ye!==t)&&(jt=null,xn(e,t));do try{Q0();break}catch(s){df(e,s)}while(!0);if(Bl(),q=n,Li.current=r,le!==null)throw Error(E(261));return pe=null,ye=0,he}function Q0(){for(;le!==null;)ff(le)}function G0(){for(;le!==null&&!wp();)ff(le)}function ff(e){var t=gf(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?mf(e):le=t,tc.current=null}function mf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=B0(n,t),n!==null){n.flags&=32767,le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{he=6,le=null;return}}else if(n=F0(n,t,ze),n!==null){le=n;return}if(t=t.sibling,t!==null){le=t;return}le=t=e}while(t!==null);he===0&&(he=5)}function dn(e,t,n){var r=H,s=Xe.transition;try{Xe.transition=null,H=1,J0(e,t,n,r)}finally{Xe.transition=s,H=r}return null}function J0(e,t,n,r){do ir();while(Bt!==null);if(q&6)throw Error(E(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Tp(e,i),e===pe&&(le=pe=null,ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ks||(Ks=!0,xf(wi,function(){return ir(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xe.transition,Xe.transition=null;var a=H;H=1;var l=q;q|=4,tc.current=null,V0(e,n),lf(n,e),g0(Ra),ji=!!Aa,Ra=Aa=null,e.current=n,H0(n),bp(),q=l,H=a,Xe.transition=i}else e.current=n;if(Ks&&(Ks=!1,Bt=e,Ui=s),i=e.pendingLanes,i===0&&(Xt=null),_p(n.stateNode),Me(e,oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($i)throw $i=!1,e=Xa,Xa=null,e;return Ui&1&&e.tag!==0&&ir(),i=e.pendingLanes,i&1?e===Za?Wr++:(Wr=0,Za=e):Wr=0,on(),null}function ir(){if(Bt!==null){var e=Kd(Ui),t=Xe.transition,n=H;try{if(Xe.transition=null,H=16>e?16:e,Bt===null)var r=!1;else{if(e=Bt,Bt=null,Ui=0,q&6)throw Error(E(331));var s=q;for(q|=4,R=e.current;R!==null;){var i=R,a=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Vr(8,d,i)}var m=d.child;if(m!==null)m.return=d,R=m;else for(;R!==null;){d=R;var g=d.sibling,x=d.return;if(sf(d),d===u){R=null;break}if(g!==null){g.return=x,R=g;break}R=x}}}var y=i.alternate;if(y!==null){var j=y.child;if(j!==null){y.child=null;do{var b=j.sibling;j.sibling=null,j=b}while(j!==null)}}R=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,R=a;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vr(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,R=h;break e}R=i.return}}var f=e.current;for(R=f;R!==null;){a=R;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,R=p;else e:for(a=f;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:no(9,l)}}catch(_){ie(l,l.return,_)}if(l===a){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(q=s,on(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Qi,e)}catch{}r=!0}return r}finally{H=n,Xe.transition=t}}return!1}function Ru(e,t,n){t=hr(n,t),t=Kh(e,t,1),e=Yt(e,t,1),t=Ce(),e!==null&&(vs(e,1,t),Me(e,t))}function ie(e,t,n){if(e.tag===3)Ru(e,e,n);else for(;t!==null;){if(t.tag===3){Ru(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xt===null||!Xt.has(r))){e=hr(n,e),e=Qh(t,e,1),t=Yt(t,e,1),e=Ce(),t!==null&&(vs(t,1,e),Me(t,e));break}}t=t.return}}function Y0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ce(),e.pingedLanes|=e.suspendedLanes&n,pe===e&&(ye&n)===n&&(he===4||he===3&&(ye&130023424)===ye&&500>oe()-rc?xn(e,0):nc|=n),Me(e,t)}function pf(e,t){t===0&&(e.mode&1?(t=$s,$s<<=1,!($s&130023424)&&($s=4194304)):t=1);var n=Ce();e=Tt(e,t),e!==null&&(vs(e,t,n),Me(e,n))}function X0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pf(e,n)}function Z0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(t),pf(e,n)}var gf;gf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Le=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Le=!1,z0(e,t,n);Le=!!(e.flags&131072)}else Le=!1,te&&t.flags&1048576&&vh(t,Pi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;di(e,t),e=t.pendingProps;var s=lr(t,ke.current);sr(t,n),s=Jl(null,t,r,e,s,n);var i=Yl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(r)?(i=!0,Ci(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hl(t),s.updater=to,t.stateNode=s,s._reactInternals=t,Fa(t,r,e,n),t=Va(null,t,r,!0,i,n)):(t.tag=0,te&&i&&Ul(t),Se(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(di(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=tg(r),e=it(r,e),s){case 0:t=qa(null,t,r,e,n);break e;case 1:t=ju(null,t,r,e,n);break e;case 11:t=wu(null,t,r,e,n);break e;case 14:t=bu(null,t,r,it(r.type,e),n);break e}throw Error(E(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:it(r,s),qa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:it(r,s),ju(e,t,r,s,n);case 3:e:{if(Xh(t),e===null)throw Error(E(387));r=t.pendingProps,i=t.memoizedState,s=i.element,kh(e,t),Ri(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=hr(Error(E(423)),t),t=Nu(e,t,r,n,s);break e}else if(r!==s){s=hr(Error(E(424)),t),t=Nu(e,t,r,n,s);break e}else for(Fe=Jt(t.stateNode.containerInfo.firstChild),Be=t,te=!0,lt=null,n=Nh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cr(),r===s){t=At(e,t,n);break e}Se(e,t,r,n)}t=t.child}return t;case 5:return Sh(t),e===null&&Ua(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Da(r,s)?a=null:i!==null&&Da(r,i)&&(t.flags|=32),Yh(e,t),Se(e,t,a,n),t.child;case 6:return e===null&&Ua(t),null;case 13:return Zh(e,t,n);case 4:return Wl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ur(t,null,r,n):Se(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:it(r,s),wu(e,t,r,s,n);case 7:return Se(e,t,t.pendingProps,n),t.child;case 8:return Se(e,t,t.pendingProps.children,n),t.child;case 12:return Se(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Y(Ti,r._currentValue),r._currentValue=a,i!==null)if(ht(i.value,a)){if(i.children===s.children&&!$e.current){t=At(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ct(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ma(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(E(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ma(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Se(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,sr(t,n),s=et(s),r=r(s),t.flags|=1,Se(e,t,r,n),t.child;case 14:return r=t.type,s=it(r,t.pendingProps),s=it(r.type,s),bu(e,t,r,s,n);case 15:return Gh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:it(r,s),di(e,t),t.tag=1,Ue(r)?(e=!0,Ci(t)):e=!1,sr(t,n),Wh(t,r,s),Fa(t,r,s,n),Va(null,t,r,!0,e,n);case 19:return ef(e,t,n);case 22:return Jh(e,t,n)}throw Error(E(156,t.tag))};function xf(e,t){return qd(e,t)}function eg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,n,r){return new eg(e,t,n,r)}function ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tg(e){if(typeof e=="function")return ac(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sl)return 11;if(e===Cl)return 14}return 2}function en(e,t){var n=e.alternate;return n===null?(n=Ye(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function mi(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")ac(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case qn:return yn(n.children,s,i,t);case kl:a=8,s|=8;break;case da:return e=Ye(12,n,t,s|2),e.elementType=da,e.lanes=i,e;case ha:return e=Ye(13,n,t,s),e.elementType=ha,e.lanes=i,e;case fa:return e=Ye(19,n,t,s),e.elementType=fa,e.lanes=i,e;case Sd:return so(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _d:a=10;break e;case kd:a=9;break e;case Sl:a=11;break e;case Cl:a=14;break e;case Ot:a=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=Ye(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function yn(e,t,n,r){return e=Ye(7,e,r,t),e.lanes=n,e}function so(e,t,n,r){return e=Ye(22,e,r,t),e.elementType=Sd,e.lanes=n,e.stateNode={isHidden:!1},e}function Qo(e,t,n){return e=Ye(6,e,null,t),e.lanes=n,e}function Go(e,t,n){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ng(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Po(0),this.expirationTimes=Po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Po(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lc(e,t,n,r,s,i,a,l,c){return e=new ng(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ye(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hl(i),e}function rg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yf(e){if(!e)return nn;e=e._reactInternals;e:{if(Rn(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var n=e.type;if(Ue(n))return xh(e,n,t)}return t}function vf(e,t,n,r,s,i,a,l,c){return e=lc(n,r,!0,e,s,i,a,l,c),e.context=yf(null),n=e.current,r=Ce(),s=Zt(n),i=Ct(r,s),i.callback=t??null,Yt(n,i,s),e.current.lanes=s,vs(e,s,r),Me(e,r),e}function io(e,t,n,r){var s=t.current,i=Ce(),a=Zt(s);return n=yf(n),t.context===null?t.context=n:t.pendingContext=n,t=Ct(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yt(s,t,a),e!==null&&(dt(e,s,a,i),li(e,s,a)),a}function zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Du(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cc(e,t){Du(e,t),(e=e.alternate)&&Du(e,t)}function sg(){return null}var wf=typeof reportError=="function"?reportError:function(e){console.error(e)};function uc(e){this._internalRoot=e}oo.prototype.render=uc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));io(e,t,null,null)};oo.prototype.unmount=uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kn(function(){io(null,e,null,null)}),t[Pt]=null}};function oo(e){this._internalRoot=e}oo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ut.length&&t!==0&&t<Ut[n].priority;n++);Ut.splice(n,0,e),n===0&&Xd(e)}};function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Iu(){}function ig(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=zi(a);i.call(u)}}var a=vf(t,r,e,0,null,!1,!1,"",Iu);return e._reactRootContainer=a,e[Pt]=a.current,os(e.nodeType===8?e.parentNode:e),kn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=zi(c);l.call(u)}}var c=lc(e,0,!1,null,null,!1,!1,"",Iu);return e._reactRootContainer=c,e[Pt]=c.current,os(e.nodeType===8?e.parentNode:e),kn(function(){io(t,c,n,r)}),c}function lo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=zi(a);l.call(c)}}io(t,a,e,s)}else a=ig(n,t,e,s,r);return zi(a)}Qd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Or(t.pendingLanes);n!==0&&(Tl(t,n|1),Me(t,oe()),!(q&6)&&(fr=oe()+500,on()))}break;case 13:kn(function(){var r=Tt(e,1);if(r!==null){var s=Ce();dt(r,e,1,s)}}),cc(e,1)}};Al=function(e){if(e.tag===13){var t=Tt(e,134217728);if(t!==null){var n=Ce();dt(t,e,134217728,n)}cc(e,134217728)}};Gd=function(e){if(e.tag===13){var t=Zt(e),n=Tt(e,t);if(n!==null){var r=Ce();dt(n,e,t,r)}cc(e,t)}};Jd=function(){return H};Yd=function(e,t){var n=H;try{return H=e,t()}finally{H=n}};Na=function(e,t,n){switch(t){case"input":if(ga(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Xi(r);if(!s)throw Error(E(90));Ed(r),ga(r,s)}}}break;case"textarea":Td(e,n);break;case"select":t=n.value,t!=null&&er(e,!!n.multiple,t,!1)}};$d=sc;Ud=kn;var og={usingClientEntryPoint:!1,Events:[bs,Kn,Xi,Od,Ld,sc]},Ar={findFiberByHostInstance:mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ag={bundleType:Ar.bundleType,version:Ar.version,rendererPackageName:Ar.rendererPackageName,rendererConfig:Ar.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ar.findFiberByHostInstance||sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qs.isDisabled&&Qs.supportsFiber)try{Qi=Qs.inject(ag),yt=Qs}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=og;We.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dc(t))throw Error(E(200));return rg(e,t,null,n)};We.createRoot=function(e,t){if(!dc(e))throw Error(E(299));var n=!1,r="",s=wf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=lc(e,1,!1,null,null,n,!1,r,s),e[Pt]=t.current,os(e.nodeType===8?e.parentNode:e),new uc(t)};We.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=Fd(t),e=e===null?null:e.stateNode,e};We.flushSync=function(e){return kn(e)};We.hydrate=function(e,t,n){if(!ao(t))throw Error(E(200));return lo(null,e,t,!0,n)};We.hydrateRoot=function(e,t,n){if(!dc(e))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=wf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vf(t,null,e,1,n??null,s,!1,i,a),e[Pt]=t.current,os(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new oo(t)};We.render=function(e,t,n){if(!ao(t))throw Error(E(200));return lo(null,e,t,!1,n)};We.unmountComponentAtNode=function(e){if(!ao(e))throw Error(E(40));return e._reactRootContainer?(kn(function(){lo(null,null,e,!1,function(){e._reactRootContainer=null,e[Pt]=null})}),!0):!1};We.unstable_batchedUpdates=sc;We.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ao(n))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return lo(e,t,n,!1,r)};We.version="18.3.1-next-f1338f8080-20240426";function bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bf)}catch(e){console.error(e)}}bf(),wd.exports=We;var lg=wd.exports,jf,Ou=lg;jf=Ou.createRoot,Ou.hydrateRoot;const pi=[{id:"starter",name:"Starter",maxCustomers:100,maxProducts:10,price:49.9,features:["100 clientes","10 produtos","Suporte bsico"],createdAt:new Date},{id:"professional",name:"Professional",maxCustomers:500,maxProducts:50,price:99.9,features:["500 clientes","50 produtos","Suporte prioritrio","Relatrios avanados"],createdAt:new Date},{id:"enterprise",name:"Enterprise",maxCustomers:-1,maxProducts:-1,price:199.9,features:["Clientes ilimitados","Produtos ilimitados","Suporte 24/7","API personalizada"],createdAt:new Date}],Nf={customers:[],products:[],sales:[],pointsConfigs:[],pointsTransactions:[],companies:[],plans:pi,loyaltyRequests:[],webhookConfigs:[],currentUser:null,currentCompany:null,isLoading:!1},_f=P.createContext({state:Nf,dispatch:()=>null});function cg(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_CURRENT_USER":return{...e,currentUser:t.payload};case"SET_CURRENT_COMPANY":return{...e,currentCompany:t.payload};case"ADD_CUSTOMER":return{...e,customers:[...e.customers,t.payload]};case"UPDATE_CUSTOMER":return{...e,customers:e.customers.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_CUSTOMER":return{...e,customers:e.customers.filter(n=>n.id!==t.payload)};case"ADD_PRODUCT":return{...e,products:[...e.products,t.payload]};case"UPDATE_PRODUCT":return{...e,products:e.products.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_PRODUCT":return{...e,products:e.products.filter(n=>n.id!==t.payload)};case"ADD_SALE":return{...e,sales:[...e.sales,t.payload]};case"UPDATE_POINTS_CONFIG":return{...e,pointsConfigs:e.pointsConfigs.some(n=>n.companyId===t.payload.companyId)?e.pointsConfigs.map(n=>n.companyId===t.payload.companyId?t.payload:n):[...e.pointsConfigs,t.payload]};case"ADD_POINTS_TRANSACTION":return{...e,pointsTransactions:[...e.pointsTransactions,t.payload]};case"DELETE_POINTS_TRANSACTION":return{...e,pointsTransactions:e.pointsTransactions.filter(n=>n.id!==t.payload)};case"DELETE_SALE":return{...e,sales:e.sales.filter(n=>n.id!==t.payload)};case"DELETE_POINTS_CONFIG":return{...e,pointsConfigs:e.pointsConfigs.filter(n=>n.companyId!==t.payload)};case"ADD_COMPANY":return{...e,companies:[...e.companies,t.payload]};case"UPDATE_COMPANY":return{...e,companies:e.companies.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_COMPANY":return{...e,companies:e.companies.filter(n=>n.id!==t.payload)};case"ADD_PLAN":return{...e,plans:[...e.plans,t.payload]};case"UPDATE_PLAN":return{...e,plans:e.plans.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_PLAN":return{...e,plans:e.plans.filter(n=>n.id!==t.payload)};case"ADD_LOYALTY_REQUEST":return{...e,loyaltyRequests:[...e.loyaltyRequests,t.payload]};case"UPDATE_LOYALTY_REQUEST":return{...e,loyaltyRequests:e.loyaltyRequests.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_LOYALTY_REQUEST":return{...e,loyaltyRequests:e.loyaltyRequests.filter(n=>n.id!==t.payload)};case"UPDATE_WEBHOOK_CONFIG":return{...e,webhookConfigs:e.webhookConfigs.some(n=>n.companyId===t.payload.companyId)?e.webhookConfigs.map(n=>n.companyId===t.payload.companyId?t.payload:n):[...e.webhookConfigs,t.payload]};case"INITIALIZE_DATA":return{...e,...t.payload};default:return e}}function ug({children:e}){const[t,n]=P.useReducer(cg,Nf);return P.useEffect(()=>{var s;const r=localStorage.getItem("fidelizaAiData");if(r)try{const i=JSON.parse(r);i.customers&&(i.customers=i.customers.map(l=>({...l,birthDate:l.birthDate||new Date("1990-01-01")})));const a={...i,plans:((s=i.plans)==null?void 0:s.length)>0?i.plans:pi};n({type:"INITIALIZE_DATA",payload:a})}catch(i){console.error("Error loading saved data:",i),n({type:"INITIALIZE_DATA",payload:{plans:pi}})}else n({type:"INITIALIZE_DATA",payload:{plans:pi}})},[]),P.useEffect(()=>{const r={customers:t.customers,products:t.products,sales:t.sales,pointsConfigs:t.pointsConfigs,pointsTransactions:t.pointsTransactions,companies:t.companies,plans:t.plans,loyaltyRequests:t.loyaltyRequests,webhookConfigs:t.webhookConfigs};localStorage.setItem("fidelizaAiData",JSON.stringify(r))},[t.customers,t.products,t.sales,t.pointsConfigs,t.pointsTransactions,t.companies,t.plans,t.loyaltyRequests,t.webhookConfigs]),o.jsx(_f.Provider,{value:{state:t,dispatch:n},children:e})}const ge=()=>{const e=P.useContext(_f);if(!e)throw new Error("useApp must be used within an AppProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),O=(e,t)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>P.createElement("svg",{ref:d,...dg,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${hg(e)}`,l].join(" "),...u},[...t.map(([m,g])=>P.createElement(m,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=O("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=O("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=O("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=O("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=O("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=O("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=O("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=O("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=O("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=O("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=O("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=O("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=O("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=O("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=O("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=O("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=O("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=O("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=O("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=O("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=O("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=O("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=O("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=O("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=O("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=O("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=O("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=O("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=O("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=O("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=O("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=O("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=O("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=O("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=O("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=O("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=O("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=O("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=O("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=O("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=O("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=O("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=O("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=O("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function kg(){const{state:e,dispatch:t}=ge(),n=()=>{t({type:"SET_CURRENT_USER",payload:null}),t({type:"SET_CURRENT_COMPANY",payload:null})};if(!e.currentUser)return null;const r=()=>{var i;return e.currentUser.type==="superadmin"?"Fideliza.AI - Super Admin":e.currentUser.type==="admin"?`${((i=e.currentCompany)==null?void 0:i.name)||"Empresa"} - Painel Admin`:"Fideliza.AI - Seus Pontos"},s=()=>e.currentUser.type==="superadmin"?"Gerenciamento de Plataforma":e.currentUser.type==="admin"?"Painel Administrativo":"Programa de Fidelidade";return o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.currentUser.type==="superadmin"?o.jsx(kf,{className:"w-6 h-6 text-white"}):o.jsx(Sn,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r()}),o.jsx("p",{className:"text-sm text-gray-500",children:s()})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(uo,{className:"w-5 h-5 text-gray-400"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.currentUser.name})]}),o.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 transition-colors",children:[o.jsx(bg,{className:"w-4 h-4"}),o.jsx("span",{children:"Sair"})]})]})]})})})}function Sg(){const{state:e,dispatch:t}=ge(),[n,r]=P.useState("company"),[s,i]=P.useState(""),[a,l]=P.useState("");P.useState("");const[c,u]=P.useState(!1),[d,m]=P.useState(""),g=x=>{if(x.preventDefault(),m(""),n==="superadmin")if(s==="onsolutions"&&a==="33537095a"){t({type:"SET_CURRENT_USER",payload:{id:"superadmin",type:"superadmin",email:"onsolutions",name:"Super Administrador"}});return}else{m("Credenciais de super admin invlidas");return}if(n==="company"){const y=e.companies.find(j=>j.ownerEmail===s&&j.isActive);if(!y){m("Empresa no encontrada ou inativa");return}if(y.password!==a){m("Senha incorreta");return}t({type:"SET_CURRENT_USER",payload:{id:y.id,type:"admin",email:y.ownerEmail,name:y.ownerName,companyId:y.id}}),t({type:"SET_CURRENT_COMPANY",payload:y});return}if(n==="customer"){const y=e.customers.find(b=>b.email===s);if(!y){m("Cliente no encontrado");return}if(y.password!==a){m("Senha incorreta");return}const j=e.companies.find(b=>b.id===y.companyId&&b.isActive);if(!j){m("Empresa no encontrada ou inativa");return}t({type:"SET_CURRENT_USER",payload:{id:y.id,type:"customer",email:y.email,name:y.name,companyId:j.id}}),t({type:"SET_CURRENT_COMPANY",payload:j});return}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:o.jsx(kf,{className:"w-8 h-8 text-white"})}),o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Fideliza.AI"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Plataforma inteligente de fidelidade"})]}),o.jsx("div",{className:"bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:o.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[o.jsx("button",{type:"button",onClick:()=>r("company"),className:`px-3 py-2 text-sm font-medium rounded-md transition-all ${n==="company"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Empresa"}),o.jsx("button",{type:"button",onClick:()=>r("customer"),className:`px-3 py-2 text-sm font-medium rounded-md transition-all ${n==="customer"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Cliente"}),o.jsx("button",{type:"button",onClick:()=>r("superadmin"),className:`px-3 py-2 text-sm font-medium rounded-md transition-all ${n==="superadmin"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Admin"})]})}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:n==="superadmin"?"Usurio":"Email"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(co,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"email",type:"text",value:s,onChange:x=>i(x.target.value),className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 rounded-lg placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:n==="superadmin"?"Digite seu usurio":"Digite seu email",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Senha"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(fc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"password",type:c?"text":"password",value:a,onChange:x=>l(x.target.value),className:"appearance-none relative block w-full px-10 py-3 border border-gray-300 rounded-lg placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Digite sua senha",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>u(!c),children:c?o.jsx(Pn,{className:"h-5 w-5"}):o.jsx(Tn,{className:"h-5 w-5"})})]})]})]}),d&&o.jsx("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg",children:d}),o.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105",children:"Entrar"})]}),n==="customer"&&o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Acesso do Cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[o.jsx("p",{children:"Faa login com seu email e senha"}),o.jsx("p",{children:"Sua senha inicial  seu nmero de telefone"}),o.jsx("p",{children:"Voc ver todas as empresas onde possui cadastro"})]})]})})]})})}function Af(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}function Rf(e){const t=e.replace(/\D/g,"");return t.length===11?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):t.length===10?t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):e}function Df(e){const t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let n=0,r;for(let s=1;s<=9;s++)n+=parseInt(t.substring(s-1,s))*(11-s);if(r=n*10%11,(r===10||r===11)&&(r=0),r!==parseInt(t.substring(9,10)))return!1;n=0;for(let s=1;s<=10;s++)n+=parseInt(t.substring(s-1,s))*(12-s);return r=n*10%11,(r===10||r===11)&&(r=0),r===parseInt(t.substring(10,11))}function mc(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function qe(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}function _e(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function ct(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function rl(e){return e.replace(/\D/g,"")}function If(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}function Cg(e,t=30){const n=new Date,r=n.getFullYear();return e.map(s=>{const i=new Date(s.birthDate),a=new Date(r,i.getMonth(),i.getDate()),l=new Date(r+1,i.getMonth(),i.getDate()),c=a>=n?a:l,u=Math.ceil((c.getTime()-n.getTime())/(1e3*60*60*24));return{...s,daysUntilBirthday:u,nextBirthday:c}}).filter(s=>s.daysUntilBirthday<=t).sort((s,i)=>s.daysUntilBirthday-i.daysUntilBirthday)}function sl(e){const t=new Date,n=new Date(e);let r=t.getFullYear()-n.getFullYear();const s=t.getMonth()-n.getMonth();return(s<0||s===0&&t.getDate()<n.getDate())&&r--,r}function Uu({company:e,onClose:t}){const{state:n,dispatch:r}=ge(),[s,i]=P.useState({name:(e==null?void 0:e.name)||"",slug:(e==null?void 0:e.slug)||"",ownerName:(e==null?void 0:e.ownerName)||"",ownerEmail:(e==null?void 0:e.ownerEmail)||"",password:(e==null?void 0:e.password)||"",planId:(e==null?void 0:e.planId)||"",isActive:(e==null?void 0:e.isActive)!==!1}),[a,l]=P.useState(!1),[c,u]=P.useState({}),d=x=>{const{name:y,value:j,type:b}=x.target;let h=j;if(y==="name"&&!e){const f=j.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");i(p=>({...p,name:j,slug:f}));return}y==="slug"&&(h=j.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")),b==="checkbox"&&(h=x.target.checked),i(f=>({...f,[y]:h})),c[y]&&u(f=>({...f,[y]:""}))},m=()=>{const x={};return s.name.trim()||(x.name="Nome da empresa  obrigatrio"),s.slug.trim()?s.slug.length<3?x.slug="Cdigo deve ter pelo menos 3 caracteres":n.companies.find(j=>j.slug===s.slug&&j.id!==(e==null?void 0:e.id))&&(x.slug="Este cdigo j est em uso"):x.slug="Cdigo da empresa  obrigatrio",s.ownerName.trim()||(x.ownerName="Nome do proprietrio  obrigatrio"),s.ownerEmail.trim()?mc(s.ownerEmail)?n.companies.find(j=>j.ownerEmail===s.ownerEmail&&j.id!==(e==null?void 0:e.id))&&(x.ownerEmail="Este email j est em uso"):x.ownerEmail="Email invlido":x.ownerEmail="Email  obrigatrio",s.password.trim()?s.password.length<4&&(x.password="Senha deve ter pelo menos 4 caracteres"):x.password="Senha  obrigatria",s.planId||(x.planId="Plano  obrigatrio"),u(x),Object.keys(x).length===0},g=x=>{if(x.preventDefault(),!m())return;const y={id:(e==null?void 0:e.id)||qe(),name:s.name.trim(),slug:s.slug.trim(),ownerName:s.ownerName.trim(),ownerEmail:s.ownerEmail.trim(),password:s.password.trim(),planId:s.planId,isActive:s.isActive,createdAt:(e==null?void 0:e.createdAt)||new Date};r(e?{type:"UPDATE_COMPANY",payload:y}:{type:"ADD_COMPANY",payload:y}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Empresa":"Nova Empresa"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Empresa *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome da empresa"})]}),c.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cdigo da Empresa *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"slug",value:s.slug,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.slug?"border-red-500":"border-gray-300"}`,placeholder:"codigo-da-empresa"})]}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["URL de acesso: site.com.br/",s.slug||"codigo-da-empresa"]}),c.slug&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.slug})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Proprietrio *"}),o.jsxs("div",{className:"relative",children:[o.jsx(uo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"ownerName",value:s.ownerName,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.ownerName?"border-red-500":"border-gray-300"}`,placeholder:"Nome completo do proprietrio"})]}),c.ownerName&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.ownerName})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Proprietrio *"}),o.jsxs("div",{className:"relative",children:[o.jsx(co,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"ownerEmail",value:s.ownerEmail,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.ownerEmail?"border-red-500":"border-gray-300"}`,placeholder:"email@exemplo.com"})]}),c.ownerEmail&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.ownerEmail})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),o.jsxs("div",{className:"relative",children:[o.jsx(fc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:a?"text":"password",name:"password",value:s.password,onChange:d,className:`w-full pl-10 pr-10 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.password?"border-red-500":"border-gray-300"}`,placeholder:"Senha de acesso"}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>l(!a),children:a?o.jsx(Pn,{className:"h-5 w-5"}):o.jsx(Tn,{className:"h-5 w-5"})})]}),c.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.password})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsxs("select",{name:"planId",value:s.planId,onChange:d,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${c.planId?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Selecione um plano"}),n.plans.map(x=>o.jsxs("option",{value:x.id,children:[x.name," - R$ ",x.price.toFixed(2),"/ms"]},x.id))]})]}),c.planId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.planId})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",name:"isActive",id:"isActive",checked:s.isActive,onChange:d,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Empresa ativa"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Empresa"})]})]})]})})}function Mu({plan:e,onClose:t}){const{dispatch:n}=ge(),[r,s]=P.useState({name:(e==null?void 0:e.name)||"",maxCustomers:(e==null?void 0:e.maxCustomers)||0,maxProducts:(e==null?void 0:e.maxProducts)||0,price:(e==null?void 0:e.price)||0,features:(e==null?void 0:e.features)||[""]}),[i,a]=P.useState({}),l=x=>{const{name:y,value:j,type:b}=x.target;let h=j;b==="number"&&(h=Number(j)),s(f=>({...f,[y]:h})),i[y]&&a(f=>({...f,[y]:""}))},c=(x,y)=>{const j=[...r.features];j[x]=y,s(b=>({...b,features:j}))},u=()=>{s(x=>({...x,features:[...x.features,""]}))},d=x=>{if(r.features.length>1){const y=r.features.filter((j,b)=>b!==x);s(j=>({...j,features:y}))}},m=()=>{const x={};return r.name.trim()||(x.name="Nome do plano  obrigatrio"),(r.maxCustomers<-1||r.maxCustomers===0)&&(x.maxCustomers="Nmero de clientes deve ser maior que 0 ou -1 para ilimitado"),(r.maxProducts<-1||r.maxProducts===0)&&(x.maxProducts="Nmero de produtos deve ser maior que 0 ou -1 para ilimitado"),r.price<=0&&(x.price="Preo deve ser maior que zero"),r.features.filter(j=>j.trim()).length===0&&(x.features="Pelo menos uma funcionalidade  obrigatria"),a(x),Object.keys(x).length===0},g=x=>{if(x.preventDefault(),!m())return;const y={id:(e==null?void 0:e.id)||qe(),name:r.name.trim(),maxCustomers:r.maxCustomers,maxProducts:r.maxProducts,price:r.price,features:r.features.filter(j=>j.trim()),createdAt:(e==null?void 0:e.createdAt)||new Date};n(e?{type:"UPDATE_PLAN",payload:y}:{type:"ADD_PLAN",payload:y}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Plano":"Novo Plano"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Plano *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:r.name,onChange:l,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome do plano"})]}),i.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mximo de Clientes *"}),o.jsxs("div",{className:"relative",children:[o.jsx(ps,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"maxCustomers",value:r.maxCustomers,onChange:l,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.maxCustomers?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use -1 para ilimitado"}),i.maxCustomers&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.maxCustomers})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mximo de Produtos *"}),o.jsxs("div",{className:"relative",children:[o.jsx(qt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"maxProducts",value:r.maxProducts,onChange:l,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.maxProducts?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use -1 para ilimitado"}),i.maxProducts&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.maxProducts})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preo Mensal (R$) *"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"price",value:r.price,onChange:l,min:"0",step:"0.01",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),i.price&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.price})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funcionalidades *"}),o.jsxs("div",{className:"space-y-2",children:[r.features.map((x,y)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:x,onChange:j=>c(y,j.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descreva uma funcionalidade"}),r.features.length>1&&o.jsx("button",{type:"button",onClick:()=>d(y),className:"p-2 text-red-500 hover:text-red-700 transition-colors",children:o.jsx(wn,{className:"w-4 h-4"})})]},y)),o.jsxs("button",{type:"button",onClick:u,className:"flex items-center space-x-2 px-3 py-2 text-blue-600 hover:text-blue-700 transition-colors",children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Adicionar funcionalidade"})]})]}),i.features&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.features})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Resumo do Plano"}),o.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[o.jsxs("p",{children:["Nome: ",r.name||"No definido"]}),o.jsxs("p",{children:["Clientes: ",r.maxCustomers===-1?"Ilimitados":r.maxCustomers]}),o.jsxs("p",{children:["Produtos: ",r.maxProducts===-1?"Ilimitados":r.maxProducts]}),o.jsxs("p",{children:["Preo: R$ ",r.price.toFixed(2),"/ms"]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Plano"})]})]})]})})}const Eg="modulepreload",Pg=function(e){return"/"+e},zu={},_s=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Pg(c),c in zu)return;zu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Eg,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Tg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>_s(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class pc extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Ag extends pc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fu extends pc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bu extends pc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var il;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(il||(il={}));var Rg=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Dg{constructor(t,{headers:n={},customFetch:r,region:s=il.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Tg(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Rg(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const m=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(j=>{throw new Ag(j)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new Fu(m);if(!m.ok)throw new Bu(m);let x=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield m.json():x==="application/octet-stream"?y=yield m.blob():x==="text/event-stream"?y=m:x==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof Bu||s instanceof Fu?s.context:void 0}}})}}var Oe={},gc={},ho={},ks={},fo={},mo={},Ig=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mr=Ig();const Og=mr.fetch,Of=mr.fetch.bind(mr),Lf=mr.Headers,Lg=mr.Request,$g=mr.Response,jr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lf,Request:Lg,Response:$g,default:Of,fetch:Og},Symbol.toStringTag,{value:"Module"})),Ug=Lm(jr);var po={};Object.defineProperty(po,"__esModule",{value:!0});let Mg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};po.default=Mg;var $f=Ze&&Ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mo,"__esModule",{value:!0});const zg=$f(Ug),Fg=$f(po);let Bg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,m=null,g=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const h=await i.text();h===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=h:d=JSON.parse(h))}const j=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");j&&b&&b.length>1&&(m=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,g=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const j=await i.text();try{u=JSON.parse(j),Array.isArray(u)&&i.status===404&&(d=[],u=null,g=200,x="OK")}catch{i.status===404&&j===""?(g=204,x="No Content"):u={message:j}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,g=200,x="OK"),u&&this.shouldThrowOnError)throw new Fg.default(u)}return{error:u,data:d,count:m,status:g,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};mo.default=Bg;var qg=Ze&&Ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fo,"__esModule",{value:!0});const Vg=qg(mo);let Hg=class extends Vg.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fo.default=Hg;var Wg=Ze&&Ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ks,"__esModule",{value:!0});const Kg=Wg(fo);let Qg=class extends Kg.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};ks.default=Qg;var Gg=Ze&&Ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ho,"__esModule",{value:!0});const Rr=Gg(ks);let Jg=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Rr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Rr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Rr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Rr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Rr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ho.default=Jg;var go={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.version=void 0;xo.version="0.0.0-automated";Object.defineProperty(go,"__esModule",{value:!0});go.DEFAULT_HEADERS=void 0;const Yg=xo;go.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Yg.version}`};var Uf=Ze&&Ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gc,"__esModule",{value:!0});const Xg=Uf(ho),Zg=Uf(ks),ex=go;let tx=class Mf{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},ex.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Xg.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Mf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,m])=>m!==void 0).map(([d,m])=>[d,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([d,m])=>{l.searchParams.append(d,m)})):(a="POST",c=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Zg.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gc.default=tx;var Nr=Ze&&Ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const zf=Nr(gc);Oe.PostgrestClient=zf.default;const Ff=Nr(ho);Oe.PostgrestQueryBuilder=Ff.default;const Bf=Nr(ks);Oe.PostgrestFilterBuilder=Bf.default;const qf=Nr(fo);Oe.PostgrestTransformBuilder=qf.default;const Vf=Nr(mo);Oe.PostgrestBuilder=Vf.default;const Hf=Nr(po);Oe.PostgrestError=Hf.default;var nx=Oe.default={PostgrestClient:zf.default,PostgrestQueryBuilder:Ff.default,PostgrestFilterBuilder:Bf.default,PostgrestTransformBuilder:qf.default,PostgrestBuilder:Vf.default,PostgrestError:Hf.default};const{PostgrestClient:rx,PostgrestQueryBuilder:Yv,PostgrestFilterBuilder:Xv,PostgrestTransformBuilder:Zv,PostgrestBuilder:e1,PostgrestError:t1}=nx;function sx(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const ix=sx(),ox="2.11.15",ax=`realtime-js/${ox}`,lx="1.0.0",Wf=1e4,cx=1e3;var Kr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Kr||(Kr={}));var je;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(je||(je={}));var at;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(at||(at={}));var ol;(function(e){e.websocket="websocket"})(ol||(ol={}));var fn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fn||(fn={}));class ux{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Kf{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(J||(J={}));const qu=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=dx(a,e,t,s),i),{})},dx=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Qf(i,a):al(a)},Qf=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return px(t,n)}switch(e){case J.bool:return hx(t);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return fx(t);case J.json:case J.jsonb:return mx(t);case J.timestamp:return gx(t);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return al(t);default:return al(t)}},al=e=>e,hx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},px=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Qf(t,l))}return e},gx=e=>typeof e=="string"?e.replace(" ","T"):e,Gf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Zo{constructor(t,n,r={},s=Wf){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Vu||(Vu={}));class Qr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qr.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Qr.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qr.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const m=i[u];if(m){const g=d.map(b=>b.presence_ref),x=m.map(b=>b.presence_ref),y=d.filter(b=>x.indexOf(b.presence_ref)<0),j=m.filter(b=>g.indexOf(b.presence_ref)<0);y.length>0&&(l[u]=y),j.length>0&&(c[u]=j)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const m=t[l].map(x=>x.presence_ref),g=d.filter(x=>m.indexOf(x.presence_ref)<0);t[l].unshift(...g)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(m=>m.presence_ref);u=u.filter(m=>d.indexOf(m.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Hu||(Hu={}));var Wu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wu||(Wu={}));var Nt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Nt||(Nt={}));class xc{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zo(this,at.join,this.params,this.timeout),this.rejoinTimer=new Kf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=je.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(at.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Qr(this),this.broadcastEndpointURL=Gf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==je.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Nt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Nt.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var m;if(this.socket.setAuth(),d===void 0){t==null||t(Nt.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,y=[];for(let j=0;j<x;j++){const b=g[j],{filter:{event:h,schema:f,table:p,filter:w}}=b,_=d&&d[j];if(_&&_.event===h&&_.schema===f&&_.table===p&&_.filter===w)y.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=je.errored,t==null||t(Nt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Nt.SUBSCRIBED);return}}).receive("error",d=>{this.state=je.errored,t==null||t(Nt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Nt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=je.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(at.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Zo(this,at.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Zo(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=at;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let g=this._onMessage(a,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var y,j,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(j=x.filter)===null||j===void 0?void 0:j.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(x=>x.callback(g,r)):(i=this.bindings[a])===null||i===void 0||i.filter(x=>{var y,j,b,h,f,p;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){const w=x.id,_=(y=x.filter)===null||y===void 0?void 0:y.event;return w&&((j=n.ids)===null||j===void 0?void 0:j.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(f=(h=x==null?void 0:x.filter)===null||h===void 0?void 0:h.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return w==="*"||w===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:j,table:b,commit_timestamp:h,type:f,errors:p}=y;g=Object.assign(Object.assign({},{schema:j,table:b,commit_timestamp:h,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(y))}x.callback(g,r)})}_isClosed(){return this.state===je.closed}_isJoined(){return this.state===je.joined}_isJoining(){return this.state===je.joining}_isLeaving(){return this.state===je.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xc.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(at.close,{},t)}_onError(t){this._on(at.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=je.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=qu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=qu(t.columns,t.old_record)),n}}const Ku=()=>{},xx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yx{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ku,this.ref=0,this.logger=Ku,this.conn=null,this.sendBuffer=[],this.serializer=new ux,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>_s(async()=>{const{default:c}=await Promise.resolve().then(()=>jr);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${ol.websocket}`,this.httpEndpoint=Gf(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,a)=>a(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ix),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lx}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Kr.connecting:return fn.Connecting;case Kr.open:return fn.Open;case Kr.closing:return fn.Closing;default:return fn.Closed}}isConnected(){return this.connectionState()===fn.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new xc(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:ax};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(at.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(cx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:a}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(at.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([xx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class yc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function fe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vx extends yc{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ll extends yc{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var wx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Jf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>_s(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},bx=()=>wx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _s(()=>Promise.resolve().then(()=>jr),void 0)).Response:Response}),cl=e=>{if(Array.isArray(e))return e.map(n=>cl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=cl(r)}),t};var Dn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const ea=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jx=(e,t,n)=>Dn(void 0,void 0,void 0,function*(){const r=yield bx();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new vx(ea(s),e.status||500))}).catch(s=>{t(new ll(ea(s),s))}):t(new ll(ea(e),e))}),Nx=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ss(e,t,n,r,s,i){return Dn(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,Nx(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>jx(c,l,r))})})}function qi(e,t,n,r){return Dn(this,void 0,void 0,function*(){return Ss(e,"GET",t,n,r)})}function $t(e,t,n,r,s){return Dn(this,void 0,void 0,function*(){return Ss(e,"POST",t,r,s,n)})}function _x(e,t,n,r,s){return Dn(this,void 0,void 0,function*(){return Ss(e,"PUT",t,r,s,n)})}function kx(e,t,n,r){return Dn(this,void 0,void 0,function*(){return Ss(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Yf(e,t,n,r,s){return Dn(this,void 0,void 0,function*(){return Ss(e,"DELETE",t,r,s,n)})}var De=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Sx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cx{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Jf(s)}uploadOrUpdate(t,n,r,s){return De(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Qu),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),m=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),g=yield m.json();return m.ok?{data:{path:u,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}upload(t,n,r){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return De(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Qu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),g=yield m.json();return m.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(c){if(fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return De(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield $t(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new yc("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}update(t,n,r){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return De(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}copy(t,n,r){return De(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return De(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield $t(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return De(this,void 0,void 0,function*(){try{const s=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}download(t,n){return De(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield qi(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(fe(l))return{data:null,error:l};throw l}})}info(t){return De(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield qi(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:cl(r),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}exists(t){return De(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield kx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(fe(r)&&r instanceof ll){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return De(this,void 0,void 0,function*(){try{return{data:yield Yf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}list(t,n,r){return De(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Sx),n),{prefix:t||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Ex="2.7.1",Px={"X-Client-Info":`storage-js/${Ex}`};var $n=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Tx{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},Px),n),this.fetch=Jf(r)}listBuckets(){return $n(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}getBucket(t){return $n(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return $n(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return $n(this,void 0,void 0,function*(){try{return{data:yield _x(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return $n(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return $n(this,void 0,void 0,function*(){try{return{data:yield Yf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}})}}class Ax extends Tx{constructor(t,n={},r){super(t,n,r)}from(t){return new Cx(this.url,this.headers,t,this.fetch)}}const Rx="2.50.3";let $r="";typeof Deno<"u"?$r="deno":typeof document<"u"?$r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$r="react-native":$r="node";const Dx={"X-Client-Info":`supabase-js-${$r}/${Rx}`},Ix={headers:Dx},Ox={schema:"public"},Lx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$x={};var Ux=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Mx=e=>{let t;return e?t=e:typeof fetch>"u"?t=Of:t=fetch,(...n)=>t(...n)},zx=()=>typeof Headers>"u"?Lf:Headers,Fx=(e,t,n)=>{const r=Mx(n),s=zx();return(i,a)=>Ux(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var Bx=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function qx(e){return e.endsWith("/")?e:e+"/"}function Vx(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:m}=t,g={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Bx(this,void 0,void 0,function*(){return""})};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}const Xf="2.70.0",Fn=30*1e3,ul=3,ta=ul*Fn,Hx="http://localhost:9999",Wx="supabase.auth.token",Kx={"X-Client-Info":`gotrue-js/${Xf}`},dl="X-Supabase-Api-Version",Zf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gx=6e5;class vc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function U(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Jx extends vc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Yx(e){return U(e)&&e.name==="AuthApiError"}class em extends vc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class an extends vc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class It extends an{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xx(e){return U(e)&&e.name==="AuthSessionMissingError"}class Js extends an{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends an{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xs extends an{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zx(e){return U(e)&&e.name==="AuthImplicitGrantRedirectError"}class Gu extends an{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hl extends an{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function na(e){return U(e)&&e.name==="AuthRetryableFetchError"}class Ju extends an{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Gr extends an{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yu=` 	
\r=`.split(""),ey=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Yu.length;t+=1)e[Yu[t].charCodeAt(0)]=-2;for(let t=0;t<Vi.length;t+=1)e[Vi[t].charCodeAt(0)]=t;return e})();function Xu(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vi[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vi[r]),t.queuedBits-=6}}function tm(e,t,n){const r=ey[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Zu(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{ry(a,r,n)};for(let a=0;a<e.length;a+=1)tm(e.charCodeAt(a),s,i);return t.join("")}function ty(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ny(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}ty(r,t)}}function ry(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function sy(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)tm(e.charCodeAt(s),n,r);return new Uint8Array(t)}function iy(e){const t=[];return ny(e,n=>t.push(n)),new Uint8Array(t)}function oy(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Xu(s,n,r)),Xu(null,n,r),t.join("")}function ay(e){return Math.round(Date.now()/1e3)+e}function ly(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const st=()=>typeof window<"u"&&typeof document<"u",cn={tested:!1,writable:!1},Jr=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cn.tested)return cn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cn.tested=!0,cn.writable=!0}catch{cn.tested=!0,cn.writable=!1}return cn.writable};function cy(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const nm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>_s(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},uy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",rm=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ei=async(e,t)=>{await e.removeItem(t)};class yo{constructor(){this.promise=new yo.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}yo.promiseConstructor=Promise;function ra(e){const t=e.split(".");if(t.length!==3)throw new Gr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Qx.test(t[r]))throw new Gr("JWT not in base64url format");return{header:JSON.parse(Zu(t[0])),payload:JSON.parse(Zu(t[1])),signature:sy(t[2]),raw:{header:t[0],payload:t[1]}}}async function dy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hy(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function fy(e){return("0"+e.toString(16)).substr(-2)}function my(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,fy).join("")}async function py(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function gy(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await py(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Un(e,t,n=!1){const r=my();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await rm(e,`${t}-code-verifier`,s);const i=await gy(r);return[i,r===i?"plain":"s256"]}const xy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yy(e){const t=e.headers.get(dl);if(!t||!t.match(xy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wy(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const by=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mn(e){if(!by.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var jy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const hn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ny=[502,503,504];async function ed(e){var t;if(!uy(e))throw new hl(hn(e),0);if(Ny.includes(e.status))throw new hl(hn(e),e.status);let n;try{n=await e.json()}catch(i){throw new em(hn(i),i)}let r;const s=yy(e);if(s&&s.getTime()>=Zf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ju(hn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new It}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ju(hn(n),e.status,n.weak_password.reasons);throw new Jx(hn(n),e.status||500,r)}const _y=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function F(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[dl]||(i[dl]=Zf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ky(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ky(e,t,n,r,s,i){const a=_y(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new hl(hn(c),0)}if(l.ok||await ed(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await ed(c)}}function bt(e){var t;let n=null;Py(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=ay(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function td(e){const t=bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Sy(e){return{data:e,error:null}}function Cy(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=jy(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Ey(e){return e}function Py(e){return e.access_token&&e.refresh_token&&e.expires_in}const sa=["global","local","others"];var Ty=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Ay{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=nm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=sa[0]){if(sa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sa.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ty(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Cy,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ey});if(d.error)throw d.error;const m=await d.json(),g=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const j=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=j}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(U(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Mn(t);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Mn(t);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:zt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Mn(t);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:zt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Mn(t.userId);try{const{data:n,error:r}=await F(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Mn(t.userId),Mn(t.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}const Ry={getItem:e=>Jr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Jr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Jr()&&globalThis.localStorage.removeItem(e)}};function nd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Dy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zn={debug:!!(globalThis&&Jr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sm extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Iy extends sm{}async function Oy(e,t,n){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),zn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Iy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Dy();const Ly={url:Hx,storageKey:Wx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rd(e,t,n){return await n()}class gs{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gs.nextInstanceID,gs.nextInstanceID+=1,this.instanceID>0&&st()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Ly),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ay({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nm(s.fetch),this.lock=s.lock||rd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:st()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Oy:this.lock=rd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Jr()?this.storage=Ry:(this.memoryStorage={},this.storage=nd(this.memoryStorage)):(this.memoryStorage={},this.storage=nd(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=cy(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),st()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Zx(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new em("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:bt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:m,options:g}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Un(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:m,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:x,code_challenge_method:y},xform:bt})}else if("phone"in t){const{phone:d,password:m,options:g}=t;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:bt})}else throw new Ys("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:td})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:td})}else throw new Ys("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Js}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,m,g,x;let y,j;if("message"in t)y=t.message,j=t.signature;else{const{chain:b,wallet:h,statement:f,options:p}=t;let w;if(st())if(typeof h=="object")w=h;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof h!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=h}const _=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),f?{statement:f}:null));let v;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")v=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)v=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in v&&"signature"in v&&(typeof v.signedMessage=="string"||v.signedMessage instanceof Uint8Array)&&v.signature instanceof Uint8Array)y=typeof v.signedMessage=="string"?v.signedMessage:new TextDecoder().decode(v.signedMessage),j=v.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((m=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...p.signInWithSolana.resources.map(v=>`- ${v}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=S}}try{const{data:b,error:h}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:oy(j)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:bt});if(h)throw h;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Js}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:h})}catch(b){if(U(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Zs(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:bt});if(await ei(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Js}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(U(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:bt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Js}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Un(this.storage,this.storageKey));const{error:m}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ys("You must provide either an email or phone number.")}catch(l){if(U(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:bt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Un(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Sy})}catch(i){if(U(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new It;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(U(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await F(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await F(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ys("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ta:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zt}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zt})})}catch(n){if(U(n))return Xx(n)&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new It;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Un(this.storage,this.storageKey));const{data:u,error:d}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:zt});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new It;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=ra(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new It;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!st())throw new Xs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Gu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gu("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Xs("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let g=d+m;c&&(g=parseInt(c));const x=g-d;x*1e3<=Fn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const y=g-m;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,d);const{data:j,error:b}=await this._getUser(i);if(b)throw b;const h={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:g,refresh_token:a,token_type:u,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:h,redirectType:t.type},error:null}}catch(r){if(U(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Zs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Yx(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=ly(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Un(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(U(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:m,error:g}=i;if(g)throw g;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return st()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(U(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await hy(async s=>(s>0&&await dy(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&na(i)&&Date.now()+a-r<Fn})}catch(r){if(this._debug(n,"error",r),U(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),st()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Zs(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ta;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${ta}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),na(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yo;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new It;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),U(i)){const a={session:null,error:i};return na(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await rm(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ei(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Fn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fn}ms, refresh threshold is ${ul} ticks`),s<=ul&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof sm)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Un(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await F(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ra(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r||(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+Gx>Date.now()))return r;const{data:s,error:i}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Gr("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(a=>a.kid===t),!r)throw new Gr("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};r=x.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=ra(r);if(vy(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:i,header:s,signature:a},error:null}}const u=wy(s.alg),d=await this.fetchJwk(s.kid,n),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,a,iy(`${l}.${c}`)))throw new Gr("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}}gs.nextInstanceID=0;const $y=gs;class Uy extends $y{constructor(t){super(t)}}var My=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(m){a(m)}}function c(d){try{u(r.throw(d))}catch(m){a(m)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class zy{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=qx(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Ox,realtime:$x,auth:Object.assign(Object.assign({},Lx),{storageKey:u}),global:Ix},m=Vx(r??{},d);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=Fx(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new rx(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new Dg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ax(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return My(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Uy({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new yx(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fy=(e,t,n)=>new zy(e,t,n),im="https://reiinlupshilqpnykymu.supabase.co",om="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlaWlubHVwc2hpbHFwbnlreW11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MjYxMjgsImV4cCI6MjA2NzUwMjEyOH0.mg1yNzgJmaGkKqCLddSDLmwrPjw--AwMm6tjejOgTmw",By=Fy(im,om),qy=async()=>{try{const{data:e,error:t}=await By.from("companies").select("*").limit(1);return t?{connected:!1,error:t.message}:{connected:!0,error:null}}catch{return{connected:!1,error:"Erro de conexo"}}};function Vy(){const{state:e,dispatch:t}=ge(),[n,r]=P.useState("companies"),[s,i]=P.useState(!1),[a,l]=P.useState(!1),[c,u]=P.useState(null),[d,m]=P.useState(null),[g,x]=P.useState(""),[y,j]=P.useState(null);P.useEffect(()=>{const v=async()=>{const D=await qy();j(D)};v();const k=setInterval(v,3e4);return()=>clearInterval(k)},[]);const b=[{id:"companies",label:"Empresas",icon:Sn},{id:"plans",label:"Planos",icon:Cn},{id:"analytics",label:"Analytics",icon:Ht}],h=[{label:"Total de Empresas",value:e.companies.length,icon:Sn,color:"text-blue-600",bgColor:"bg-blue-100"},{label:"Empresas Ativas",value:e.companies.filter(v=>v.isActive).length,icon:ps,color:"text-green-600",bgColor:"bg-green-100"},{label:"Total de Clientes",value:e.customers.length,icon:ps,color:"text-purple-600",bgColor:"bg-purple-100"},{label:"Receita Potencial",value:_e(e.companies.length*99.9),icon:Ht,color:"text-orange-600",bgColor:"bg-orange-100"}],f=e.companies.filter(v=>v.name.toLowerCase().includes(g.toLowerCase())||v.ownerName.toLowerCase().includes(g.toLowerCase())||v.ownerEmail.toLowerCase().includes(g.toLowerCase())),p=e.plans.filter(v=>v.name.toLowerCase().includes(g.toLowerCase())),w=v=>{const k=e.companies.find($=>$.id===v);if(!k)return;const D=e.customers.filter($=>$.companyId===v),T=e.products.filter($=>$.companyId===v),z=e.sales.filter($=>$.companyId===v),K=e.pointsTransactions.filter($=>$.companyId===v),C=e.loyaltyRequests.filter($=>$.companyId===v),V=e.pointsConfigs.filter($=>$.companyId===v),Te=`ATENO: Tem certeza que deseja excluir a empresa "${k.name}"?

Esta ao ir excluir PERMANENTEMENTE:
- ${D.length} cliente(s)
- ${T.length} produto(s)
- ${z.length} venda(s)
- ${K.length} transao(es) de pontos
- ${C.length} solicitao(es)
- Configuraes de pontos

TODOS OS DADOS SERO PERDIDOS!
Esta operao NO PODE ser desfeita!

Digite "EXCLUIR" para confirmar:`,G=prompt(Te);G==="EXCLUIR"?(C.forEach($=>{t({type:"DELETE_LOYALTY_REQUEST",payload:$.id})}),K.forEach($=>{t({type:"DELETE_POINTS_TRANSACTION",payload:$.id})}),z.forEach($=>{t({type:"DELETE_SALE",payload:$.id})}),T.forEach($=>{t({type:"DELETE_PRODUCT",payload:$.id})}),D.forEach($=>{t({type:"DELETE_CUSTOMER",payload:$.id})}),V.forEach($=>{t({type:"DELETE_POINTS_CONFIG",payload:$.companyId})}),t({type:"DELETE_COMPANY",payload:v}),alert("Empresa excluda com sucesso!")):G!==null&&alert('Operao cancelada. Digite exatamente "EXCLUIR" para confirmar a excluso.')},_=v=>{if(e.companies.filter(D=>D.planId===v).length>0){alert("No  possvel excluir este plano pois existem empresas utilizando-o.");return}window.confirm("Tem certeza que deseja excluir este plano?")&&t({type:"DELETE_PLAN",payload:v})},S=v=>{const k={...v,isActive:!v.isActive};t({type:"UPDATE_COMPANY",payload:k})};return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(xg,{className:"w-5 h-5 text-gray-600"}),o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Status do Supabase"})]}),o.jsx("div",{className:"flex items-center space-x-2",children:y===null?o.jsx("span",{className:"text-sm text-gray-500",children:"Verificando..."}):y.connected?o.jsxs(o.Fragment,{children:[o.jsx(Fi,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm text-green-600",children:"Conectado"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Tf,{className:"w-4 h-4 text-red-500"}),o.jsx("span",{className:"text-sm text-red-600",children:"Desconectado"}),y.error&&o.jsxs("span",{className:"text-xs text-red-500 ml-2",children:["(",y.error,")"]})]})})]}),!(y!=null&&y.connected)&&o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Configure as variveis VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY no arquivo .env"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:h.map(v=>{const k=v.icon;return o.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:v.label}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.value})]}),o.jsx("div",{className:`p-3 rounded-lg ${v.bgColor}`,children:o.jsx(k,{className:`w-6 h-6 ${v.color}`})})]})},v.label)})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:b.map(v=>{const k=v.icon;return o.jsxs("button",{onClick:()=>r(v.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===v.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(k,{className:"w-5 h-5"}),o.jsx("span",{children:v.label})]},v.id)})})}),o.jsxs("div",{className:"p-6",children:[n!=="analytics"&&o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ns,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:g,onChange:v=>x(v.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-80"})]}),o.jsxs("div",{className:"flex space-x-3",children:[n==="companies"&&o.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Nova Empresa"})]}),n==="plans"&&o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Novo Plano"})]})]})]}),n==="companies"&&o.jsx("div",{className:"space-y-4",children:f.map(v=>{const k=e.plans.find(z=>z.planId===v.planId),D=e.customers.filter(z=>z.companyId===v.id),T=e.products.filter(z=>z.companyId===v.id);return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:v.name}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.isActive?"Ativa":"Inativa"})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[v.ownerName,"  ",v.ownerEmail]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Cdigo: ",v.slug]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(k==null?void 0:k.name)||"Sem plano"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[D.length," clientes  ",T.length," produtos"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Desde ",ct(new Date(v.createdAt))]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>S(v),className:`p-2 transition-colors ${v.isActive?"text-gray-400 hover:text-red-600":"text-gray-400 hover:text-green-600"}`,title:v.isActive?"Desativar":"Ativar",children:v.isActive?o.jsx(Pn,{className:"w-4 h-4"}):o.jsx(Tn,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>u(v),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Bi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>w(v.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(wn,{className:"w-4 h-4"})})]})]},v.id)})}),n==="plans"&&o.jsx("div",{className:"space-y-4",children:p.map(v=>{const k=e.companies.filter(D=>D.planId===v.id).length;return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:v.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[v.maxCustomers===-1?"Clientes ilimitados":`${v.maxCustomers} clientes`," ",v.maxProducts===-1?" Produtos ilimitados":` ${v.maxProducts} produtos`]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[_e(v.price),"/ms"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:[k," empresas usando"]})]}),o.jsx("div",{className:"mt-2",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:v.features.map((D,T)=>o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:D},T))})})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>m(v),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Bi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>_(v.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(wn,{className:"w-4 h-4"})})]})]},v.id)})}),n==="analytics"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Distribuio por Planos"}),o.jsx("div",{className:"space-y-3",children:e.plans.map(v=>{const k=e.companies.filter(T=>T.planId===v.id).length,D=e.companies.length>0?k/e.companies.length*100:0;return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:v.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${D}%`}})}),o.jsx("span",{className:"text-sm text-gray-600",children:k})]})]},v.id)})})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumo Geral"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total de Vendas"}),o.jsx("span",{className:"text-sm font-medium",children:e.sales.length})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Receita Total"}),o.jsx("span",{className:"text-sm font-medium",children:_e(e.sales.reduce((v,k)=>v+k.amount,0))})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Pontos Distribudos"}),o.jsx("span",{className:"text-sm font-medium",children:e.pointsTransactions.reduce((v,k)=>k.type==="earned"||k.type==="credit"?v+k.points:v,0)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Produtos Cadastrados"}),o.jsx("span",{className:"text-sm font-medium",children:e.products.length})]})]})]})]})})]})]}),s&&o.jsx(Uu,{company:c,onClose:()=>{i(!1),u(null)}}),a&&o.jsx(Mu,{plan:d,onClose:()=>{l(!1),m(null)}}),c&&o.jsx(Uu,{company:c,onClose:()=>u(null)}),d&&o.jsx(Mu,{plan:d,onClose:()=>m(null)})]})}function sd({customer:e,onClose:t}){const{state:n,dispatch:r}=ge(),[s,i]=P.useState({name:(e==null?void 0:e.name)||"",cpf:(e==null?void 0:e.cpf)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:(e==null?void 0:e.address)||"",birthDate:e!=null&&e.birthDate?new Date(e.birthDate).toISOString().split("T")[0]:""}),[a,l]=P.useState({}),c=m=>{const{name:g,value:x}=m.target;let y=x;g==="cpf"?y=Af(x):g==="phone"&&(y=Rf(x)),i(j=>({...j,[g]:y})),a[g]&&l(j=>({...j,[g]:""}))},u=()=>{const m={};return s.name.trim()||(m.name="Nome  obrigatrio"),s.cpf.trim()?Df(s.cpf)||(m.cpf="CPF invlido"):m.cpf="CPF  obrigatrio",s.email.trim()?mc(s.email)||(m.email="Email invlido"):m.email="Email  obrigatrio",s.phone.trim()?rl(s.phone).length<10&&(m.phone="Telefone invlido"):m.phone="Telefone  obrigatrio",s.birthDate?new Date(s.birthDate)>=new Date&&(m.birthDate="Data de nascimento deve ser anterior a hoje"):m.birthDate="Data de nascimento  obrigatria",l(m),Object.keys(m).length===0},d=m=>{var x;if(m.preventDefault(),!u())return;const g={id:(e==null?void 0:e.id)||qe(),companyId:(e==null?void 0:e.companyId)||((x=n.currentCompany)==null?void 0:x.id)||"",name:s.name.trim(),cpf:s.cpf,email:s.email.trim(),phone:s.phone,address:s.address.trim(),birthDate:new Date(s.birthDate),points:(e==null?void 0:e.points)||0,password:(e==null?void 0:e.password)||rl(s.phone),createdAt:(e==null?void 0:e.createdAt)||new Date};r(e?{type:"UPDATE_CUSTOMER",payload:g}:{type:"ADD_CUSTOMER",payload:g}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Cliente":"Novo Cliente"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome *"}),o.jsxs("div",{className:"relative",children:[o.jsx(uo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome completo"})]}),a.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"cpf",value:s.cpf,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.cpf?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14})]}),a.cpf&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.cpf})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),o.jsxs("div",{className:"relative",children:[o.jsx(co,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"email",value:s.email,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.email?"border-red-500":"border-gray-300"}`,placeholder:"email@exemplo.com"})]}),a.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cf,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.phone?"border-red-500":"border-gray-300"}`,placeholder:"(11) 99999-9999",maxLength:15})]}),a.phone&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"date",name:"birthDate",value:s.birthDate,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.birthDate?"border-red-500":"border-gray-300"}`})]}),a.birthDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.birthDate})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sf,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"address",value:s.address,onChange:c,rows:3,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Endereo completo (opcional)"})]})]}),!e&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Senha inicial:"})," A senha ser definida automaticamente como o nmero do telefone (apenas nmeros)."]})}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Cliente"})]})]})]})})}function id({product:e,onClose:t}){const{state:n,dispatch:r}=ge(),[s,i]=P.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",pointsRequired:(e==null?void 0:e.pointsRequired)||0,imageUrl:(e==null?void 0:e.imageUrl)||"",available:(e==null?void 0:e.available)!==!1}),[a,l]=P.useState({}),c=m=>{const{name:g,value:x,type:y}=m.target,j=y==="checkbox"?m.target.checked:x;i(b=>({...b,[g]:j})),a[g]&&l(b=>({...b,[g]:""}))},u=()=>{const m={};return s.name.trim()||(m.name="Nome  obrigatrio"),s.description.trim()||(m.description="Descrio  obrigatria"),s.pointsRequired<=0&&(m.pointsRequired="Pontos devem ser maior que zero"),l(m),Object.keys(m).length===0},d=m=>{var x;if(m.preventDefault(),!u())return;const g={id:(e==null?void 0:e.id)||qe(),companyId:(e==null?void 0:e.companyId)||((x=n.currentCompany)==null?void 0:x.id)||"",name:s.name.trim(),description:s.description.trim(),pointsRequired:Number(s.pointsRequired),imageUrl:s.imageUrl.trim()||void 0,available:s.available,createdAt:(e==null?void 0:e.createdAt)||new Date};r(e?{type:"UPDATE_PRODUCT",payload:g}:{type:"ADD_PRODUCT",payload:g}),t()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Editar Produto":"Novo Produto"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome *"}),o.jsxs("div",{className:"relative",children:[o.jsx(qt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:s.name,onChange:c,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"Nome do produto"})]}),a.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio *"}),o.jsxs("div",{className:"relative",children:[o.jsx(hc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"description",value:s.description,onChange:c,rows:3,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none ${a.description?"border-red-500":"border-gray-300"}`,placeholder:"Descrio do produto"})]}),a.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pontos Necessrios *"}),o.jsxs("div",{className:"relative",children:[o.jsx(vn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"pointsRequired",value:s.pointsRequired,onChange:c,min:"1",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.pointsRequired?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),a.pointsRequired&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.pointsRequired})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da Imagem"}),o.jsxs("div",{className:"relative",children:[o.jsx(wg,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"url",name:"imageUrl",value:s.imageUrl,onChange:c,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all",placeholder:"https://exemplo.com/imagem.jpg"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",name:"available",id:"available",checked:s.available,onChange:c,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}),o.jsx("label",{htmlFor:"available",className:"text-sm font-medium text-gray-700",children:"Produto disponvel"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:e?"Salvar":"Criar Produto"})]})]})]})})}function Hy({onClose:e}){var p;const{state:t,dispatch:n}=ge(),r=t.pointsConfigs.find(w=>{var _;return w.companyId===((_=t.currentCompany)==null?void 0:_.id)})||{reaisPerPoint:10,companyId:((p=t.currentCompany)==null?void 0:p.id)||""},[s,i]=P.useState({customerId:"",customerSearch:"",amount:"",description:""}),[a,l]=P.useState({}),[c,u]=P.useState(!1),d=w=>{const{name:_,value:S}=w.target;i(v=>({...v,[_]:S})),a[_]&&l(v=>({...v,[_]:""}))},m=w=>{const _=w.target.value;i(S=>({...S,customerSearch:_,customerId:""})),u(_.length>0),a.customerId&&l(S=>({...S,customerId:""}))},g=w=>{i(_=>({..._,customerId:w.id,customerSearch:`${w.name} - ${w.cpf}`})),u(!1)},x=t.customers.filter(w=>{var _;return w.companyId===((_=t.currentCompany)==null?void 0:_.id)}).filter(w=>{const _=s.customerSearch.toLowerCase();return w.name.toLowerCase().includes(_)||w.cpf.includes(_)||w.email.toLowerCase().includes(_)}).slice(0,10),y=()=>{const w={};return s.customerId||(w.customerId="Cliente  obrigatrio"),(!s.amount||Number(s.amount)<=0)&&(w.amount="Valor deve ser maior que zero"),l(w),Object.keys(w).length===0},j=w=>{var z,K;if(w.preventDefault(),!y())return;const _=t.customers.find(C=>C.id===s.customerId);if(!_)return;const S=Number(s.amount),v=Math.floor(S/r.reaisPerPoint),k={id:qe(),companyId:((z=t.currentCompany)==null?void 0:z.id)||"",customerId:_.id,customerName:_.name,amount:S,pointsEarned:v,date:new Date,description:s.description.trim()},D={..._,points:_.points+v},T={id:qe(),companyId:((K=t.currentCompany)==null?void 0:K.id)||"",customerId:_.id,customerName:_.name,type:"earned",points:v,description:`Compra: ${_e(S)}`,date:new Date};n({type:"ADD_SALE",payload:k}),n({type:"UPDATE_CUSTOMER",payload:D}),n({type:"ADD_POINTS_TRANSACTION",payload:T}),e()},b=t.customers.find(w=>w.id===s.customerId),h=Number(s.amount)||0,f=Math.floor(h/r.reaisPerPoint);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nova Venda"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ns,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:s.customerSearch,onChange:m,onFocus:()=>u(s.customerSearch.length>0),className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.customerId?"border-red-500":"border-gray-300"}`,placeholder:"Busque por nome, CPF ou email..."}),c&&x.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(w=>o.jsxs("button",{type:"button",onClick:()=>g(w),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:w.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[w.cpf,"  ",w.email,"  ",w.points," pontos"]})]},w.id))}),c&&s.customerSearch.length>0&&x.length===0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Nenhum cliente encontrado"})]}),a.customerId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor da Venda *"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:d,min:"0",step:"0.01",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.amount?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),a.amount&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.amount})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),o.jsxs("div",{className:"relative",children:[o.jsx(hc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"description",value:s.description,onChange:d,rows:3,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Descrio da venda (opcional)"})]})]}),h>0&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Resumo da Venda"}),o.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[o.jsxs("p",{children:["Valor: ",_e(h)]}),o.jsxs("p",{children:["Pontos a ganhar: ",f]}),b&&o.jsxs("p",{children:["Pontos finais: ",b.points+f]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Registrar Venda"})]})]})]})})}function Wy({onClose:e}){var u;const{state:t,dispatch:n}=ge(),r=t.pointsConfigs.find(d=>{var m;return d.companyId===((m=t.currentCompany)==null?void 0:m.id)})||{reaisPerPoint:10,companyId:((u=t.currentCompany)==null?void 0:u.id)||""},[s,i]=P.useState(r.reaisPerPoint),[a,l]=P.useState(""),c=d=>{var m;if(d.preventDefault(),s<=0){l("O valor deve ser maior que zero");return}n({type:"UPDATE_POINTS_CONFIG",payload:{reaisPerPoint:s,companyId:((m=t.currentCompany)==null?void 0:m.id)||""}}),e()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Configurao de Pontos"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reais por Ponto"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",value:s,onChange:d=>i(Number(d.target.value)),min:"0.01",step:"0.01",className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all",placeholder:"0.00"})]}),o.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Cada ",s," reais gastos = 1 ponto"]})]}),a&&o.jsx("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg",children:a}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Exemplo"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["Com R$ ",s.toFixed(2)," por ponto:"]}),o.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[o.jsxs("li",{children:[" Compra de R$ ",(s*10).toFixed(2)," = 10 pontos"]}),o.jsxs("li",{children:[" Compra de R$ ",(s*50).toFixed(2)," = 50 pontos"]}),o.jsxs("li",{children:[" Compra de R$ ",(s*100).toFixed(2)," = 100 pontos"]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Salvar"})]})]})]})})}function Ky({onClose:e}){const{state:t,dispatch:n}=ge(),[r,s]=P.useState({customerId:"",customerSearch:"",points:"",description:"",type:"credit"}),[i,a]=P.useState({}),[l,c]=P.useState(!1),u=b=>{const{name:h,value:f}=b.target;s(p=>({...p,[h]:f})),i[h]&&a(p=>({...p,[h]:""}))},d=b=>{const h=b.target.value;s(f=>({...f,customerSearch:h,customerId:""})),c(h.length>0),i.customerId&&a(f=>({...f,customerId:""}))},m=b=>{s(h=>({...h,customerId:b.id,customerSearch:`${b.name} - ${b.cpf}`})),c(!1)},g=t.customers.filter(b=>{var h;return b.companyId===((h=t.currentCompany)==null?void 0:h.id)}).filter(b=>{const h=r.customerSearch.toLowerCase();return b.name.toLowerCase().includes(h)||b.cpf.includes(h)||b.email.toLowerCase().includes(h)}).slice(0,10),x=()=>{const b={};if(r.customerId||(b.customerId="Cliente  obrigatrio"),(!r.points||Number(r.points)<=0)&&(b.points="Pontos devem ser maior que zero"),r.description.trim()||(b.description="Descrio  obrigatria"),r.type!=="remove_all"){const h=t.customers.find(f=>f.id===r.customerId);h&&r.type==="debit"&&h.points<Number(r.points)&&(b.points="Cliente no possui pontos suficientes")}return a(b),Object.keys(b).length===0},y=b=>{var v;if(b.preventDefault(),!x())return;const h=t.customers.find(k=>k.id===r.customerId);if(!h)return;let f=Number(r.points),p=h.points,w=r.type;r.type==="remove_all"?(f=h.points,p=0,w="debit"):p=r.type==="credit"?h.points+f:h.points-f;const _={...h,points:p},S={id:qe(),companyId:((v=t.currentCompany)==null?void 0:v.id)||"",customerId:h.id,customerName:h.name,type:w,points:f,description:r.type==="remove_all"?`Remoo total de pontos: ${r.description.trim()}`:r.description.trim(),date:new Date};n({type:"UPDATE_CUSTOMER",payload:_}),n({type:"ADD_POINTS_TRANSACTION",payload:S}),e()},j=t.customers.find(b=>b.id===r.customerId);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Gerenciar Pontos"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ns,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:r.customerSearch,onChange:d,onFocus:()=>c(r.customerSearch.length>0),className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${i.customerId?"border-red-500":"border-gray-300"}`,placeholder:"Busque por nome, CPF ou email..."}),l&&g.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(b=>o.jsxs("button",{type:"button",onClick:()=>m(b),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:b.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[b.cpf,"  ",b.email,"  ",b.points," pontos"]})]},b.id))}),l&&r.customerSearch.length>0&&g.length===0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Nenhum cliente encontrado"})]}),i.customerId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Operao *"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>s(b=>({...b,type:"credit"})),className:`flex items-center justify-center space-x-2 px-4 py-3 border rounded-lg transition-all ${r.type==="credit"?"bg-green-50 border-green-300 text-green-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Adicionar"})]}),o.jsxs("button",{type:"button",onClick:()=>s(b=>({...b,type:"debit"})),className:`flex items-center justify-center space-x-2 px-4 py-3 border rounded-lg transition-all ${r.type==="debit"?"bg-red-50 border-red-300 text-red-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(jg,{className:"w-4 h-4"}),o.jsx("span",{children:"Remover"})]}),o.jsxs("button",{type:"button",onClick:()=>s(b=>({...b,type:"remove_all"})),className:`flex items-center justify-center space-x-2 px-3 py-3 border rounded-lg transition-all ${r.type==="remove_all"?"bg-red-50 border-red-300 text-red-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(wn,{className:"w-4 h-4"}),o.jsx("span",{children:"Zerar"})]})]})]}),r.type!=="remove_all"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade de Pontos *"}),o.jsxs("div",{className:"relative",children:[o.jsx(vn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"points",value:r.points,onChange:u,min:"1",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${i.points?"border-red-500":"border-gray-300"}`,placeholder:"0"})]}),i.points&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.points})]}),r.type==="remove_all"&&j&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-red-800 mb-2",children:" Ateno"}),o.jsxs("p",{className:"text-sm text-red-700",children:["Esta ao ir remover TODOS os ",j.points," pontos do cliente. Esta operao no pode ser desfeita."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio *"}),o.jsx("textarea",{name:"description",value:r.description,onChange:u,rows:3,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none ${i.description?"border-red-500":"border-gray-300"}`,placeholder:r.type==="remove_all"?"Motivo da remoo total de pontos":"Motivo da alterao de pontos"}),i.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description})]}),j&&(r.points||r.type==="remove_all")&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Resumo"}),o.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[o.jsxs("p",{children:["Cliente: ",j.name]}),o.jsxs("p",{children:["Pontos atuais: ",j.points]}),o.jsxs("p",{children:["Pontos aps operao: ",r.type==="remove_all"?0:r.type==="credit"?j.points+Number(r.points):j.points-Number(r.points)]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:`flex-1 px-4 py-3 text-white rounded-lg transition-all transform hover:scale-105 ${r.type==="remove_all"?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":r.type==="credit"?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600":"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600"}`,children:r.type==="remove_all"?"Zerar Pontos":r.type==="credit"?"Adicionar Pontos":"Remover Pontos"})]})]})]})})}var Cs={},Qy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},am={},Qe={};let wc;const Gy=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Qe.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Qe.getSymbolTotalCodewords=function(t){return Gy[t]};Qe.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Qe.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');wc=t};Qe.isKanjiModeEnabled=function(){return typeof wc<"u"};Qe.toSJIS=function(t){return wc(t)};var vo={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,s){if(e.isValid(r))return r;try{return t(r)}catch{return s}}})(vo);function lm(){this.buffer=[],this.length=0}lm.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Jy=lm;function Es(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Es.prototype.set=function(e,t,n,r){const s=e*this.size+t;this.data[s]=n,r&&(this.reservedBit[s]=!0)};Es.prototype.get=function(e,t){return this.data[e*this.size+t]};Es.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Es.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Yy=Es,cm={};(function(e){const t=Qe.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=t(r),a=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-a;return l.push(6),l.reverse()},e.getPositions=function(r){const s=[],i=e.getRowColCoords(r),a=i.length;for(let l=0;l<a;l++)for(let c=0;c<a;c++)l===0&&c===0||l===0&&c===a-1||l===a-1&&c===0||s.push([i[l],i[c]]);return s}})(cm);var um={};const Xy=Qe.getSymbolSize,od=7;um.getPositions=function(t){const n=Xy(t);return[[0,0],[n-od,0],[0,n-od]]};var dm={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const i=s.size;let a=0,l=0,c=0,u=null,d=null;for(let m=0;m<i;m++){l=c=0,u=d=null;for(let g=0;g<i;g++){let x=s.get(m,g);x===u?l++:(l>=5&&(a+=t.N1+(l-5)),u=x,l=1),x=s.get(g,m),x===d?c++:(c>=5&&(a+=t.N1+(c-5)),d=x,c=1)}l>=5&&(a+=t.N1+(l-5)),c>=5&&(a+=t.N1+(c-5))}return a},e.getPenaltyN2=function(s){const i=s.size;let a=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const u=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(u===4||u===0)&&a++}return a*t.N2},e.getPenaltyN3=function(s){const i=s.size;let a=0,l=0,c=0;for(let u=0;u<i;u++){l=c=0;for(let d=0;d<i;d++)l=l<<1&2047|s.get(u,d),d>=10&&(l===1488||l===93)&&a++,c=c<<1&2047|s.get(d,u),d>=10&&(c===1488||c===93)&&a++}return a*t.N3},e.getPenaltyN4=function(s){let i=0;const a=s.data.length;for(let c=0;c<a;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/a/5)-10)*t.N4};function n(r,s,i){switch(r){case e.Patterns.PATTERN000:return(s+i)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(s+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return s*i%2+s*i%3===0;case e.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case e.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(s,i){const a=i.size;for(let l=0;l<a;l++)for(let c=0;c<a;c++)i.isReserved(c,l)||i.xor(c,l,n(s,c,l))},e.getBestMask=function(s,i){const a=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let u=0;u<a;u++){i(u),e.applyMask(u,s);const d=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(u,s),d<c&&(c=d,l=u)}return l}})(dm);var wo={};const Wt=vo,ti=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ni=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];wo.getBlocksCount=function(t,n){switch(n){case Wt.L:return ti[(t-1)*4+0];case Wt.M:return ti[(t-1)*4+1];case Wt.Q:return ti[(t-1)*4+2];case Wt.H:return ti[(t-1)*4+3];default:return}};wo.getTotalCodewordsCount=function(t,n){switch(n){case Wt.L:return ni[(t-1)*4+0];case Wt.M:return ni[(t-1)*4+1];case Wt.Q:return ni[(t-1)*4+2];case Wt.H:return ni[(t-1)*4+3];default:return}};var hm={},bo={};const Yr=new Uint8Array(512),Hi=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Yr[n]=t,Hi[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Yr[n]=Yr[n-255]})();bo.log=function(t){if(t<1)throw new Error("log("+t+")");return Hi[t]};bo.exp=function(t){return Yr[t]};bo.mul=function(t,n){return t===0||n===0?0:Yr[Hi[t]+Hi[n]]};(function(e){const t=bo;e.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let a=0;a<r.length;a++)for(let l=0;l<s.length;l++)i[a+l]^=t.mul(r[a],s[l]);return i},e.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const a=i[0];for(let c=0;c<s.length;c++)i[c]^=t.mul(s[c],a);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=e.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(hm);const fm=hm;function bc(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}bc.prototype.initialize=function(t){this.degree=t,this.genPoly=fm.generateECPolynomial(this.degree)};bc.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=fm.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var Zy=bc,mm={},ln={},jc={};jc.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var wt={};const pm="[0-9]+",ev="[A-Z $%*+\\-./:]+";let xs="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";xs=xs.replace(/u/g,"\\u");const tv="(?:(?![A-Z0-9 $%*+\\-./:]|"+xs+`)(?:.|[\r
]))+`;wt.KANJI=new RegExp(xs,"g");wt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");wt.BYTE=new RegExp(tv,"g");wt.NUMERIC=new RegExp(pm,"g");wt.ALPHANUMERIC=new RegExp(ev,"g");const nv=new RegExp("^"+xs+"$"),rv=new RegExp("^"+pm+"$"),sv=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");wt.testKanji=function(t){return nv.test(t)};wt.testNumeric=function(t){return rv.test(t)};wt.testAlphanumeric=function(t){return sv.test(t)};(function(e){const t=jc,n=wt;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,a){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?i.ccBits[0]:a<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(i,a){if(e.isValid(i))return i;try{return r(i)}catch{return a}}})(ln);(function(e){const t=Qe,n=wo,r=vo,s=ln,i=jc,a=7973,l=t.getBCHDigit(a);function c(g,x,y){for(let j=1;j<=40;j++)if(x<=e.getCapacity(j,y,g))return j}function u(g,x){return s.getCharCountIndicator(g,x)+4}function d(g,x){let y=0;return g.forEach(function(j){const b=u(j.mode,x);y+=b+j.getBitsLength()}),y}function m(g,x){for(let y=1;y<=40;y++)if(d(g,y)<=e.getCapacity(y,x,s.MIXED))return y}e.from=function(x,y){return i.isValid(x)?parseInt(x,10):y},e.getCapacity=function(x,y,j){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=s.BYTE);const b=t.getSymbolTotalCodewords(x),h=n.getTotalCodewordsCount(x,y),f=(b-h)*8;if(j===s.MIXED)return f;const p=f-u(j,x);switch(j){case s.NUMERIC:return Math.floor(p/10*3);case s.ALPHANUMERIC:return Math.floor(p/11*2);case s.KANJI:return Math.floor(p/13);case s.BYTE:default:return Math.floor(p/8)}},e.getBestVersionForData=function(x,y){let j;const b=r.from(y,r.M);if(Array.isArray(x)){if(x.length>1)return m(x,b);if(x.length===0)return 1;j=x[0]}else j=x;return c(j.mode,j.getLength(),b)},e.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let y=x<<12;for(;t.getBCHDigit(y)-l>=0;)y^=a<<t.getBCHDigit(y)-l;return x<<12|y}})(mm);var gm={};const fl=Qe,xm=1335,iv=21522,ad=fl.getBCHDigit(xm);gm.getEncodedBits=function(t,n){const r=t.bit<<3|n;let s=r<<10;for(;fl.getBCHDigit(s)-ad>=0;)s^=xm<<fl.getBCHDigit(s)-ad;return(r<<10|s)^iv};var ym={};const ov=ln;function pr(e){this.mode=ov.NUMERIC,this.data=e.toString()}pr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};pr.prototype.getLength=function(){return this.data.length};pr.prototype.getBitsLength=function(){return pr.getBitsLength(this.data.length)};pr.prototype.write=function(t){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),t.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),t.put(s,i*3+1))};var av=pr;const lv=ln,ia=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function gr(e){this.mode=lv.ALPHANUMERIC,this.data=e}gr.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};gr.prototype.getLength=function(){return this.data.length};gr.prototype.getBitsLength=function(){return gr.getBitsLength(this.data.length)};gr.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=ia.indexOf(this.data[n])*45;r+=ia.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(ia.indexOf(this.data[n]),6)};var cv=gr;const uv=ln;function xr(e){this.mode=uv.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}xr.getBitsLength=function(t){return t*8};xr.prototype.getLength=function(){return this.data.length};xr.prototype.getBitsLength=function(){return xr.getBitsLength(this.data.length)};xr.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var dv=xr;const hv=ln,fv=Qe;function yr(e){this.mode=hv.KANJI,this.data=e}yr.getBitsLength=function(t){return t*13};yr.prototype.getLength=function(){return this.data.length};yr.prototype.getBitsLength=function(){return yr.getBitsLength(this.data.length)};yr.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=fv.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var mv=yr,vm={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,s){var i={},a={};a[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var c,u,d,m,g,x,y,j,b;!l.empty();){c=l.pop(),u=c.value,m=c.cost,g=n[u]||{};for(d in g)g.hasOwnProperty(d)&&(x=g[d],y=m+x,j=a[d],b=typeof a[d]>"u",(b||j>y)&&(a[d]=y,l.push(d,y),i[d]=u))}if(typeof s<"u"&&typeof a[s]>"u"){var h=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(h)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=t.single_source_shortest_paths(n,r,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(vm);var pv=vm.exports;(function(e){const t=ln,n=av,r=cv,s=dv,i=mv,a=wt,l=Qe,c=pv;function u(h){return unescape(encodeURIComponent(h)).length}function d(h,f,p){const w=[];let _;for(;(_=h.exec(p))!==null;)w.push({data:_[0],index:_.index,mode:f,length:_[0].length});return w}function m(h){const f=d(a.NUMERIC,t.NUMERIC,h),p=d(a.ALPHANUMERIC,t.ALPHANUMERIC,h);let w,_;return l.isKanjiModeEnabled()?(w=d(a.BYTE,t.BYTE,h),_=d(a.KANJI,t.KANJI,h)):(w=d(a.BYTE_KANJI,t.BYTE,h),_=[]),f.concat(p,w,_).sort(function(v,k){return v.index-k.index}).map(function(v){return{data:v.data,mode:v.mode,length:v.length}})}function g(h,f){switch(f){case t.NUMERIC:return n.getBitsLength(h);case t.ALPHANUMERIC:return r.getBitsLength(h);case t.KANJI:return i.getBitsLength(h);case t.BYTE:return s.getBitsLength(h)}}function x(h){return h.reduce(function(f,p){const w=f.length-1>=0?f[f.length-1]:null;return w&&w.mode===p.mode?(f[f.length-1].data+=p.data,f):(f.push(p),f)},[])}function y(h){const f=[];for(let p=0;p<h.length;p++){const w=h[p];switch(w.mode){case t.NUMERIC:f.push([w,{data:w.data,mode:t.ALPHANUMERIC,length:w.length},{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.ALPHANUMERIC:f.push([w,{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.KANJI:f.push([w,{data:w.data,mode:t.BYTE,length:u(w.data)}]);break;case t.BYTE:f.push([{data:w.data,mode:t.BYTE,length:u(w.data)}])}}return f}function j(h,f){const p={},w={start:{}};let _=["start"];for(let S=0;S<h.length;S++){const v=h[S],k=[];for(let D=0;D<v.length;D++){const T=v[D],z=""+S+D;k.push(z),p[z]={node:T,lastCount:0},w[z]={};for(let K=0;K<_.length;K++){const C=_[K];p[C]&&p[C].node.mode===T.mode?(w[C][z]=g(p[C].lastCount+T.length,T.mode)-g(p[C].lastCount,T.mode),p[C].lastCount+=T.length):(p[C]&&(p[C].lastCount=T.length),w[C][z]=g(T.length,T.mode)+4+t.getCharCountIndicator(T.mode,f))}}_=k}for(let S=0;S<_.length;S++)w[_[S]].end=0;return{map:w,table:p}}function b(h,f){let p;const w=t.getBestModeForData(h);if(p=t.from(f,w),p!==t.BYTE&&p.bit<w.bit)throw new Error('"'+h+'" cannot be encoded with mode '+t.toString(p)+`.
 Suggested mode is: `+t.toString(w));switch(p===t.KANJI&&!l.isKanjiModeEnabled()&&(p=t.BYTE),p){case t.NUMERIC:return new n(h);case t.ALPHANUMERIC:return new r(h);case t.KANJI:return new i(h);case t.BYTE:return new s(h)}}e.fromArray=function(f){return f.reduce(function(p,w){return typeof w=="string"?p.push(b(w,null)):w.data&&p.push(b(w.data,w.mode)),p},[])},e.fromString=function(f,p){const w=m(f,l.isKanjiModeEnabled()),_=y(w),S=j(_,p),v=c.find_path(S.map,"start","end"),k=[];for(let D=1;D<v.length-1;D++)k.push(S.table[v[D]].node);return e.fromArray(x(k))},e.rawSplit=function(f){return e.fromArray(m(f,l.isKanjiModeEnabled()))}})(ym);const jo=Qe,oa=vo,gv=Jy,xv=Yy,yv=cm,vv=um,ml=dm,pl=wo,wv=Zy,Wi=mm,bv=gm,jv=ln,aa=ym;function Nv(e,t){const n=e.size,r=vv.getPositions(t);for(let s=0;s<r.length;s++){const i=r[s][0],a=r[s][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||n<=i+l))for(let c=-1;c<=7;c++)a+c<=-1||n<=a+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(i+l,a+c,!0,!0):e.set(i+l,a+c,!1,!0))}}function _v(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function kv(e,t){const n=yv.getPositions(t);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a===-2||a===2||l===-2||l===2||a===0&&l===0?e.set(s+a,i+l,!0,!0):e.set(s+a,i+l,!1,!0)}}function Sv(e,t){const n=e.size,r=Wi.getEncodedBits(t);let s,i,a;for(let l=0;l<18;l++)s=Math.floor(l/3),i=l%3+n-8-3,a=(r>>l&1)===1,e.set(s,i,a,!0),e.set(i,s,a,!0)}function la(e,t,n){const r=e.size,s=bv.getEncodedBits(t,n);let i,a;for(i=0;i<15;i++)a=(s>>i&1)===1,i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(r-15+i,8,a,!0),i<8?e.set(8,r-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(r-8,8,1,!0)}function Cv(e,t){const n=e.size;let r=-1,s=n-1,i=7,a=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(s,l-c)){let u=!1;a<t.length&&(u=(t[a]>>>i&1)===1),e.set(s,l-c,u),i--,i===-1&&(a++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function Ev(e,t,n){const r=new gv;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),jv.getCharCountIndicator(c.mode,e)),c.write(r)});const s=jo.getSymbolTotalCodewords(e),i=pl.getTotalCodewordsCount(e,t),a=(s-i)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(a-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return Pv(r,e,t)}function Pv(e,t,n){const r=jo.getSymbolTotalCodewords(t),s=pl.getTotalCodewordsCount(t,n),i=r-s,a=pl.getBlocksCount(t,n),l=r%a,c=a-l,u=Math.floor(r/a),d=Math.floor(i/a),m=d+1,g=u-d,x=new wv(g);let y=0;const j=new Array(a),b=new Array(a);let h=0;const f=new Uint8Array(e.buffer);for(let v=0;v<a;v++){const k=v<c?d:m;j[v]=f.slice(y,y+k),b[v]=x.encode(j[v]),y+=k,h=Math.max(h,k)}const p=new Uint8Array(r);let w=0,_,S;for(_=0;_<h;_++)for(S=0;S<a;S++)_<j[S].length&&(p[w++]=j[S][_]);for(_=0;_<g;_++)for(S=0;S<a;S++)p[w++]=b[S][_];return p}function Tv(e,t,n,r){let s;if(Array.isArray(e))s=aa.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const d=aa.rawSplit(e);u=Wi.getBestVersionForData(d,n)}s=aa.fromString(e,u||40)}else throw new Error("Invalid data");const i=Wi.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const a=Ev(t,n,s),l=jo.getSymbolSize(t),c=new xv(l);return Nv(c,t),_v(c),kv(c,t),la(c,n,0),t>=7&&Sv(c,t),Cv(c,a),isNaN(r)&&(r=ml.getBestMask(c,la.bind(null,c,n))),ml.applyMask(r,c),la(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:s}}am.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=oa.M,s,i;return typeof n<"u"&&(r=oa.from(n.errorCorrectionLevel,oa.M),s=Wi.from(n.version),i=ml.from(n.maskPattern),n.toSJISFunc&&jo.setToSJISFunction(n.toSJISFunc)),Tv(t,s,r,i)};var wm={},Nc={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:i,scale:i?4:a,margin:s,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},e.getImageWidth=function(r,s){const i=e.getScale(r,s);return Math.floor((r+s.margin*2)*i)},e.qrToImageData=function(r,s,i){const a=s.modules.size,l=s.modules.data,c=e.getScale(a,i),u=Math.floor((a+i.margin*2)*c),d=i.margin*c,m=[i.color.light,i.color.dark];for(let g=0;g<u;g++)for(let x=0;x<u;x++){let y=(g*u+x)*4,j=i.color.light;if(g>=d&&x>=d&&g<u-d&&x<u-d){const b=Math.floor((g-d)/c),h=Math.floor((x-d)/c);j=m[l[b*a+h]?1:0]}r[y++]=j.r,r[y++]=j.g,r[y++]=j.b,r[y]=j.a}}})(Nc);(function(e){const t=Nc;function n(s,i,a){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=a,i.width=a,i.style.height=a+"px",i.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,a,l){let c=l,u=a;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),a||(u=r()),c=t.getOptions(c);const d=t.getImageWidth(i.modules.size,c),m=u.getContext("2d"),g=m.createImageData(d,d);return t.qrToImageData(g.data,i,c),n(m,u,d),m.putImageData(g,0,0),u},e.renderToDataURL=function(i,a,l){let c=l;typeof c>"u"&&(!a||!a.getContext)&&(c=a,a=void 0),c||(c={});const u=e.render(i,a,c),d=c.type||"image/png",m=c.rendererOpts||{};return u.toDataURL(d,m.quality)}})(wm);var bm={};const Av=Nc;function ld(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function ca(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function Rv(e,t,n){let r="",s=0,i=!1,a=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);!c&&!i&&(i=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(r+=i?ca("M",c+n,.5+u+n):ca("m",s,0),s=0,i=!1),c+1<t&&e[l+1]||(r+=ca("h",a),a=0)):s++}return r}bm.render=function(t,n,r){const s=Av.getOptions(n),i=t.modules.size,a=t.modules.data,l=i+s.margin*2,c=s.color.light.a?"<path "+ld(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+ld(s.color.dark,"stroke")+' d="'+Rv(a,i,s.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof r=="function"&&r(null,g),g};const Dv=Qy,gl=am,jm=wm,Iv=bm;function _c(e,t,n,r,s){const i=[].slice.call(arguments,1),a=i.length,l=typeof i[a-1]=="function";if(!l&&!Dv())throw new Error("Callback required as last argument");if(l){if(a<2)throw new Error("Too few arguments provided");a===2?(s=n,n=t,t=r=void 0):a===3&&(t.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(n=t,t=r=void 0):a===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,u){try{const d=gl.create(n,r);c(e(d,t,r))}catch(d){u(d)}})}try{const c=gl.create(n,r);s(null,e(c,t,r))}catch(c){s(c)}}Cs.create=gl.create;Cs.toCanvas=_c.bind(null,jm.render);Cs.toDataURL=_c.bind(null,jm.renderToDataURL);Cs.toString=_c.bind(null,function(e,t,n){return Iv.render(e,n)});function Ov({onClose:e}){const{state:t}=ge(),[n,r]=P.useState(""),[s,i]=P.useState(!1),a=t.currentCompany,l=`${window.location.origin}/register/${a==null?void 0:a.slug}`;P.useEffect(()=>{l&&(async()=>{try{const m=await Cs.toDataURL(l,{width:300,margin:2,color:{dark:"#1f2937",light:"#ffffff"}});r(m)}catch(m){console.error("Erro ao gerar QR Code:",m)}})()},[l]);const c=async()=>{try{await navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3)}catch(d){console.error("Erro ao copiar URL:",d)}},u=()=>{if(n){const d=document.createElement("a");d.download=`qr-code-${a==null?void 0:a.slug}.png`,d.href=n,d.click()}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"QR Code de Cadastro"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-4",children:n?o.jsx("img",{src:n,alt:"QR Code",className:"mx-auto rounded-lg shadow-sm"}):o.jsx("div",{className:"w-[300px] h-[300px] mx-auto bg-gray-200 rounded-lg flex items-center justify-center",children:o.jsx(Ef,{className:"w-16 h-16 text-gray-400"})})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a==null?void 0:a.name}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Escaneie o QR Code para se cadastrar automaticamente"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL de Cadastro"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm"}),o.jsx("button",{onClick:c,className:"flex items-center space-x-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:s?o.jsxs(o.Fragment,{children:[o.jsx(pg,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Copiado!"})]}):o.jsxs(o.Fragment,{children:[o.jsx(gg,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Copiar"})]})})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Como usar:"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("li",{children:" Clientes escaneiam o QR Code com a cmera do celular"}),o.jsx("li",{children:" So direcionados para uma pgina de cadastro"}),o.jsx("li",{children:" Aps o cadastro, j tm acesso ao sistema"}),o.jsx("li",{children:" Podem acompanhar pontos e fazer solicitaes"})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar"}),o.jsxs("button",{onClick:u,disabled:!n,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50",children:[o.jsx(yg,{className:"w-4 h-4"}),o.jsx("span",{children:"Baixar QR"})]})]})]})]})})}function Lv({type:e,onClose:t}){const{state:n}=ge(),r=n.currentCompany,s=n.loyaltyRequests.filter(h=>h.companyId===(r==null?void 0:r.id)),i=n.pointsConfigs.find(h=>h.companyId===(r==null?void 0:r.id))||{reaisPerPoint:10,companyId:(r==null?void 0:r.id)||""},a=s.length,l=s.filter(h=>h.status==="pending").length,c=s.filter(h=>h.status==="approved"||h.status==="available_for_pickup"||h.status==="completed").length,u=s.filter(h=>h.status==="rejected").length;s.filter(h=>h.status==="completed").length;const d=s.filter(h=>h.status==="approved"||h.status==="available_for_pickup"||h.status==="completed"),m=d.reduce((h,f)=>h+f.pointsUsed,0),g=m*(i.reaisPerPoint/100),x=d.reduce((h,f)=>{const p=f.productName;return h[p]||(h[p]={count:0,totalPoints:0}),h[p].count++,h[p].totalPoints+=f.pointsUsed,h},{}),y=Object.entries(x).sort(([,h],[,f])=>f.count-h.count).slice(0,5),j=d.reduce((h,f)=>{const p=new Date(f.requestDate).toLocaleDateString("pt-BR",{year:"numeric",month:"long"});return h[p]||(h[p]={count:0,totalPoints:0}),h[p].count++,h[p].totalPoints+=f.pointsUsed,h},{}),b=Object.entries(j).sort(([h],[f])=>new Date(h).getTime()-new Date(f).getTime()).slice(-6);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e==="requests"?"Estatsticas de Solicitaes":"Custo das Solicitaes"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-6",children:e==="requests"?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:a})]}),o.jsx(qt,{className:"w-8 h-8 text-blue-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Pendentes"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:l})]}),o.jsx(Ht,{className:"w-8 h-8 text-yellow-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-600",children:"Aprovadas"}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:c})]}),o.jsx(vn,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-red-600",children:"Rejeitadas"}),o.jsx("p",{className:"text-2xl font-bold text-red-900",children:u})]}),o.jsx(He,{className:"w-8 h-8 text-red-500"})]})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Produtos Mais Solicitados"}),o.jsx("div",{className:"space-y-3",children:y.length>0?y.map(([h,f],p)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-bold text-blue-600",children:p+1})}),o.jsx("span",{className:"font-medium text-gray-900",children:h})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[f.count," solicitaes"]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[f.totalPoints," pontos"]})]})]},h)):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma solicitao aprovada ainda"})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Evoluo Mensal"}),o.jsx("div",{className:"space-y-3",children:b.length>0?b.map(([h,f])=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-900",children:h}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[f.count," solicitaes"]}),o.jsxs("div",{className:"text-xs text-gray-500",children:[f.totalPoints," pontos"]})]})]},h)):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum dado mensal disponvel"})})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Total de Pontos"}),o.jsx("p",{className:"text-2xl font-bold text-purple-900",children:m.toLocaleString()})]}),o.jsx(vn,{className:"w-8 h-8 text-purple-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-600",children:"Custo Estimado"}),o.jsx("p",{className:"text-2xl font-bold text-green-900",children:_e(g)})]}),o.jsx(En,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Mdia por Solicitao"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:c>0?Math.round(m/c):0}),o.jsx("p",{className:"text-xs text-blue-600",children:"pontos"})]}),o.jsx(Ht,{className:"w-8 h-8 text-blue-500"})]})})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Configurao Atual"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["Cada R$ ",i.reaisPerPoint.toFixed(2)," gastos = 1 ponto"]}),o.jsxs("p",{className:"text-sm text-blue-700",children:["Valor estimado por ponto: R$ ",(i.reaisPerPoint/100).toFixed(2)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Custo por Produto"}),o.jsx("div",{className:"space-y-3",children:y.length>0?y.map(([h,f])=>{const p=f.totalPoints*(i.reaisPerPoint/100);return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900",children:h}),o.jsxs("div",{className:"text-xs text-gray-500",children:[f.count," solicitaes"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:_e(p)}),o.jsxs("div",{className:"text-xs text-gray-500",children:[f.totalPoints," pontos"]})]})]},h)}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma solicitao aprovada ainda"})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Custo Mensal"}),o.jsx("div",{className:"space-y-3",children:b.length>0?b.map(([h,f])=>{const p=f.totalPoints*(i.reaisPerPoint/100);return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-900",children:h}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:_e(p)}),o.jsxs("div",{className:"text-xs text-gray-500",children:[f.totalPoints," pontos"]})]})]},h)}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum dado mensal disponvel"})})]})]})}),o.jsx("div",{className:"flex justify-end p-6 border-t border-gray-200",children:o.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:"Fechar"})})]})})}function $v({onClose:e}){const{state:t,dispatch:n}=ge(),r=t.currentCompany,s=t.webhookConfigs.find(b=>b.companyId===(r==null?void 0:r.id)),[i,a]=P.useState(s||{companyId:(r==null?void 0:r.id)||"",purchases:{enabled:!1,url:""},requests:{enabled:!1,url:""},birthdays:{enabled:!1,url:"",message:"Ol, {nome_do_cliente}! Vimos que  seu aniversrio e gostaramos de informar que disponibilizamos {valor_de_creditos} pontos para voc! Que seu aniversrio seja ainda mais completo!",creditsAmount:100,daysInAdvance:0}}),[l,c]=P.useState({}),u=b=>{a(h=>({...h,[b]:{...h[b],enabled:!h[b].enabled}}))},d=(b,h)=>{a(f=>({...f,[b]:{...f[b],url:h}})),l[`${b}_url`]&&c(f=>({...f,[`${b}_url`]:""}))},m=(b,h)=>{a(f=>({...f,birthdays:{...f.birthdays,[b]:h}})),l[`birthdays_${b}`]&&c(f=>({...f,[`birthdays_${b}`]:""}))},g=b=>{try{return new URL(b),b.startsWith("http://")||b.startsWith("https://")}catch{return!1}},x=()=>{const b={};return i.purchases.enabled&&!g(i.purchases.url)&&(b.purchases_url="URL invlida para webhook de compras"),i.requests.enabled&&!g(i.requests.url)&&(b.requests_url="URL invlida para webhook de solicitaes"),i.birthdays.enabled&&(g(i.birthdays.url)||(b.birthdays_url="URL invlida para webhook de aniversrios"),i.birthdays.message.trim()||(b.birthdays_message="Mensagem de aniversrio  obrigatria"),i.birthdays.creditsAmount<=0&&(b.birthdays_creditsAmount="Quantidade de crditos deve ser maior que zero"),(i.birthdays.daysInAdvance<0||i.birthdays.daysInAdvance>30)&&(b.birthdays_daysInAdvance="Dias de antecedncia deve ser entre 0 e 30")),c(b),Object.keys(b).length===0},y=()=>{x()&&(n({type:"UPDATE_WEBHOOK_CONFIG",payload:i}),e())},j=async b=>{var f;const h=i[b].url;if(h){try{new URL(h)}catch{alert("URL invlida. Verifique o formato da URL.");return}try{let p={};switch(b){case"purchases":p={type:"purchase",customer:{name:"Joo Silva",phone:"(11) 99999-9999"},purchase:{amount:150,points_earned:15},store:{name:r==null?void 0:r.name},timestamp:new Date().toISOString()};break;case"requests":p={type:"request_approved",customer:{name:"Maria Santos",phone:"(11) 88888-8888"},request:{product:"Produto Teste",approved_at:new Date().toISOString(),expires_at:new Date(Date.now()+24*60*60*1e3).toISOString()},store:{name:r==null?void 0:r.name}};break;case"birthdays":p={type:"birthday",customer:{name:"Ana Costa",phone:"(11) 77777-7777",last_purchase:"2024-01-15"},message:i.birthdays.message.replace("{nome_do_cliente}","Ana Costa").replace("{valor_de_creditos}",i.birthdays.creditsAmount.toString()),credits_amount:i.birthdays.creditsAmount,store:{name:r==null?void 0:r.name}};break}const w=(f=document.querySelector(`button[onclick*="testWebhook('${b}')"]`))==null?void 0:f.textContent,_=document.querySelector(`button[onclick*="testWebhook('${b}')"]`);_&&(_.textContent="Testando...",_.disabled=!0);const S=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"Fideliza.AI-Webhook-Test/1.0"},body:JSON.stringify(p),mode:"no-cors"});_&&(_.textContent=w||"Testar",_.disabled=!1),alert(` Webhook enviado com sucesso!

Dados enviados para: ${h}

 Payload:
${JSON.stringify(p,null,2)}`)}catch(p){const w=document.querySelector(`button[onclick*="testWebhook('${b}')"]`);w&&(w.textContent="Testar",w.disabled=!1);let _="Erro desconhecido";p instanceof TypeError&&p.message.includes("Failed to fetch")?_=` Erro de conexo:

 Verifique se a URL est correta
 Certifique-se de que o servidor est online
 Verifique se o servidor aceita requisies CORS
 Teste a URL em uma ferramenta como Postman

URL testada: ${h}`:p instanceof Error&&(_=` Erro: ${p.message}`),alert(_)}}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Pf,{className:"w-6 h-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Configurao de Webhooks"})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(or,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Webhook - Compras"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Enviado quando uma venda  registrada"})]})]}),o.jsx("button",{onClick:()=>u("purchases"),className:"flex items-center space-x-2",children:i.purchases.enabled?o.jsx(Xo,{className:"w-8 h-8 text-green-500"}):o.jsx(Yo,{className:"w-8 h-8 text-gray-400"})})]}),i.purchases.enabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"url",value:i.purchases.url,onChange:b=>d("purchases",b.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ${l.purchases_url?"border-red-500":"border-gray-300"}`,placeholder:"https://sua-api.com/webhook/compras"}),o.jsx("button",{onClick:()=>j("purchases"),disabled:!i.purchases.url,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Testar"})]}),l.purchases_url&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.purchases_url})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Enviados:"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[o.jsx("li",{children:" Nome do cliente"}),o.jsx("li",{children:" Telefone do cliente"}),o.jsx("li",{children:" Valor da compra"}),o.jsx("li",{children:" Quantidade de pontos ganhos"}),o.jsx("li",{children:" Nome da loja"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(vg,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Webhook - Solicitaes"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Enviado quando uma solicitao  aprovada"})]})]}),o.jsx("button",{onClick:()=>u("requests"),className:"flex items-center space-x-2",children:i.requests.enabled?o.jsx(Xo,{className:"w-8 h-8 text-blue-500"}):o.jsx(Yo,{className:"w-8 h-8 text-gray-400"})})]}),i.requests.enabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"url",value:i.requests.url,onChange:b=>d("requests",b.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${l.requests_url?"border-red-500":"border-gray-300"}`,placeholder:"https://sua-api.com/webhook/solicitacoes"}),o.jsx("button",{onClick:()=>j("requests"),disabled:!i.requests.url,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Testar"})]}),l.requests_url&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.requests_url})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Enviados:"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[o.jsx("li",{children:" Nome do cliente"}),o.jsx("li",{children:" Telefone do cliente"}),o.jsx("li",{children:" Nome da loja"}),o.jsx("li",{children:" Produto solicitado"}),o.jsx("li",{children:" Horrio da aprovao"}),o.jsx("li",{children:" Horrio mximo para retirada"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(gi,{className:"w-5 h-5 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Webhook - Aniversrios"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Enviado em aniversrios de clientes"})]})]}),o.jsx("button",{onClick:()=>u("birthdays"),className:"flex items-center space-x-2",children:i.birthdays.enabled?o.jsx(Xo,{className:"w-8 h-8 text-purple-500"}):o.jsx(Yo,{className:"w-8 h-8 text-gray-400"})})]}),i.birthdays.enabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL do Webhook *"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"url",value:i.birthdays.url,onChange:b=>d("birthdays",b.target.value),className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.birthdays_url?"border-red-500":"border-gray-300"}`,placeholder:"https://sua-api.com/webhook/aniversarios"}),o.jsx("button",{onClick:()=>j("birthdays"),disabled:!i.birthdays.url,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Testar"})]}),l.birthdays_url&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_url})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crditos de Aniversrio *"}),o.jsx("input",{type:"number",value:i.birthdays.creditsAmount,onChange:b=>m("creditsAmount",Number(b.target.value)),min:"1",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.birthdays_creditsAmount?"border-red-500":"border-gray-300"}`,placeholder:"100"}),l.birthdays_creditsAmount&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_creditsAmount})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dias de Antecedncia *"}),o.jsxs("select",{value:i.birthdays.daysInAdvance,onChange:b=>m("daysInAdvance",Number(b.target.value)),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 ${l.birthdays_daysInAdvance?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:0,children:"No dia do aniversrio"}),o.jsx("option",{value:1,children:"1 dia antes"}),o.jsx("option",{value:3,children:"3 dias antes"}),o.jsx("option",{value:7,children:"1 semana antes"}),o.jsx("option",{value:15,children:"15 dias antes"}),o.jsx("option",{value:30,children:"30 dias antes"})]}),l.birthdays_daysInAdvance&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_daysInAdvance})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensagem Personalizada *"}),o.jsx("textarea",{value:i.birthdays.message,onChange:b=>m("message",b.target.value),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none ${l.birthdays_message?"border-red-500":"border-gray-300"}`,placeholder:"Digite sua mensagem personalizada..."}),l.birthdays_message&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.birthdays_message}),o.jsxs("div",{className:"mt-2 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"Variveis Disponveis:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[o.jsxs("div",{children:[o.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{nome_do_cliente}"})," - Nome do cliente"]}),o.jsxs("div",{children:[o.jsx("code",{className:"bg-purple-100 px-1 rounded",children:"{valor_de_creditos}"})," - Quantidade de crditos"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Dados Enviados:"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[o.jsx("li",{children:" Nome do cliente"}),o.jsx("li",{children:" Telefone do cliente"}),o.jsx("li",{children:" Data da ltima venda"}),o.jsx("li",{children:" Mensagem personalizada"}),o.jsx("li",{children:" Quantidade de crditos"}),o.jsx("li",{children:" Nome da loja"})]})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[o.jsx("button",{onClick:e,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(_g,{className:"w-4 h-4"}),o.jsx("span",{children:"Salvar Configuraes"})]})]})]})})}function Uv({onClose:e}){var S;const{state:t,dispatch:n}=ge(),r=t.pointsConfigs.find(v=>{var k;return v.companyId===((k=t.currentCompany)==null?void 0:k.id)})||{reaisPerPoint:10,companyId:((S=t.currentCompany)==null?void 0:S.id)||""},[s,i]=P.useState({customerId:"",customerSearch:"",amount:"",description:"",products:"",usePointsDiscount:!1,pointsToUse:""}),[a,l]=P.useState({}),[c,u]=P.useState(!1),d=v=>{const{name:k,value:D,type:T}=v.target,z=T==="checkbox"?v.target.checked:D;i(K=>({...K,[k]:z})),a[k]&&l(K=>({...K,[k]:""}))},m=v=>{const k=v.target.value;i(D=>({...D,customerSearch:k,customerId:""})),u(k.length>0),a.customerId&&l(D=>({...D,customerId:""}))},g=v=>{i(k=>({...k,customerId:v.id,customerSearch:`${v.name} - ${v.cpf}`})),u(!1)},x=t.customers.filter(v=>{var k;return v.companyId===((k=t.currentCompany)==null?void 0:k.id)}).filter(v=>{const k=s.customerSearch.toLowerCase();return v.name.toLowerCase().includes(k)||v.cpf.includes(k)||v.email.toLowerCase().includes(k)}).slice(0,10),y=()=>{const v={};if(s.customerId||(v.customerId="Cliente  obrigatrio"),(!s.amount||Number(s.amount)<=0)&&(v.amount="Valor deve ser maior que zero"),s.usePointsDiscount){const k=t.customers.find(T=>T.id===s.customerId),D=Number(s.pointsToUse);!s.pointsToUse||D<=0?v.pointsToUse="Quantidade de pontos deve ser maior que zero":k&&D>k.points&&(v.pointsToUse="Cliente no possui pontos suficientes")}return l(v),Object.keys(v).length===0},j=v=>{var A,I,L;if(v.preventDefault(),!y())return;const k=t.customers.find(Q=>Q.id===s.customerId);if(!k)return;const D=Number(s.amount),T=s.usePointsDiscount?Number(s.pointsToUse):0,z=T*(r.reaisPerPoint/100),K=Math.max(0,D-z),C=Math.floor(K/r.reaisPerPoint),V={id:qe(),companyId:((A=t.currentCompany)==null?void 0:A.id)||"",customerId:k.id,customerName:k.name,amount:K,pointsEarned:C,date:new Date,description:s.description.trim(),products:s.products.trim(),originalAmount:D,pointsUsedAsDiscount:T,discountAmount:z};let Te=k.points+C;s.usePointsDiscount&&(Te-=T);const G={...k,points:Te},$={id:qe(),companyId:((I=t.currentCompany)==null?void 0:I.id)||"",customerId:k.id,customerName:k.name,type:"earned",points:C,description:`Compra: ${_e(K)}`,date:new Date};if(n({type:"ADD_SALE",payload:V}),n({type:"UPDATE_CUSTOMER",payload:G}),n({type:"ADD_POINTS_TRANSACTION",payload:$}),s.usePointsDiscount&&T>0){const Q={id:qe(),companyId:((L=t.currentCompany)==null?void 0:L.id)||"",customerId:k.id,customerName:k.name,type:"spent",points:T,description:`Desconto na compra: ${_e(z)}`,date:new Date};n({type:"ADD_POINTS_TRANSACTION",payload:Q})}e()},b=t.customers.find(v=>v.id===s.customerId),h=Number(s.amount)||0,f=s.usePointsDiscount?Number(s.pointsToUse):0,p=f*(r.reaisPerPoint/100),w=Math.max(0,h-p),_=Math.floor(w/r.reaisPerPoint);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nova Venda - Financeiro"}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ns,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:s.customerSearch,onChange:m,onFocus:()=>u(s.customerSearch.length>0),className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.customerId?"border-red-500":"border-gray-300"}`,placeholder:"Busque por nome, CPF ou email..."}),c&&x.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(v=>o.jsxs("button",{type:"button",onClick:()=>g(v),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:v.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[v.cpf,"  ",v.email,"  ",v.points," pontos"]})]},v.id))}),c&&s.customerSearch.length>0&&x.length===0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Nenhum cliente encontrado"})]}),a.customerId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Original da Venda *"}),o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:d,min:"0",step:"0.01",className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all ${a.amount?"border-red-500":"border-gray-300"}`,placeholder:"0.00"})]}),a.amount&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.amount})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produtos Comprados"}),o.jsxs("div",{className:"relative",children:[o.jsx(qt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"products",value:s.products,onChange:d,rows:2,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Liste os produtos comprados"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),o.jsxs("div",{className:"relative",children:[o.jsx(hc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"description",value:s.description,onChange:d,rows:2,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all resize-none",placeholder:"Descrio da venda (opcional)"})]})]}),b&&b.points>0&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx("input",{type:"checkbox",name:"usePointsDiscount",id:"usePointsDiscount",checked:s.usePointsDiscount,onChange:d,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}),o.jsx("label",{htmlFor:"usePointsDiscount",className:"text-sm font-medium text-blue-800",children:"Usar pontos como desconto"})]}),s.usePointsDiscount&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Quantidade de pontos a usar"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ng,{className:"absolute left-3 top-3 h-5 w-5 text-blue-400"}),o.jsx("input",{type:"number",name:"pointsToUse",value:s.pointsToUse,onChange:d,min:"1",max:b.points,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${a.pointsToUse?"border-red-500":"border-blue-300"}`,placeholder:"0"})]}),o.jsxs("p",{className:"mt-1 text-xs text-blue-600",children:["Mximo: ",b.points," pontos disponveis"]}),a.pointsToUse&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.pointsToUse})]})]}),h>0&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Resumo da Venda"}),o.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Valor original:"}),o.jsx("span",{children:_e(h)})]}),s.usePointsDiscount&&f>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Desconto (",f," pontos):"]}),o.jsxs("span",{children:["-",_e(p)]})]}),o.jsxs("div",{className:"flex justify-between font-medium",children:[o.jsx("span",{children:"Valor final:"}),o.jsx("span",{children:_e(w)})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Pontos a ganhar:"}),o.jsx("span",{children:_})]}),b&&o.jsxs("div",{className:"flex justify-between font-medium",children:[o.jsx("span",{children:"Pontos finais:"}),o.jsx("span",{children:b.points+_-f})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Registrar Venda"})]})]})]})})}function Mv(){const{state:e,dispatch:t}=ge(),[n,r]=P.useState("customers"),[s,i]=P.useState(!1),[a,l]=P.useState(!1),[c,u]=P.useState(!1),[d,m]=P.useState(!1),[g,x]=P.useState(!1),[y,j]=P.useState(!1),[b,h]=P.useState(null),[f,p]=P.useState(null),[w,_]=P.useState(!1),[S,v]=P.useState(null),[k,D]=P.useState(!1),[T,z]=P.useState(""),[K,C]=P.useState(!1),[V,Te]=P.useState(null),G=e.currentCompany,$=e.plans.find(N=>N.id===(G==null?void 0:G.planId));if(!G||!$)return o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[o.jsx(Lu,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-lg font-medium text-red-800 mb-2",children:"Erro de Configurao"}),o.jsx("p",{className:"text-red-600",children:"Empresa ou plano no encontrado. Entre em contato com o suporte."})]})});const A=e.customers.filter(N=>N.companyId===G.id),I=e.products.filter(N=>N.companyId===G.id),L=e.sales.filter(N=>N.companyId===G.id),Q=e.pointsTransactions.filter(N=>N.companyId===G.id),ae=e.pointsConfigs.find(N=>N.companyId===G.id)||{reaisPerPoint:10,companyId:G.id},Ae=e.loyaltyRequests.filter(N=>N.companyId===G.id),nt=Ae.filter(N=>N.status==="pending"),ft=(()=>{const N=new Map;return Ae.forEach(M=>{const ee=M.productId,Re=M.productName;N.has(ee)||N.set(ee,{id:ee,name:Re,totalRequests:0,approvedRequests:0,rejectedRequests:0,pendingRequests:0,completedRequests:0,totalPointsUsed:0,lastRequestDate:null});const W=N.get(ee);switch(W.totalRequests++,W.totalPointsUsed+=M.pointsUsed,(!W.lastRequestDate||new Date(M.requestDate)>new Date(W.lastRequestDate))&&(W.lastRequestDate=M.requestDate),M.status){case"approved":case"available_for_pickup":W.approvedRequests++;break;case"rejected":W.rejectedRequests++;break;case"pending":W.pendingRequests++;break;case"completed":W.completedRequests++;break}}),Array.from(N.values()).sort((M,ee)=>ee.totalRequests-M.totalRequests)})(),mt=Cg(A,30),Ts=mt.filter(N=>N.daysUntilBirthday===0),As=mt.filter(N=>N.daysUntilBirthday<=7&&N.daysUntilBirthday>0),In=$.maxCustomers!==-1&&A.length>=$.maxCustomers,On=$.maxProducts!==-1&&I.length>=$.maxProducts,Nm=[{id:"customers",label:"Clientes",icon:ps},{id:"products",label:"Produtos",icon:or},{id:"sales",label:"Vendas",icon:$u},{id:"financial",label:"Financeiro",icon:En},{id:"requests",label:"Solicitaes",icon:Gs},{id:"recurrence",label:"Recorrncias",icon:Ht},{id:"transactions",label:"Transaes",icon:Ht},{id:"birthdays",label:"Aniversrios",icon:gi},{id:"settings",label:"Configuraes",icon:nl}],_m=[{label:"Total de Clientes",value:`${A.length}${$.maxCustomers!==-1?`/${$.maxCustomers}`:""}`,icon:ps,color:In?"text-red-600":"text-blue-600",bgColor:In?"bg-red-100":"bg-blue-100"},{label:"Produtos Ativos",value:`${I.filter(N=>N.available).length}${$.maxProducts!==-1?`/${$.maxProducts}`:""}`,icon:or,color:On?"text-red-600":"text-green-600",bgColor:On?"bg-red-100":"bg-green-100"},{label:"Vendas Hoje",value:L.filter(N=>{const M=new Date;return new Date(N.date).toDateString()===M.toDateString()}).length,icon:$u,color:"text-pink-600",bgColor:"bg-pink-100"},{label:"Receita Total",value:_e(L.reduce((N,M)=>N+M.amount,0)),icon:Ht,color:"text-orange-600",bgColor:"bg-orange-100"},{label:"Solicitaes Pendentes",value:nt.length,icon:Gs,color:"text-purple-600",bgColor:"bg-purple-100"}],km=A.filter(N=>N.name.toLowerCase().includes(T.toLowerCase())||N.email.toLowerCase().includes(T.toLowerCase())||N.cpf.includes(T)),Sm=I.filter(N=>N.name.toLowerCase().includes(T.toLowerCase())||N.description.toLowerCase().includes(T.toLowerCase())),kc=L.filter(N=>N.customerName.toLowerCase().includes(T.toLowerCase())||N.description&&N.description.toLowerCase().includes(T.toLowerCase())),Cm=Q.filter(N=>N.customerName.toLowerCase().includes(T.toLowerCase())||N.description.toLowerCase().includes(T.toLowerCase())),Em=N=>{var Re;const M=new Date;M.setHours(M.getHours()+24);const ee={...N,status:"available_for_pickup",processedDate:new Date,processedBy:((Re=e.currentUser)==null?void 0:Re.name)||"Admin",expiresAt:M};t({type:"UPDATE_LOYALTY_REQUEST",payload:ee})},Sc=(N,M)=>{var Re;if(M){const W=e.customers.find(ce=>ce.id===N.customerId);if(W){const ce={...W,points:W.points+N.pointsUsed},ue={id:generateId(),companyId:G.id,customerId:W.id,customerName:W.name,type:"credit",points:N.pointsUsed,description:`Devoluo: ${N.productName} (solicitao rejeitada)`,date:new Date};t({type:"UPDATE_CUSTOMER",payload:ce}),t({type:"ADD_POINTS_TRANSACTION",payload:ue})}}const ee={...N,status:"rejected",processedDate:new Date,processedBy:((Re=e.currentUser)==null?void 0:Re.name)||"Admin"};t({type:"UPDATE_LOYALTY_REQUEST",payload:ee}),C(!1),Te(null)},Pm=N=>{var M;if(window.confirm("Marcar como concludo? O produto foi entregue ao cliente?")){const ee={...N,status:"completed",processedDate:new Date,processedBy:((M=e.currentUser)==null?void 0:M.name)||"Admin"};t({type:"UPDATE_LOYALTY_REQUEST",payload:ee})}},Tm=N=>{Te(N),C(!0)};bl.useEffect(()=>{const N=()=>{const ee=new Date;Ae.filter(W=>W.status==="available_for_pickup"&&W.expiresAt&&new Date(W.expiresAt)<=ee).forEach(W=>{const ce={...W,status:"completed",processedDate:new Date,processedBy:"Sistema (expirado)"};t({type:"UPDATE_LOYALTY_REQUEST",payload:ce})})},M=setInterval(N,6e4);return N(),()=>clearInterval(M)},[Ae,t]);const Am=N=>{const M=e.customers.find(Re=>Re.id===N);if(!M)return;const ee=`Tem certeza que deseja excluir o cliente "${M.name}"?

Esta ao ir:
- Remover o cliente permanentemente
- Excluir todas as vendas relacionadas
- Excluir todas as transaes de pontos
- Excluir todas as solicitaes de produtos

Esta operao NO PODE ser desfeita!`;if(window.confirm(ee)){const Re=e.sales.filter(ue=>ue.customerId===N),W=e.pointsTransactions.filter(ue=>ue.customerId===N),ce=e.loyaltyRequests.filter(ue=>ue.customerId===N);Re.forEach(ue=>{t({type:"DELETE_SALE",payload:ue.id})}),W.forEach(ue=>{t({type:"DELETE_POINTS_TRANSACTION",payload:ue.id})}),ce.forEach(ue=>{t({type:"DELETE_LOYALTY_REQUEST",payload:ue.id})}),t({type:"DELETE_CUSTOMER",payload:N})}},Rm=N=>{const M=e.products.find(ce=>ce.id===N);if(!M)return;const ee=e.loyaltyRequests.filter(ce=>ce.productId===N),Re=ee.some(ce=>ce.status==="pending");let W=`Tem certeza que deseja excluir o produto "${M.name}"?`;Re&&(W+=`

ATENO: Este produto possui solicitaes pendentes que tambm sero excludas.`),ee.length>0&&(W+=`

Esta ao ir excluir ${ee.length} solicitao(es) relacionada(s).`),W+=`

Esta operao NO PODE ser desfeita!`,window.confirm(W)&&(ee.forEach(ce=>{if(ce.status==="pending"){const ue=e.customers.find(No=>No.id===ce.customerId);if(ue){const No={...ue,points:ue.points+ce.pointsUsed},Im={id:generateId(),companyId:G.id,customerId:ue.id,customerName:ue.name,type:"credit",points:ce.pointsUsed,description:`Devoluo automtica: ${M.name} (produto excludo)`,date:new Date};t({type:"UPDATE_CUSTOMER",payload:No}),t({type:"ADD_POINTS_TRANSACTION",payload:Im})}}t({type:"DELETE_LOYALTY_REQUEST",payload:ce.id})}),t({type:"DELETE_PRODUCT",payload:N}))},Dm=N=>{window.confirm("Tem certeza que deseja excluir esta solicitao?")&&t({type:"DELETE_LOYALTY_REQUEST",payload:N.id})};return o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 mb-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:G.name}),o.jsxs("p",{className:"text-blue-100 mt-1",children:["Plano: ",$.name]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm text-blue-100",children:"Cdigo de acesso"}),o.jsx("div",{className:"text-lg font-bold",children:G.slug})]})]})}),(In||On)&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Lu,{className:"w-5 h-5 text-yellow-600 mr-2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Limite do plano atingido"}),o.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:[In&&"Voc atingiu o limite de clientes do seu plano. ",On&&"Voc atingiu o limite de produtos do seu plano. ","Considere fazer upgrade para continuar crescendo."]})]})]})}),(Ts.length>0||As.length>0)&&o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(mg,{className:"w-5 h-5 text-purple-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Notificaes de Aniversrio"})]}),Ts.length>0&&o.jsx("div",{className:"mb-2",children:o.jsxs("p",{className:"text-sm text-purple-700",children:[" ",o.jsx("strong",{children:"Hoje:"})," ",Ts.map(N=>N.name).join(", ")]})}),As.length>0&&o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-purple-700",children:[" ",o.jsx("strong",{children:"Prximos 7 dias:"})," ",As.length," aniversrio(s)"]})})]}),nt.length>0&&o.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Gs,{className:"w-5 h-5 text-orange-600 mr-2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Solicitaes Pendentes"}),o.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Voc tem ",nt.length," solicitao(es) de produtos aguardando aprovao."]})]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:_m.map(N=>{const M=N.icon;return o.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:N.label}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.value})]}),o.jsx("div",{className:`p-3 rounded-lg ${N.bgColor}`,children:o.jsx(M,{className:`w-6 h-6 ${N.color}`})})]})},N.label)})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:Nm.map(N=>{const M=N.icon;return o.jsxs("button",{onClick:()=>r(N.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===N.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(M,{className:"w-5 h-5"}),o.jsx("span",{children:N.label})]},N.id)})})}),o.jsxs("div",{className:"p-6",children:[n!=="settings"&&o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ns,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:T,onChange:N=>z(N.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-80"})]}),o.jsxs("div",{className:"flex space-x-3",children:[n==="customers"&&o.jsxs("button",{onClick:()=>i(!0),disabled:In,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${In?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Novo Cliente"})]}),n==="products"&&o.jsxs("button",{onClick:()=>l(!0),disabled:On,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${On?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"}`,children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Novo Produto"})]}),n==="sales"&&o.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Nova Venda"})]}),n==="financial"&&o.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(Vt,{className:"w-4 h-4"}),o.jsx("span",{children:"Nova Venda"})]})]})]}),n==="customers"&&o.jsx("div",{className:"space-y-4",children:km.map(N=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[N.email,"  ",N.cpf]}),o.jsx("p",{className:"text-sm text-gray-500",children:N.phone}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[N.points," pontos"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:[sl(new Date(N.birthDate))," anos"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:["Desde ",ct(new Date(N.createdAt))]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>h(N),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Bi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Am(N.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(wn,{className:"w-4 h-4"})})]})]},N.id))}),n==="products"&&o.jsx("div",{className:"space-y-4",children:Sm.map(N=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.name}),o.jsx("p",{className:"text-sm text-gray-500",children:N.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[N.pointsRequired," pontos"]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.available?"Disponvel":"Indisponvel"})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>p(N),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Bi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Rm(N.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:o.jsx(wn,{className:"w-4 h-4"})})]})]},N.id))}),n==="sales"&&o.jsx("div",{className:"space-y-4",children:kc.map(N=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:N.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:_e(N.amount)}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["+",N.pointsEarned," pontos"]}),o.jsx("span",{className:"text-xs text-gray-500",children:ct(new Date(N.date))})]})]})},N.id))}),n==="financial"&&o.jsx("div",{className:"space-y-4",children:kc.map(N=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:N.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:_e(N.amount)}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["+",N.pointsEarned," pontos"]}),N.pointsUsedAsDiscount&&o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["-",N.pointsUsedAsDiscount," pontos (desconto)"]}),o.jsx("span",{className:"text-xs text-gray-500",children:ct(new Date(N.date))})]})]})},N.id))}),n==="requests"&&o.jsxs("div",{className:"space-y-4",children:[Ae.map(N=>o.jsxs("div",{className:`rounded-lg p-4 flex items-center justify-between ${N.status==="pending"?"bg-yellow-50 border border-yellow-200":N.status==="available_for_pickup"?"bg-blue-50 border border-blue-200":N.status==="completed"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.customerName}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Produto: ",N.productName]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[N.pointsUsed," pontos"]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.status==="pending"?"bg-yellow-100 text-yellow-800":N.status==="available_for_pickup"?"bg-blue-100 text-blue-800":N.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.status==="pending"?"Pendente":N.status==="available_for_pickup"?"Disponvel para retirada":N.status==="completed"?"Concludo":"Rejeitado"}),o.jsx("span",{className:"text-xs text-gray-500",children:ct(new Date(N.requestDate))}),N.status==="available_for_pickup"&&N.expiresAt&&o.jsx(zv,{expiresAt:new Date(N.expiresAt)})]})]}),N.status==="pending"&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>Em(N),className:"p-2 text-green-600 hover:text-green-800 transition-colors",title:"Aprovar",children:o.jsx(Fi,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>Tm(N),className:"p-2 text-red-600 hover:text-red-800 transition-colors",title:"Rejeitar",children:o.jsx(Tf,{className:"w-5 h-5"})})]}),N.status==="available_for_pickup"&&o.jsx("div",{className:"flex space-x-2",children:o.jsx("button",{onClick:()=>Pm(N),className:"p-2 text-green-600 hover:text-green-800 transition-colors",title:"Marcar como concludo",children:o.jsx(Fi,{className:"w-5 h-5"})})}),(N.status==="rejected"||N.status==="completed")&&o.jsx("button",{onClick:()=>Dm(N),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Excluir",children:o.jsx(wn,{className:"w-4 h-4"})})]},N.id)),Ae.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Gs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhuma solicitao encontrada"})]})]}),n==="recurrence"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Produtos Mais Solicitados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ae.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Total de Solicitaes"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ae.filter(N=>N.status==="completed").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Produtos Entregues"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Ae.reduce((N,M)=>N+M.pointsUsed,0)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Pontos Utilizados"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[ft.map((N,M)=>{const ee=N.totalRequests>0?((N.approvedRequests+N.completedRequests)/N.totalRequests*100).toFixed(1):"0";return o.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${M===0?"bg-yellow-500":M===1?"bg-gray-400":M===2?"bg-orange-500":"bg-blue-500"}`,children:M+1}),o.jsx("h3",{className:"font-medium text-gray-900",children:N.name})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.totalRequests}),o.jsx("div",{className:"text-xs text-gray-500",children:"Total de Solicitaes"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.completedRequests}),o.jsx("div",{className:"text-xs text-gray-500",children:"Entregues"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:N.totalPointsUsed}),o.jsx("div",{className:"text-xs text-gray-500",children:"Pontos Utilizados"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[ee,"%"]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Taxa de Aprovao"})]})]}),o.jsx("div",{className:"flex items-center space-x-6 mt-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[N.pendingRequests," pendente(s)"]}),o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[N.approvedRequests," aprovada(s)"]}),o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[N.rejectedRequests," rejeitada(s)"]})]})}),N.lastRequestDate&&o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ltima solicitao: ",ct(new Date(N.lastRequestDate))]})]})})},N.id)}),ft.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ht,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhuma solicitao de produto encontrada"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Os dados de recorrncia aparecero quando os clientes comearem a solicitar produtos"})]})]})]}),n==="transactions"&&o.jsx("div",{className:"space-y-4",children:Cm.map(N=>o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:N.description}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.type==="earned"||N.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[N.type==="earned"||N.type==="credit"?"+":"-",N.points," pontos"]}),o.jsx("span",{className:"text-xs text-gray-500",children:ct(new Date(N.date))})]})]})},N.id))}),n==="birthdays"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-purple-900 mb-4",children:"Aniversrios Prximos (30 dias)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Ts.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Hoje"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:As.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Prximos 7 dias"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:mt.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Prximos 30 dias"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[mt.map(N=>o.jsxs("div",{className:`rounded-lg p-4 flex items-center justify-between ${N.daysUntilBirthday===0?"bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-300":N.daysUntilBirthday<=7?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:N.name}),N.daysUntilBirthday===0&&o.jsx("span",{className:"text-2xl",children:""})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[N.email,"  ",N.phone]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:If(new Date(N.birthDate))}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[sl(new Date(N.birthDate))+1," anos"]}),o.jsx("span",{className:`text-xs font-medium ${N.daysUntilBirthday===0?"text-purple-600":N.daysUntilBirthday<=7?"text-blue-600":"text-gray-600"}`,children:N.daysUntilBirthday===0?"Hoje!":N.daysUntilBirthday===1?"Amanh":`Em ${N.daysUntilBirthday} dias`})]})]}),o.jsx("div",{className:"text-right",children:o.jsx(gi,{className:`w-6 h-6 ${N.daysUntilBirthday===0?"text-purple-500":N.daysUntilBirthday<=7?"text-blue-500":"text-gray-400"}`})})]},N.id)),mt.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(gi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhum aniversrio nos prximos 30 dias"})]})]})]}),n==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configurao de Pontos"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Estatsticas"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>v("requests"),className:"w-full flex items-center justify-between p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(fg,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Solicitaes de Fidelidade"})]}),o.jsx("span",{className:"text-xs text-blue-600",children:"Ver "})]}),o.jsxs("button",{onClick:()=>v("costs"),className:"w-full flex items-center justify-between p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(En,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm font-medium text-green-800",children:"Custo das Solicitaes"})]}),o.jsx("span",{className:"text-xs text-green-600",children:"Ver "})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ferramentas"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>_(!0),className:"w-full flex items-center justify-between p-3 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ef,{className:"w-4 h-4 text-purple-600"}),o.jsx("span",{className:"text-sm font-medium text-purple-800",children:"QR Code de Cadastro"})]}),o.jsx("span",{className:"text-xs text-purple-600",children:"Gerar "})]}),o.jsxs("button",{onClick:()=>D(!0),className:"w-full flex items-center justify-between p-3 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pf,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Configurar Webhooks"})]}),o.jsx("span",{className:"text-xs text-orange-600",children:"Config "})]})]})]})]}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Atualmente: Cada ",ae.reaisPerPoint," reais gastos = 1 ponto"]}),o.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all",children:[o.jsx(nl,{className:"w-4 h-4"}),o.jsx("span",{children:"Alterar Configurao"})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gerenciar Pontos"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Adicione ou remova pontos diretamente de um cliente"}),o.jsxs("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all",children:[o.jsx(Cn,{className:"w-4 h-4"}),o.jsx("span",{children:"Gerenciar Pontos"})]})]})]})]})]}),s&&o.jsx(sd,{customer:b,onClose:()=>{i(!1),h(null)}}),a&&o.jsx(id,{product:f,onClose:()=>{l(!1),p(null)}}),c&&o.jsx(Hy,{onClose:()=>u(!1)}),y&&o.jsx(Uv,{onClose:()=>j(!1)}),d&&o.jsx(Wy,{onClose:()=>m(!1)}),g&&o.jsx(Ky,{onClose:()=>x(!1)}),b&&o.jsx(sd,{customer:b,onClose:()=>h(null)}),f&&o.jsx(id,{product:f,onClose:()=>p(null)}),w&&o.jsx(Ov,{onClose:()=>_(!1)}),S&&o.jsx(Lv,{type:S,onClose:()=>v(null)}),k&&o.jsx($v,{onClose:()=>D(!1)}),K&&V&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Rejeitar Solicitao"}),o.jsx("button",{onClick:()=>{C(!1),Te(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(He,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:V.customerName}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Produto: ",V.productName]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Pontos utilizados: ",V.pointsUsed]})]}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[o.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"O que fazer com os pontos?"}),o.jsx("p",{className:"text-sm text-yellow-700",children:"Os pontos j foram descontados do cliente. Escolha se deseja devolv-los ou mant-los removidos."})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>Sc(V,!1),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Rejeitar sem devolver pontos"}),o.jsx("button",{onClick:()=>Sc(V,!0),className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Rejeitar e devolver pontos"})]})]})]})})]})}function zv({expiresAt:e}){const[t,n]=P.useState("");return P.useEffect(()=>{const r=()=>{const i=new Date,a=e.getTime()-i.getTime();if(a<=0){n("Expirado");return}const l=Math.floor(a/(1e3*60*60)),c=Math.floor(a%(1e3*60*60)/(1e3*60)),u=Math.floor(a%(1e3*60)/1e3);n(`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`)};r();const s=setInterval(r,1e3);return()=>clearInterval(s)},[e]),o.jsxs("span",{className:`text-xs font-mono ${t==="Expirado"?"text-red-600":"text-blue-600"}`,children:[" ",t]})}function Fv(){const{state:e,dispatch:t}=ge(),[n,r]=P.useState("points"),[s,i]=P.useState(""),[a,l]=P.useState(!1),[c,u]=P.useState(""),[d,m]=P.useState(""),[g,x]=P.useState(!1),[y,j]=P.useState(!1),[b,h]=P.useState(""),f=e.customers.filter(C=>{var V;return C.email===((V=e.currentUser)==null?void 0:V.email)});bl.useEffect(()=>{!s&&f.length>0&&i(f[0].companyId)},[f,s]);const p=f.find(C=>C.companyId===s),w=e.companies.find(C=>C.id===s);if(!p||!w)return o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-gray-500",children:"Carregando..."})})});const _=e.products.filter(C=>C.available&&C.companyId===s),S=_.filter(C=>C.pointsRequired<=p.points),v=e.pointsTransactions.filter(C=>C.customerId===p.id&&C.companyId===s),k=e.pointsConfigs.find(C=>C.companyId===s)||{reaisPerPoint:10,companyId:s},D=e.loyaltyRequests.filter(C=>C.customerId===p.id&&C.companyId===s),T=C=>{if(C.pointsRequired>p.points){alert("Voc no possui pontos suficientes para este produto.");return}if(window.confirm(`Deseja solicitar ${C.name} por ${C.pointsRequired} pontos?`)){const V={id:qe(),customerId:p.id,customerName:p.name,productId:C.id,productName:C.name,pointsUsed:C.pointsRequired,status:"pending",requestDate:new Date,companyId:s},Te={...p,points:p.points-C.pointsRequired},G={id:qe(),companyId:s,customerId:p.id,customerName:p.name,type:"spent",points:C.pointsRequired,description:`Solicitao: ${C.name}`,date:new Date};t({type:"ADD_LOYALTY_REQUEST",payload:V}),t({type:"UPDATE_CUSTOMER",payload:Te}),t({type:"ADD_POINTS_TRANSACTION",payload:G}),alert("Solicitao enviada com sucesso! Aguarde a aprovao da empresa.")}},z=[{id:"points",label:"Meus Pontos",icon:vn},{id:"products",label:"Produtos",icon:or},{id:"orders",label:"Pedidos",icon:qt},{id:"history",label:"Histrico",icon:Jo},{id:"settings",label:"Configuraes",icon:nl}],K=C=>{if(C.preventDefault(),h(""),c.length<4){h("A senha deve ter pelo menos 4 caracteres");return}if(c!==d){h("As senhas no coincidem");return}const V={...p,password:c};t({type:"UPDATE_CUSTOMER",payload:V}),l(!1),u(""),m("")};return o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.length>1&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione a empresa"}),o.jsx("select",{value:s,onChange:C=>i(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",children:f.map(C=>{const V=e.companies.find(Te=>Te.id===C.companyId);return o.jsxs("option",{value:C.companyId,children:[V==null?void 0:V.name," - ",C.points," pontos"]},C.companyId)})})]}),o.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-orange-400 rounded-xl p-6 mb-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Ol, ",p.name,"!"]}),o.jsxs("p",{className:"text-pink-100 mt-1",children:[w.name," - Programa de Fidelidade"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-bold",children:p.points}),o.jsx("div",{className:"text-pink-100",children:"pontos disponveis"})]})]})}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:z.map(C=>{const V=C.icon;return o.jsxs("button",{onClick:()=>r(C.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===C.id?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx(V,{className:"w-5 h-5"}),o.jsx("span",{children:C.label})]},C.id)})})}),o.jsxs("div",{className:"p-6",children:[n==="points"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-orange-50 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pontos Totais"}),o.jsx("p",{className:"text-2xl font-bold text-pink-600",children:p.points})]}),o.jsx(vn,{className:"w-8 h-8 text-pink-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Produtos Disponveis"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.length})]}),o.jsx(or,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transaes"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.length})]}),o.jsx(Jo,{className:"w-8 h-8 text-blue-500"})]})})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Como funciona o sistema de pontos?"}),o.jsxs("p",{className:"text-sm text-blue-700",children:["A cada R$ ",k.reaisPerPoint.toFixed(2)," gastos, voc ganha 1 ponto. Use seus pontos para resgatar produtos incrveis em nossa loja!"]})]})]}),n==="products"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:_.map(C=>{const V=C.pointsRequired<=p.points;return o.jsxs("div",{className:`rounded-lg border-2 p-6 transition-all ${V?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:C.name}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${V?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[C.pointsRequired," pontos"]}),V&&o.jsx("span",{className:"text-sm text-green-600 font-medium",children:" Disponvel"})]})]}),C.imageUrl&&o.jsx("div",{className:"ml-4",children:o.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-16 h-16 object-cover rounded-lg"})})]}),V&&o.jsx("button",{onClick:()=>T(C),className:"mt-4 w-full bg-gradient-to-r from-pink-500 to-orange-400 text-white py-2 px-4 rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all transform hover:scale-105",children:"Solicitar Agora"})]},C.id)})}),_.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(or,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhum produto disponvel no momento"})]})]}),n==="orders"&&o.jsxs("div",{className:"space-y-4",children:[D.map(C=>o.jsx("div",{className:`rounded-lg p-4 border-2 ${C.status==="pending"?"bg-yellow-50 border-yellow-200":C.status==="available_for_pickup"?"bg-blue-50 border-blue-200":C.status==="completed"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:C.productName}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Solicitado em ",ct(new Date(C.requestDate))]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[C.pointsUsed," pontos"]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.status==="pending"?"bg-yellow-100 text-yellow-800":C.status==="available_for_pickup"?"bg-blue-100 text-blue-800":C.status==="completed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.status==="pending"?"Aguardando resposta da loja":C.status==="available_for_pickup"?"Disponvel para retirada":C.status==="completed"?"Concludo":"Rejeitado"})]}),C.status==="available_for_pickup"&&C.expiresAt&&o.jsxs("div",{className:"mt-3 p-3 bg-blue-100 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qt,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Produto disponvel para retirada"})]}),o.jsx("div",{className:"mt-1",children:o.jsx(Bv,{expiresAt:new Date(C.expiresAt)})})]}),C.status==="completed"&&o.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(vn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm font-medium text-green-800",children:"Produto entregue com sucesso!"})]}),C.processedDate&&o.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Concludo em ",ct(new Date(C.processedDate))]})]}),C.status==="rejected"&&o.jsxs("div",{className:"mt-3 p-3 bg-red-100 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qt,{className:"w-4 h-4 text-red-600"}),o.jsx("span",{className:"text-sm font-medium text-red-800",children:"Solicitao rejeitada"})]}),C.rejectionReason&&o.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded border border-red-200",children:[o.jsx("p",{className:"text-xs font-medium text-red-800",children:"Motivo:"}),o.jsx("p",{className:"text-xs text-red-700",children:C.rejectionReason})]}),C.processedDate&&o.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Rejeitado em ",ct(new Date(C.processedDate))]})]})]})})},C.id)),D.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Voc ainda no fez nenhuma solicitao"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Acesse a aba "Produtos" para solicitar itens com seus pontos'})]})]}),n==="history"&&o.jsxs("div",{className:"space-y-4",children:[v.map(C=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:C.description}),o.jsx("p",{className:"text-sm text-gray-500",children:ct(new Date(C.date))})]}),o.jsx("div",{className:"text-right",children:o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium ${C.type==="earned"||C.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[C.type==="earned"||C.type==="credit"?"+":"-",C.points," pontos"]})})]},C.id)),v.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Jo,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Nenhuma transao encontrada"})]})]}),n==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informaes da Conta"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CPF"}),o.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.cpf})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Nascimento"}),o.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[If(new Date(p.birthDate))," (",sl(new Date(p.birthDate))," anos)"]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Alterar Senha"}),a?o.jsxs("form",{onSubmit:K,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nova Senha"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:g?"text":"password",value:c,onChange:C=>u(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Digite sua nova senha",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>x(!g),children:g?o.jsx(Pn,{className:"h-4 w-4"}):o.jsx(Tn,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nova Senha"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:y?"text":"password",value:d,onChange:C=>m(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Confirme sua nova senha",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>j(!y),children:y?o.jsx(Pn,{className:"h-4 w-4"}):o.jsx(Tn,{className:"h-4 w-4"})})]})]}),b&&o.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:b}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{l(!1),u(""),m(""),h("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all",children:"Salvar Senha"})]})]}):o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-orange-400 text-white rounded-lg hover:from-pink-600 hover:to-orange-500 transition-all",children:[o.jsx(fc,{className:"w-4 h-4"}),o.jsx("span",{children:"Alterar Senha"})]})]})]})]})]})]})}function Bv({expiresAt:e}){const[t,n]=P.useState("");return bl.useEffect(()=>{const r=()=>{const i=new Date,a=e.getTime()-i.getTime();if(a<=0){n("Expirado");return}const l=Math.floor(a/(1e3*60*60)),c=Math.floor(a%(1e3*60*60)/(1e3*60)),u=Math.floor(a%(1e3*60)/1e3);n(`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`)};r();const s=setInterval(r,1e3);return()=>clearInterval(s)},[e]),o.jsxs("div",{className:"text-sm text-blue-700",children:[o.jsx("span",{className:"font-medium",children:"Tempo restante: "}),o.jsx("span",{className:`font-mono ${t==="Expirado"?"text-red-600":"text-blue-600"}`,children:t==="Expirado"?" Expirado":` ${t}`})]})}function qv({companySlug:e}){const{state:t,dispatch:n}=ge(),[r,s]=P.useState({name:"",cpf:"",email:"",phone:"",address:"",birthDate:"",password:"",confirmPassword:""}),[i,a]=P.useState({}),[l,c]=P.useState(!1),[u,d]=P.useState(!1),[m,g]=P.useState(!1),x=t.companies.find(h=>h.slug===e&&h.isActive);if(!x)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-pink-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-md w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Sn,{className:"w-8 h-8 text-red-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Empresa no encontrada"}),o.jsxs("p",{className:"text-gray-600",children:['A empresa com o cdigo "',e,'" no foi encontrada ou est inativa.']})]})})});const y=h=>{const{name:f,value:p}=h.target;let w=p;f==="cpf"?w=Af(p):f==="phone"&&(w=Rf(p)),s(_=>({..._,[f]:w})),i[f]&&a(_=>({..._,[f]:""}))},j=()=>{const h={};return r.name.trim()||(h.name="Nome  obrigatrio"),r.cpf.trim()?Df(r.cpf)?t.customers.find(p=>p.cpf===r.cpf&&p.companyId===x.id)&&(h.cpf="CPF j cadastrado nesta empresa"):h.cpf="CPF invlido":h.cpf="CPF  obrigatrio",r.email.trim()?mc(r.email)?t.customers.find(p=>p.email===r.email&&p.companyId===x.id)&&(h.email="Email j cadastrado nesta empresa"):h.email="Email invlido":h.email="Email  obrigatrio",r.phone.trim()?rl(r.phone).length<10&&(h.phone="Telefone invlido"):h.phone="Telefone  obrigatrio",r.birthDate?new Date(r.birthDate)>=new Date&&(h.birthDate="Data de nascimento deve ser anterior a hoje"):h.birthDate="Data de nascimento  obrigatria",r.password.trim()?r.password.length<4&&(h.password="Senha deve ter pelo menos 4 caracteres"):h.password="Senha  obrigatria",r.password!==r.confirmPassword&&(h.confirmPassword="Senhas no coincidem"),a(h),Object.keys(h).length===0},b=h=>{if(h.preventDefault(),!j())return;const f={id:qe(),companyId:x.id,name:r.name.trim(),cpf:r.cpf,email:r.email.trim(),phone:r.phone,address:r.address.trim(),birthDate:new Date(r.birthDate),points:0,password:r.password,createdAt:new Date};n({type:"ADD_CUSTOMER",payload:f}),g(!0)};return m?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-md w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Fi,{className:"w-8 h-8 text-green-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Cadastro realizado com sucesso!"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["Bem-vindo ao programa de fidelidade da ",x.name,"!"]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Seus dados de acesso:"}),o.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Email:"})," ",r.email]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Senha:"})," ",r.password]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Agora voc pode acessar o sistema e comear a acumular pontos!"}),o.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105",children:"Fazer Login"})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Sn,{className:"w-8 h-8 text-white"})}),o.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Cadastre-se em ",x.name]}),o.jsx("p",{className:"text-gray-600",children:"Junte-se ao nosso programa de fidelidade e comece a acumular pontos!"})]}),o.jsxs("form",{onSubmit:b,className:"bg-white rounded-xl shadow-lg p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),o.jsxs("div",{className:"relative",children:[o.jsx(uo,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"name",value:r.name,onChange:y,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.name?"border-red-500":"border-gray-300"}`,placeholder:"Seu nome completo"})]}),i.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"cpf",value:r.cpf,onChange:y,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.cpf?"border-red-500":"border-gray-300"}`,placeholder:"000.000.000-00",maxLength:14})]}),i.cpf&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.cpf})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),o.jsxs("div",{className:"relative",children:[o.jsx(co,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"email",value:r.email,onChange:y,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.email?"border-red-500":"border-gray-300"}`,placeholder:"seu@email.com"})]}),i.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cf,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:y,className:`w-full pl-10 pr-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.phone?"border-red-500":"border-gray-300"}`,placeholder:"(11) 99999-9999",maxLength:15})]}),i.phone&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento *"}),o.jsx("input",{type:"date",name:"birthDate",value:r.birthDate,onChange:y,className:`w-full px-3 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.birthDate?"border-red-500":"border-gray-300"}`}),i.birthDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.birthDate})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sf,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("textarea",{name:"address",value:r.address,onChange:y,rows:2,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all resize-none",placeholder:"Seu endereo (opcional)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:l?"text":"password",name:"password",value:r.password,onChange:y,className:`w-full px-3 py-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.password?"border-red-500":"border-gray-300"}`,placeholder:"Sua senha"}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>c(!l),children:l?o.jsx(Pn,{className:"h-5 w-5"}):o.jsx(Tn,{className:"h-5 w-5"})})]}),i.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.password})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha *"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:u?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:y,className:`w-full px-3 py-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all ${i.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirme sua senha"}),o.jsx("button",{type:"button",className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",onClick:()=>d(!u),children:u?o.jsx(Pn,{className:"h-5 w-5"}):o.jsx(Tn,{className:"h-5 w-5"})})]}),i.confirmPassword&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),o.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all transform hover:scale-105 font-medium",children:"Criar Conta"}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["J tem uma conta?"," ",o.jsx("button",{type:"button",onClick:()=>window.location.href="/",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Fazer login"})]})})]})]})})}function Vv(){const{state:e}=ge(),[t,n]=P.useState(window.location.pathname);P.useEffect(()=>{const s=()=>{n(window.location.pathname)};return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[]);const r=t.match(/^\/register\/(.+)$/);if(r){const s=r[1];return o.jsx(qv,{companySlug:s})}return e.currentUser?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(kg,{}),e.currentUser.type==="superadmin"?o.jsx(Vy,{}):e.currentUser.type==="admin"?o.jsx(Mv,{}):o.jsx(Fv,{})]}):o.jsx(Sg,{})}function Hv(){return o.jsx(ug,{children:o.jsx(Vv,{})})}jf(document.getElementById("root")).render(o.jsx(P.StrictMode,{children:o.jsx(Hv,{})}));
